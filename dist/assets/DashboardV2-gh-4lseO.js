const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CSyec5cP.js","assets/index-BIcNJgNM.js","assets/react-vendor-CJgqbvH4.js","assets/utils-vendor-5vCYNseS.js","assets/ui-vendor-DNgltnAO.js","assets/query-vendor-GtDMnHGN.js","assets/socket-vendor-TjCxX7sJ.js","assets/web-DgKQ6aHV.js","assets/offlineApi-DCXCe7i_.js"])))=>i.map(i=>d[i]);
import{w as ge,a as Kl,j as e,C as cl,u as ue,r as bl,P as ke,g as fl,b as Jl,I as $n,c as Yl}from"./index-BIcNJgNM.js";import{r as d,R as ve,a as po}from"./react-vendor-CJgqbvH4.js";import{O as xe,A as Zl,f as zn,Q as rn,U as eo,u as et,V as ot,Y as en,h as Ae,X as Go,_ as nt,$ as lt,a0 as tt,R as De,J as Be,a1 as Do,a2 as hn,a3 as gn,a4 as On,a5 as it,S as vn,K as Co,j as oo,a6 as un,a7 as Qe,r as ro,t as st,g as Uo,P as Xe,a8 as dt,a9 as Ke,aa as mn,o as El,ab as Qn,ac as Nl,d as at,ad as xl,q as Fo,a as Je,ae as Ro,af as pl,ag as rt,ah as zo,ai as Cl,c as Rl,E as ut,aj as Io,x as Wn,ak as mt,N as Dn,y as cn,al as bn,am as _n,an as Gn,ao as fn,ap as ct,aq as bt,ar as ft,T as Un,as as Et,at as Nt,p as xt,au as pt,m as En,W as Pl,s as qn,av as Xn,aw as Kn,ax as Ct,Z as Rt,ay as Pt,B as hl,z as ht,az as gt}from"./ui-vendor-DNgltnAO.js";import{o as Sn,a as no,b as yn,c as wn,d as vt}from"./offlineApi-DCXCe7i_.js";import{_ as qo}from"./utils-vendor-5vCYNseS.js";const Nn=["from-rose-500 to-pink-600","from-purple-500 to-indigo-600","from-blue-500 to-cyan-600","from-emerald-500 to-teal-600","from-amber-500 to-orange-600","from-fuchsia-500 to-purple-600","from-sky-500 to-blue-600","from-lime-500 to-green-600"],No=n=>{const o=n.split("").reduce((l,t)=>(l=(l<<5)-l+t.charCodeAt(0),l&l),0);return Nn[Math.abs(o)%Nn.length]},Dt=n=>new Date(n).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),St=()=>{const[n,o]=d.useState([]),[l,t]=d.useState(new Map),[s,i]=d.useState(""),[r,a]=d.useState(!0),[m,E]=d.useState(!1),[c,N]=d.useState([]),[h,b]=d.useState(!0),[p,x]=d.useState(0),[w,P]=d.useState(!0),[y,D]=d.useState("public"),[u,f]=d.useState(null),[v,C]=d.useState(new Map),[F,V]=d.useState(new Map),[S,I]=d.useState(""),[H,O]=d.useState(!1),[Q,G]=d.useState(new Set),oe=d.useRef(null),R=d.useRef(null),B=d.useRef(null),L=d.useMemo(()=>{const M=localStorage.getItem("currentUser");if(M){const k=JSON.parse(M);return{id:k.id||k.userId||"anonymous",name:k.name||k.username||"مستخدم",color:No(k.id||k.userId||"anonymous")}}return{id:"anonymous",name:"مستخدم",color:Nn[0]}},[]);d.useEffect(()=>{Z();const M=X=>{o(ae=>ae.some(me=>me.id===X.id)?ae:[...ae,{...X,userColor:No(X.userId),timestamp:new Date(X.timestamp)}]),X.userId!==L.id&&(!r||y==="private")&&(x(ae=>ae+1),h&&A("public"))},k=X=>{const ae=X.userId===L.id?X.targetUserId:X.userId;t(me=>{const je=new Map(me),lo=je.get(ae)||[];return lo.some(g=>g.id===X.id)?me:(je.set(ae,[...lo,{...X,userColor:No(X.userId),timestamp:new Date(X.timestamp)}]),je)}),X.userId!==L.id&&(u?.id!==ae||y!=="private")&&(C(me=>{const je=new Map(me);return je.set(ae,(je.get(ae)||0)+1),je}),h&&A("private"))},z=X=>{V(ae=>{const me=new Map(ae);return me.set(X.userId,X.isTyping),me})},de=X=>{const ae=X.map(me=>({id:me.userId,name:me.userName,color:No(me.userId)})).filter(me=>me.id!==L.id);N(ae)},re=X=>{const ae={id:`system-${Date.now()}`,userId:"system",userName:"النظام",userColor:"from-slate-400 to-slate-500",message:X.message,timestamp:new Date,type:"system"};o(me=>[...me,ae])};return ge.on("chat:message",M),ge.on("chat:private",k),ge.on("chat:typing",z),ge.on("users:online",de),ge.on("chat:system",re),()=>{ge.off("chat:message",M),ge.off("chat:private",k),ge.off("chat:typing",z),ge.off("users:online",de),ge.off("chat:system",re)}},[L.id,r,h,y,u]),d.useEffect(()=>{U()},[n,l,u]),d.useEffect(()=>{r&&y==="public"&&x(0),r&&y==="private"&&u&&C(M=>{const k=new Map(M);return k.delete(u.id),k})},[r,y,u]);const Z=async()=>{P(!0);try{const M=await Kl.get("/chat/messages");M?.messages&&o(M.messages.map(k=>({...k,timestamp:new Date(k.timestamp),userColor:No(k.userId)})))}catch{const k=localStorage.getItem("chat_messages");k&&o(JSON.parse(k).map(z=>({...z,timestamp:new Date(z.timestamp)})))}finally{P(!1)}},U=()=>{oe.current?.scrollIntoView({behavior:"smooth"})},A=(M="general")=>{try{const k=new(window.AudioContext||window.webkitAudioContext),z=k.createOscillator(),de=k.createGain();z.connect(de),de.connect(k.destination),M==="private"?(z.type="sine",z.frequency.setValueAtTime(880,k.currentTime),de.gain.setValueAtTime(.15,k.currentTime),de.gain.exponentialRampToValueAtTime(.01,k.currentTime+.1),z.start(k.currentTime),z.stop(k.currentTime+.1),setTimeout(()=>{const re=k.createOscillator(),X=k.createGain();re.connect(X),X.connect(k.destination),re.type="sine",re.frequency.setValueAtTime(1046,k.currentTime),X.gain.setValueAtTime(.15,k.currentTime),X.gain.exponentialRampToValueAtTime(.01,k.currentTime+.15),re.start(),re.stop(k.currentTime+.15)},120)):M==="public"?(z.type="sine",z.frequency.setValueAtTime(523,k.currentTime),de.gain.setValueAtTime(.1,k.currentTime),de.gain.exponentialRampToValueAtTime(.01,k.currentTime+.2),z.start(k.currentTime),z.stop(k.currentTime+.2)):(z.type="triangle",z.frequency.setValueAtTime(660,k.currentTime),de.gain.setValueAtTime(.12,k.currentTime),de.gain.exponentialRampToValueAtTime(.01,k.currentTime+.15),z.start(k.currentTime),z.stop(k.currentTime+.15))}catch{try{const z=new Audio("/notification.mp3");z.volume=.3,z.play().catch(()=>{})}catch{}}},$=M=>{i(M.target.value),y==="private"&&u&&(ge.sendTypingIndicator(u.id,!0),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{ge.sendTypingIndicator(u.id,!1)},2e3))},K=async()=>{if(!s.trim())return;const M=`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(y==="private"&&u)ge.sendPrivateMessage(u.id,s.trim(),M),ge.sendTypingIndicator(u.id,!1);else{const k={id:M,userId:L.id,userName:L.name,userColor:L.color,message:s.trim(),timestamp:new Date,type:"message"},z=JSON.parse(localStorage.getItem("chat_messages")||"[]");z.push(k),z.length>100&&z.shift(),localStorage.setItem("chat_messages",JSON.stringify(z)),ge.sendChatMessage(k)}i(""),R.current?.focus()},j=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),K())},W=M=>M.split(" ").map(k=>k[0]).join("").slice(0,2),ce=M=>{f(M),D("private"),E(!1),C(k=>{const z=new Map(k);return z.delete(M.id),z})},ie=()=>{D("public"),f(null)},te=Array.from(v.values()).reduce((M,k)=>M+k,0),_=y==="private"&&u?l.get(u.id)||[]:n,Ce=d.useMemo(()=>{if(!S.trim())return _;const M=S.toLowerCase();return _.filter(k=>k.message.toLowerCase().includes(M)||k.userName.toLowerCase().includes(M))},[_,S]),le=u&&F.get(u.id),se=M=>{G(k=>{const z=new Set(k);return z.has(M)?z.delete(M):z.add(M),z})},ee={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}}},be={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}};return e.jsxDEV(xe.div,{initial:"hidden",animate:"visible",variants:ee,className:"bg-white rounded-[2rem] border border-slate-100 shadow-xl overflow-hidden flex flex-col h-full relative",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03] pointer-events-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:505,columnNumber:13},void 0),e.jsxDEV("div",{className:`p-4 flex items-center justify-between relative z-10 ${y==="private"?"bg-gradient-to-r from-rose-50/90 to-pink-50/90 backdrop-blur-md border-b border-rose-100":"bg-white/80 backdrop-blur-md border-b border-slate-100"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:y==="private"&&u?e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(xe.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:ie,className:"p-2 bg-white hover:bg-rose-100 text-rose-600 rounded-xl shadow-sm transition-all",children:e.jsxDEV(Zl,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:521,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:515,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`w-11 h-11 rounded-2xl bg-gradient-to-br ${u.color} flex items-center justify-center text-white font-bold text-lg shadow-lg ring-2 ring-white`,children:W(u.name)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:524,columnNumber:33},void 0),e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 border-2 border-white rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:527,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:523,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 text-base",children:u.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:530,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-rose-500/80 text-xs font-medium flex items-center gap-1",children:le?e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV("span",{children:"يكتب"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:534,columnNumber:45},void 0),e.jsxDEV("span",{className:"flex gap-0.5",children:[e.jsxDEV(xe.span,{animate:{opacity:[.4,1,.4]},transition:{repeat:1/0,duration:1.5,delay:0},className:"w-1 h-1 bg-rose-500 rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:536,columnNumber:49},void 0),e.jsxDEV(xe.span,{animate:{opacity:[.4,1,.4]},transition:{repeat:1/0,duration:1.5,delay:.2},className:"w-1 h-1 bg-rose-500 rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:537,columnNumber:49},void 0),e.jsxDEV(xe.span,{animate:{opacity:[.4,1,.4]},transition:{repeat:1/0,duration:1.5,delay:.4},className:"w-1 h-1 bg-rose-500 rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:538,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:535,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:533,columnNumber:41},void 0):e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(zn,{size:10},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:543,columnNumber:45},void 0),"محادثة خاصة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:542,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:531,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:529,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:514,columnNumber:25},void 0):e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-11 h-11 bg-gradient-to-br from-violet-500 to-fuchsia-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-200",children:e.jsxDEV(rn,{size:24,className:"text-white"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:553,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:552,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 text-lg tracking-tight",children:"المحادثات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:556,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV("span",{className:"relative flex h-2 w-2",children:[e.jsxDEV("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:559,columnNumber:41},void 0),e.jsxDEV("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:560,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:558,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-slate-500 text-xs font-medium",children:c.length>0?`${c.length} متصل الآن`:"الفريق غير متصل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:562,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:557,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:555,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:551,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:512,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[!r&&(p>0||te>0)&&e.jsxDEV(xe.span,{initial:{scale:0},animate:{scale:1},className:"bg-rose-500 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-sm",children:p+te},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:574,columnNumber:25},void 0),e.jsxDEV(xe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(!m),className:`p-2.5 rounded-xl transition-all relative ${m?"bg-violet-100 text-violet-600":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`,children:[e.jsxDEV(eo,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:589,columnNumber:25},void 0),te>0&&e.jsxDEV("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-rose-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white",children:te},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:591,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:583,columnNumber:21},void 0),e.jsxDEV(xe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!h),className:`p-2.5 rounded-xl transition-all ${h?"bg-slate-50 text-slate-600 hover:bg-slate-100":"bg-rose-50 text-rose-500"}`,children:h?e.jsxDEV(et,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:603,columnNumber:42},void 0):e.jsxDEV(ot,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:603,columnNumber:63},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:597,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:571,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:508,columnNumber:13},void 0),e.jsxDEV(en,{children:r&&e.jsxDEV(xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex-1 flex flex-col min-h-0 relative z-0",children:[e.jsxDEV("div",{className:"px-4 py-2 space-y-3 bg-white/50 backdrop-blur-sm",children:[e.jsxDEV(en,{children:m&&e.jsxDEV(xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mb-2 overflow-hidden",children:e.jsxDEV("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 scrollbar-hide pt-1 pl-1",children:c.length>0?c.map(M=>{const k=v.get(M.id)||0;return e.jsxDEV(xe.button,{whileHover:{y:-2},onClick:()=>ce(M),className:"flex flex-col items-center gap-1 min-w-[60px] group",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${M.color} p-0.5 relative`,children:[e.jsxDEV("div",{className:"w-full h-full bg-white rounded-full p-0.5",children:e.jsxDEV("div",{className:`w-full h-full rounded-full bg-gradient-to-br ${M.color} flex items-center justify-center text-white text-sm font-bold shadow-inner`,children:W(M.name)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:640,columnNumber:69},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:639,columnNumber:65},void 0),e.jsxDEV("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-white rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:644,columnNumber:65},void 0),k>0&&e.jsxDEV("div",{className:"absolute -top-1 -right-1 bg-rose-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-white",children:k},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:646,columnNumber:69},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:638,columnNumber:61},void 0),e.jsxDEV("span",{className:"text-[10px] font-medium text-slate-600 truncate max-w-full group-hover:text-violet-600 transition-colors",children:M.name.split(" ")[0]},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:651,columnNumber:61},void 0)]},M.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:632,columnNumber:57},void 0)}):e.jsxDEV("div",{className:"w-full text-center py-2 text-slate-400 text-xs bg-slate-50 rounded-lg dashed border border-slate-200",children:"لا يوجد مستخدمين متصلين حالياً"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:658,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:627,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:621,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:619,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV(Ae,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-violet-500 transition-colors"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:669,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:S,onChange:M=>I(M.target.value),placeholder:"بحث في المحادثات...",className:"w-full pl-4 pr-10 py-2.5 text-sm bg-slate-50 hover:bg-slate-100 focus:bg-white border-none rounded-xl focus:ring-2 focus:ring-violet-100 transition-all outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:670,columnNumber:33},void 0),S&&e.jsxDEV("button",{onClick:()=>I(""),className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsxDEV(Go,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:682,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:678,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:668,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:617,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto px-4 py-2 custom-scrollbar",children:e.jsxDEV("div",{className:"space-y-4",children:[w?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-10 gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 border-4 border-violet-100 border-t-violet-500 rounded-full animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:693,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-slate-400 text-xs",children:"جاري تحميل الرسائل..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:694,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:692,columnNumber:37},void 0):Ce.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-[250px] text-slate-400",children:S?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:e.jsxDEV(Ae,{size:30,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:701,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:700,columnNumber:49},void 0),e.jsxDEV("p",{className:"font-bold text-slate-600",children:"لا توجد نتائج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:703,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs mt-1",children:"لم نعثر على رسائل تطابق بحثك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:704,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:699,columnNumber:45},void 0):y==="private"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(xe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-20 h-20 bg-gradient-to-br from-rose-50 to-pink-50 rounded-full flex items-center justify-center mb-4 shadow-sm",children:e.jsxDEV(zn,{size:32,className:"text-rose-200"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:713,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:708,columnNumber:49},void 0),e.jsxDEV("p",{className:"font-bold text-slate-600",children:"بداية المحادثة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:715,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs mt-1 text-center max-w-[200px]",children:["أرسل رسالة خاصة إلى ",u?.name,"، لا يمكن لأحد غيركما رؤيتها."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:716,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:707,columnNumber:45},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(xe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-20 h-20 bg-gradient-to-br from-violet-50 to-fuchsia-50 rounded-full flex items-center justify-center mb-4 shadow-sm",children:e.jsxDEV(rn,{size:32,className:"text-violet-200"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:727,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:722,columnNumber:49},void 0),e.jsxDEV("p",{className:"font-bold text-slate-600",children:"المحادثة فارغة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:729,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs mt-1",children:"ابدأ النقاش مع الفريق الآن!"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:730,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:721,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:697,columnNumber:37},void 0):e.jsxDEV("div",{className:"space-y-4 pb-4",children:Ce.map((M,k)=>{const z=M.userId===L.id,de=M.type==="system",re=M.type==="private";return de?e.jsxDEV(xe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-center my-4",children:e.jsxDEV("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100/80 px-4 py-1.5 rounded-full border border-slate-200 shadow-sm",children:M.message},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:749,columnNumber:57},void 0)},M.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:743,columnNumber:53},void 0):e.jsxDEV(xe.div,{variants:be,initial:"hidden",animate:"visible",layout:!0,className:`flex gap-3 ${z?"flex-row-reverse":""}`,onClick:()=>H&&se(M.id),children:[!z&&e.jsxDEV("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br ${M.userColor} flex items-center justify-center text-white font-bold text-[10px] shadow-sm flex-shrink-0 mt-auto`,children:W(M.userName)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:767,columnNumber:57},void 0),e.jsxDEV("div",{className:`flex flex-col ${z?"items-end":"items-start"} max-w-[75%]`,children:[!z&&e.jsxDEV("span",{className:"text-[10px] font-bold text-slate-400 mb-1 px-1",children:M.userName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:774,columnNumber:61},void 0),e.jsxDEV("div",{className:`p-3.5 relative group shadow-sm transition-all hover:shadow-md ${z?re?"bg-gradient-to-tl from-rose-500 to-pink-600 text-white rounded-2xl rounded-br-sm":"bg-gradient-to-tl from-violet-600 to-indigo-600 text-white rounded-2xl rounded-br-sm":"bg-white border border-slate-100 text-slate-700 rounded-2xl rounded-bl-sm"}`,children:[e.jsxDEV("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:M.message},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:786,columnNumber:61},void 0),e.jsxDEV("span",{className:`text-[9px] mt-1.5 block opacity-70 ${z?"text-right":"text-left"}`,children:Dt(M.timestamp)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:788,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:778,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:772,columnNumber:53},void 0)]},M.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:757,columnNumber:49},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:735,columnNumber:37},void 0),e.jsxDEV("div",{ref:oe},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:798,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:690,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:689,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-4 bg-white/80 backdrop-blur-md border-t border-slate-100",children:[e.jsxDEV(en,{children:le&&e.jsxDEV(xe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute -top-10 right-6 bg-white/90 backdrop-blur px-3 py-1.5 rounded-full shadow-lg border border-slate-100 flex items-center gap-2 text-xs text-slate-500 font-medium",children:[e.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center text-[8px] text-white",children:W(u?.name||"?")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:813,columnNumber:41},void 0),"يكتب الآن..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:807,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:805,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex items-end gap-2 bg-slate-50 p-1.5 rounded-[1.5rem] border border-slate-200 focus-within:ring-2 focus-within:ring-violet-100 focus-within:border-violet-300 transition-all shadow-inner",children:[e.jsxDEV("button",{className:"p-2.5 text-slate-400 hover:text-violet-500 hover:bg-white rounded-full transition-all",children:e.jsxDEV(nt,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:823,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:822,columnNumber:33},void 0),e.jsxDEV("input",{ref:R,type:"text",value:s,onChange:$,onKeyPress:j,placeholder:y==="private"?"اكتب رسالة خاصة...":"اكتب رسالتك...",className:"flex-1 bg-transparent border-none focus:ring-0 py-3 px-1 text-sm text-slate-700 placeholder:text-slate-400 min-h-[44px]"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:826,columnNumber:33},void 0),e.jsxDEV(xe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:K,disabled:!s.trim(),className:`p-3 rounded-full shadow-lg flex-shrink-0 transition-all ${s.trim()?y==="private"?"bg-gradient-to-r from-rose-500 to-pink-600 text-white shadow-rose-200":"bg-gradient-to-r from-violet-600 to-indigo-600 text-white shadow-violet-200":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:e.jsxDEV(lt,{size:18,className:"rotate-180 relative left-[1px]"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:848,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:836,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:821,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:803,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:610,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:608,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ChatWidget.tsx",lineNumber:498,columnNumber:9},void 0)};function yt(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return d.useMemo(()=>t=>{o.forEach(s=>s(t))},o)}const Xo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uo(n){const o=Object.prototype.toString.call(n);return o==="[object Window]"||o==="[object global]"}function Vn(n){return"nodeType"in n}function Se(n){var o,l;return n?uo(n)?n:Vn(n)&&(o=(l=n.ownerDocument)==null?void 0:l.defaultView)!=null?o:window:window}function Fn(n){const{Document:o}=Se(n);return n instanceof o}function Bo(n){return uo(n)?!1:n instanceof Se(n).HTMLElement}function gl(n){return n instanceof Se(n).SVGElement}function mo(n){return n?uo(n)?n.document:Vn(n)?Fn(n)?n:Bo(n)||gl(n)?n.ownerDocument:document:document:document}const ze=Xo?d.useLayoutEffect:d.useEffect;function Bn(n){const o=d.useRef(n);return ze(()=>{o.current=n}),d.useCallback(function(){for(var l=arguments.length,t=new Array(l),s=0;s<l;s++)t[s]=arguments[s];return o.current==null?void 0:o.current(...t)},[])}function wt(){const n=d.useRef(null),o=d.useCallback((t,s)=>{n.current=setInterval(t,s)},[]),l=d.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[o,l]}function So(n,o){o===void 0&&(o=[n]);const l=d.useRef(n);return ze(()=>{l.current!==n&&(l.current=n)},o),l}function jo(n,o){const l=d.useRef();return d.useMemo(()=>{const t=n(l.current);return l.current=t,t},[...o])}function Oo(n){const o=Bn(n),l=d.useRef(null),t=d.useCallback(s=>{s!==l.current&&o?.(s,l.current),l.current=s},[]);return[l,t]}function xn(n){const o=d.useRef();return d.useEffect(()=>{o.current=n},[n]),o.current}let on={};function Ho(n,o){return d.useMemo(()=>{if(o)return o;const l=on[n]==null?0:on[n]+1;return on[n]=l,n+"-"+l},[n,o])}function vl(n){return function(o){for(var l=arguments.length,t=new Array(l>1?l-1:0),s=1;s<l;s++)t[s-1]=arguments[s];return t.reduce((i,r)=>{const a=Object.entries(r);for(const[m,E]of a){const c=i[m];c!=null&&(i[m]=c+n*E)}return i},{...o})}}const ao=vl(1),yo=vl(-1);function Vt(n){return"clientX"in n&&"clientY"in n}function jn(n){if(!n)return!1;const{KeyboardEvent:o}=Se(n.target);return o&&n instanceof o}function Ft(n){if(!n)return!1;const{TouchEvent:o}=Se(n.target);return o&&n instanceof o}function pn(n){if(Ft(n)){if(n.touches&&n.touches.length){const{clientX:o,clientY:l}=n.touches[0];return{x:o,y:l}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:o,clientY:l}=n.changedTouches[0];return{x:o,y:l}}}return Vt(n)?{x:n.clientX,y:n.clientY}:null}const wo=Object.freeze({Translate:{toString(n){if(!n)return;const{x:o,y:l}=n;return"translate3d("+(o?Math.round(o):0)+"px, "+(l?Math.round(l):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:o,scaleY:l}=n;return"scaleX("+o+") scaleY("+l+")"}},Transform:{toString(n){if(n)return[wo.Translate.toString(n),wo.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:o,duration:l,easing:t}=n;return o+" "+l+"ms "+t}}}),Jn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Bt(n){return n.matches(Jn)?n:n.querySelector(Jn)}const jt={display:"none"};function Ht(n){let{id:o,value:l}=n;return ve.createElement("div",{id:o,style:jt},l)}function kt(n){let{id:o,announcement:l,ariaLiveType:t="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:o,style:s,role:"status","aria-live":t,"aria-atomic":!0},l)}function It(){const[n,o]=d.useState("");return{announce:d.useCallback(t=>{t!=null&&o(t)},[]),announcement:n}}const Dl=d.createContext(null);function Mt(n){const o=d.useContext(Dl);d.useEffect(()=>{if(!o)throw new Error("useDndMonitor must be used within a children of <DndContext>");return o(n)},[n,o])}function At(){const[n]=d.useState(()=>new Set),o=d.useCallback(t=>(n.add(t),()=>n.delete(t)),[n]);return[d.useCallback(t=>{let{type:s,event:i}=t;n.forEach(r=>{var a;return(a=r[s])==null?void 0:a.call(r,i)})},[n]),o]}const Tt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Lt={onDragStart(n){let{active:o}=n;return"Picked up draggable item "+o.id+"."},onDragOver(n){let{active:o,over:l}=n;return l?"Draggable item "+o.id+" was moved over droppable area "+l.id+".":"Draggable item "+o.id+" is no longer over a droppable area."},onDragEnd(n){let{active:o,over:l}=n;return l?"Draggable item "+o.id+" was dropped over droppable area "+l.id:"Draggable item "+o.id+" was dropped."},onDragCancel(n){let{active:o}=n;return"Dragging was cancelled. Draggable item "+o.id+" was dropped."}};function $t(n){let{announcements:o=Lt,container:l,hiddenTextDescribedById:t,screenReaderInstructions:s=Tt}=n;const{announce:i,announcement:r}=It(),a=Ho("DndLiveRegion"),[m,E]=d.useState(!1);if(d.useEffect(()=>{E(!0)},[]),Mt(d.useMemo(()=>({onDragStart(N){let{active:h}=N;i(o.onDragStart({active:h}))},onDragMove(N){let{active:h,over:b}=N;o.onDragMove&&i(o.onDragMove({active:h,over:b}))},onDragOver(N){let{active:h,over:b}=N;i(o.onDragOver({active:h,over:b}))},onDragEnd(N){let{active:h,over:b}=N;i(o.onDragEnd({active:h,over:b}))},onDragCancel(N){let{active:h,over:b}=N;i(o.onDragCancel({active:h,over:b}))}}),[i,o])),!m)return null;const c=ve.createElement(ve.Fragment,null,ve.createElement(Ht,{id:t,value:s.draggable}),ve.createElement(kt,{id:a,announcement:r}));return l?po.createPortal(c,l):c}var fe;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(fe||(fe={}));function Qo(){}function Yn(n,o){return d.useMemo(()=>({sensor:n,options:o??{}}),[n,o])}function zt(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return d.useMemo(()=>[...o].filter(t=>t!=null),[...o])}const Te=Object.freeze({x:0,y:0});function Sl(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))}function yl(n,o){let{data:{value:l}}=n,{data:{value:t}}=o;return l-t}function Ot(n,o){let{data:{value:l}}=n,{data:{value:t}}=o;return t-l}function Zn(n){let{left:o,top:l,height:t,width:s}=n;return[{x:o,y:l},{x:o+s,y:l},{x:o,y:l+t},{x:o+s,y:l+t}]}function wl(n,o){if(!n||n.length===0)return null;const[l]=n;return l[o]}function el(n,o,l){return o===void 0&&(o=n.left),l===void 0&&(l=n.top),{x:o+n.width*.5,y:l+n.height*.5}}const Qt=n=>{let{collisionRect:o,droppableRects:l,droppableContainers:t}=n;const s=el(o,o.left,o.top),i=[];for(const r of t){const{id:a}=r,m=l.get(a);if(m){const E=Sl(el(m),s);i.push({id:a,data:{droppableContainer:r,value:E}})}}return i.sort(yl)},Wt=n=>{let{collisionRect:o,droppableRects:l,droppableContainers:t}=n;const s=Zn(o),i=[];for(const r of t){const{id:a}=r,m=l.get(a);if(m){const E=Zn(m),c=s.reduce((h,b,p)=>h+Sl(E[p],b),0),N=Number((c/4).toFixed(4));i.push({id:a,data:{droppableContainer:r,value:N}})}}return i.sort(yl)};function _t(n,o){const l=Math.max(o.top,n.top),t=Math.max(o.left,n.left),s=Math.min(o.left+o.width,n.left+n.width),i=Math.min(o.top+o.height,n.top+n.height),r=s-t,a=i-l;if(t<s&&l<i){const m=o.width*o.height,E=n.width*n.height,c=r*a,N=c/(m+E-c);return Number(N.toFixed(4))}return 0}const Gt=n=>{let{collisionRect:o,droppableRects:l,droppableContainers:t}=n;const s=[];for(const i of t){const{id:r}=i,a=l.get(r);if(a){const m=_t(a,o);m>0&&s.push({id:r,data:{droppableContainer:i,value:m}})}}return s.sort(Ot)};function Ut(n,o,l){return{...n,scaleX:o&&l?o.width/l.width:1,scaleY:o&&l?o.height/l.height:1}}function Vl(n,o){return n&&o?{x:n.left-o.left,y:n.top-o.top}:Te}function qt(n){return function(l){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return s.reduce((r,a)=>({...r,top:r.top+n*a.y,bottom:r.bottom+n*a.y,left:r.left+n*a.x,right:r.right+n*a.x}),{...l})}}const Xt=qt(1);function Kt(n){if(n.startsWith("matrix3d(")){const o=n.slice(9,-1).split(/, /);return{x:+o[12],y:+o[13],scaleX:+o[0],scaleY:+o[5]}}else if(n.startsWith("matrix(")){const o=n.slice(7,-1).split(/, /);return{x:+o[4],y:+o[5],scaleX:+o[0],scaleY:+o[3]}}return null}function Jt(n,o,l){const t=Kt(o);if(!t)return n;const{scaleX:s,scaleY:i,x:r,y:a}=t,m=n.left-r-(1-s)*parseFloat(l),E=n.top-a-(1-i)*parseFloat(l.slice(l.indexOf(" ")+1)),c=s?n.width/s:n.width,N=i?n.height/i:n.height;return{width:c,height:N,top:E,right:m+c,bottom:E+N,left:m}}const Yt={ignoreTransform:!1};function co(n,o){o===void 0&&(o=Yt);let l=n.getBoundingClientRect();if(o.ignoreTransform){const{transform:E,transformOrigin:c}=Se(n).getComputedStyle(n);E&&(l=Jt(l,E,c))}const{top:t,left:s,width:i,height:r,bottom:a,right:m}=l;return{top:t,left:s,width:i,height:r,bottom:a,right:m}}function ol(n){return co(n,{ignoreTransform:!0})}function Zt(n){const o=n.innerWidth,l=n.innerHeight;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}function ei(n,o){return o===void 0&&(o=Se(n).getComputedStyle(n)),o.position==="fixed"}function oi(n,o){o===void 0&&(o=Se(n).getComputedStyle(n));const l=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=o[s];return typeof i=="string"?l.test(i):!1})}function Ko(n,o){const l=[];function t(s){if(o!=null&&l.length>=o||!s)return l;if(Fn(s)&&s.scrollingElement!=null&&!l.includes(s.scrollingElement))return l.push(s.scrollingElement),l;if(!Bo(s)||gl(s)||l.includes(s))return l;const i=Se(n).getComputedStyle(s);return s!==n&&oi(s,i)&&l.push(s),ei(s,i)?l:t(s.parentNode)}return n?t(n):l}function Fl(n){const[o]=Ko(n,1);return o??null}function nn(n){return!Xo||!n?null:uo(n)?n:Vn(n)?Fn(n)||n===mo(n).scrollingElement?window:Bo(n)?n:null:null}function Bl(n){return uo(n)?n.scrollX:n.scrollLeft}function jl(n){return uo(n)?n.scrollY:n.scrollTop}function Cn(n){return{x:Bl(n),y:jl(n)}}var Ee;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Ee||(Ee={}));function Hl(n){return!Xo||!n?!1:n===document.scrollingElement}function kl(n){const o={x:0,y:0},l=Hl(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},t={x:n.scrollWidth-l.width,y:n.scrollHeight-l.height},s=n.scrollTop<=o.y,i=n.scrollLeft<=o.x,r=n.scrollTop>=t.y,a=n.scrollLeft>=t.x;return{isTop:s,isLeft:i,isBottom:r,isRight:a,maxScroll:t,minScroll:o}}const ni={x:.2,y:.2};function li(n,o,l,t,s){let{top:i,left:r,right:a,bottom:m}=l;t===void 0&&(t=10),s===void 0&&(s=ni);const{isTop:E,isBottom:c,isLeft:N,isRight:h}=kl(n),b={x:0,y:0},p={x:0,y:0},x={height:o.height*s.y,width:o.width*s.x};return!E&&i<=o.top+x.height?(b.y=Ee.Backward,p.y=t*Math.abs((o.top+x.height-i)/x.height)):!c&&m>=o.bottom-x.height&&(b.y=Ee.Forward,p.y=t*Math.abs((o.bottom-x.height-m)/x.height)),!h&&a>=o.right-x.width?(b.x=Ee.Forward,p.x=t*Math.abs((o.right-x.width-a)/x.width)):!N&&r<=o.left+x.width&&(b.x=Ee.Backward,p.x=t*Math.abs((o.left+x.width-r)/x.width)),{direction:b,speed:p}}function ti(n){if(n===document.scrollingElement){const{innerWidth:i,innerHeight:r}=window;return{top:0,left:0,right:i,bottom:r,width:i,height:r}}const{top:o,left:l,right:t,bottom:s}=n.getBoundingClientRect();return{top:o,left:l,right:t,bottom:s,width:n.clientWidth,height:n.clientHeight}}function Il(n){return n.reduce((o,l)=>ao(o,Cn(l)),Te)}function ii(n){return n.reduce((o,l)=>o+Bl(l),0)}function si(n){return n.reduce((o,l)=>o+jl(l),0)}function di(n,o){if(o===void 0&&(o=co),!n)return;const{top:l,left:t,bottom:s,right:i}=o(n);Fl(n)&&(s<=0||i<=0||l>=window.innerHeight||t>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const ai=[["x",["left","right"],ii],["y",["top","bottom"],si]];class Hn{constructor(o,l){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const t=Ko(l),s=Il(t);this.rect={...o},this.width=o.width,this.height=o.height;for(const[i,r,a]of ai)for(const m of r)Object.defineProperty(this,m,{get:()=>{const E=a(t),c=s[i]-E;return this.rect[m]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Po{constructor(o){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(l=>{var t;return(t=this.target)==null?void 0:t.removeEventListener(...l)})},this.target=o}add(o,l,t){var s;(s=this.target)==null||s.addEventListener(o,l,t),this.listeners.push([o,l,t])}}function ri(n){const{EventTarget:o}=Se(n);return n instanceof o?n:mo(n)}function ln(n,o){const l=Math.abs(n.x),t=Math.abs(n.y);return typeof o=="number"?Math.sqrt(l**2+t**2)>o:"x"in o&&"y"in o?l>o.x&&t>o.y:"x"in o?l>o.x:"y"in o?t>o.y:!1}var Ie;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Ie||(Ie={}));function nl(n){n.preventDefault()}function ui(n){n.stopPropagation()}var J;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(J||(J={}));const Ml={start:[J.Space,J.Enter],cancel:[J.Esc],end:[J.Space,J.Enter,J.Tab]},mi=(n,o)=>{let{currentCoordinates:l}=o;switch(n.code){case J.Right:return{...l,x:l.x+25};case J.Left:return{...l,x:l.x-25};case J.Down:return{...l,y:l.y+25};case J.Up:return{...l,y:l.y-25}}};class kn{constructor(o){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=o;const{event:{target:l}}=o;this.props=o,this.listeners=new Po(mo(l)),this.windowListeners=new Po(Se(l)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ie.Resize,this.handleCancel),this.windowListeners.add(Ie.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ie.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:o,onStart:l}=this.props,t=o.node.current;t&&di(t),l(Te)}handleKeyDown(o){if(jn(o)){const{active:l,context:t,options:s}=this.props,{keyboardCodes:i=Ml,coordinateGetter:r=mi,scrollBehavior:a="smooth"}=s,{code:m}=o;if(i.end.includes(m)){this.handleEnd(o);return}if(i.cancel.includes(m)){this.handleCancel(o);return}const{collisionRect:E}=t.current,c=E?{x:E.left,y:E.top}:Te;this.referenceCoordinates||(this.referenceCoordinates=c);const N=r(o,{active:l,context:t.current,currentCoordinates:c});if(N){const h=yo(N,c),b={x:0,y:0},{scrollableAncestors:p}=t.current;for(const x of p){const w=o.code,{isTop:P,isRight:y,isLeft:D,isBottom:u,maxScroll:f,minScroll:v}=kl(x),C=ti(x),F={x:Math.min(w===J.Right?C.right-C.width/2:C.right,Math.max(w===J.Right?C.left:C.left+C.width/2,N.x)),y:Math.min(w===J.Down?C.bottom-C.height/2:C.bottom,Math.max(w===J.Down?C.top:C.top+C.height/2,N.y))},V=w===J.Right&&!y||w===J.Left&&!D,S=w===J.Down&&!u||w===J.Up&&!P;if(V&&F.x!==N.x){const I=x.scrollLeft+h.x,H=w===J.Right&&I<=f.x||w===J.Left&&I>=v.x;if(H&&!h.y){x.scrollTo({left:I,behavior:a});return}H?b.x=x.scrollLeft-I:b.x=w===J.Right?x.scrollLeft-f.x:x.scrollLeft-v.x,b.x&&x.scrollBy({left:-b.x,behavior:a});break}else if(S&&F.y!==N.y){const I=x.scrollTop+h.y,H=w===J.Down&&I<=f.y||w===J.Up&&I>=v.y;if(H&&!h.x){x.scrollTo({top:I,behavior:a});return}H?b.y=x.scrollTop-I:b.y=w===J.Down?x.scrollTop-f.y:x.scrollTop-v.y,b.y&&x.scrollBy({top:-b.y,behavior:a});break}}this.handleMove(o,ao(yo(N,this.referenceCoordinates),b))}}}handleMove(o,l){const{onMove:t}=this.props;o.preventDefault(),t(l)}handleEnd(o){const{onEnd:l}=this.props;o.preventDefault(),this.detach(),l()}handleCancel(o){const{onCancel:l}=this.props;o.preventDefault(),this.detach(),l()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}kn.activators=[{eventName:"onKeyDown",handler:(n,o,l)=>{let{keyboardCodes:t=Ml,onActivation:s}=o,{active:i}=l;const{code:r}=n.nativeEvent;if(t.start.includes(r)){const a=i.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),s?.({event:n.nativeEvent}),!0)}return!1}}];function ll(n){return!!(n&&"distance"in n)}function tl(n){return!!(n&&"delay"in n)}class In{constructor(o,l,t){var s;t===void 0&&(t=ri(o.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=o,this.events=l;const{event:i}=o,{target:r}=i;this.props=o,this.events=l,this.document=mo(r),this.documentListeners=new Po(this.document),this.listeners=new Po(t),this.windowListeners=new Po(Se(r)),this.initialCoordinates=(s=pn(i))!=null?s:Te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:o,props:{options:{activationConstraint:l,bypassActivationConstraint:t}}}=this;if(this.listeners.add(o.move.name,this.handleMove,{passive:!1}),this.listeners.add(o.end.name,this.handleEnd),o.cancel&&this.listeners.add(o.cancel.name,this.handleCancel),this.windowListeners.add(Ie.Resize,this.handleCancel),this.windowListeners.add(Ie.DragStart,nl),this.windowListeners.add(Ie.VisibilityChange,this.handleCancel),this.windowListeners.add(Ie.ContextMenu,nl),this.documentListeners.add(Ie.Keydown,this.handleKeydown),l){if(t!=null&&t({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tl(l)){this.timeoutId=setTimeout(this.handleStart,l.delay),this.handlePending(l);return}if(ll(l)){this.handlePending(l);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(o,l){const{active:t,onPending:s}=this.props;s(t,o,this.initialCoordinates,l)}handleStart(){const{initialCoordinates:o}=this,{onStart:l}=this.props;o&&(this.activated=!0,this.documentListeners.add(Ie.Click,ui,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ie.SelectionChange,this.removeTextSelection),l(o))}handleMove(o){var l;const{activated:t,initialCoordinates:s,props:i}=this,{onMove:r,options:{activationConstraint:a}}=i;if(!s)return;const m=(l=pn(o))!=null?l:Te,E=yo(s,m);if(!t&&a){if(ll(a)){if(a.tolerance!=null&&ln(E,a.tolerance))return this.handleCancel();if(ln(E,a.distance))return this.handleStart()}if(tl(a)&&ln(E,a.tolerance))return this.handleCancel();this.handlePending(a,E);return}o.cancelable&&o.preventDefault(),r(m)}handleEnd(){const{onAbort:o,onEnd:l}=this.props;this.detach(),this.activated||o(this.props.active),l()}handleCancel(){const{onAbort:o,onCancel:l}=this.props;this.detach(),this.activated||o(this.props.active),l()}handleKeydown(o){o.code===J.Esc&&this.handleCancel()}removeTextSelection(){var o;(o=this.document.getSelection())==null||o.removeAllRanges()}}const ci={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mn extends In{constructor(o){const{event:l}=o,t=mo(l.target);super(o,ci,t)}}Mn.activators=[{eventName:"onPointerDown",handler:(n,o)=>{let{nativeEvent:l}=n,{onActivation:t}=o;return!l.isPrimary||l.button!==0?!1:(t?.({event:l}),!0)}}];const bi={move:{name:"mousemove"},end:{name:"mouseup"}};var Rn;(function(n){n[n.RightClick=2]="RightClick"})(Rn||(Rn={}));class fi extends In{constructor(o){super(o,bi,mo(o.event.target))}}fi.activators=[{eventName:"onMouseDown",handler:(n,o)=>{let{nativeEvent:l}=n,{onActivation:t}=o;return l.button===Rn.RightClick?!1:(t?.({event:l}),!0)}}];const tn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ei extends In{constructor(o){super(o,tn)}static setup(){return window.addEventListener(tn.move.name,o,{capture:!1,passive:!1}),function(){window.removeEventListener(tn.move.name,o)};function o(){}}}Ei.activators=[{eventName:"onTouchStart",handler:(n,o)=>{let{nativeEvent:l}=n,{onActivation:t}=o;const{touches:s}=l;return s.length>1?!1:(t?.({event:l}),!0)}}];var ho;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(ho||(ho={}));var Wo;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wo||(Wo={}));function Ni(n){let{acceleration:o,activator:l=ho.Pointer,canScroll:t,draggingRect:s,enabled:i,interval:r=5,order:a=Wo.TreeOrder,pointerCoordinates:m,scrollableAncestors:E,scrollableAncestorRects:c,delta:N,threshold:h}=n;const b=pi({delta:N,disabled:!i}),[p,x]=wt(),w=d.useRef({x:0,y:0}),P=d.useRef({x:0,y:0}),y=d.useMemo(()=>{switch(l){case ho.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case ho.DraggableRect:return s}},[l,s,m]),D=d.useRef(null),u=d.useCallback(()=>{const v=D.current;if(!v)return;const C=w.current.x*P.current.x,F=w.current.y*P.current.y;v.scrollBy(C,F)},[]),f=d.useMemo(()=>a===Wo.TreeOrder?[...E].reverse():E,[a,E]);d.useEffect(()=>{if(!i||!E.length||!y){x();return}for(const v of f){if(t?.(v)===!1)continue;const C=E.indexOf(v),F=c[C];if(!F)continue;const{direction:V,speed:S}=li(v,F,y,o,h);for(const I of["x","y"])b[I][V[I]]||(S[I]=0,V[I]=0);if(S.x>0||S.y>0){x(),D.current=v,p(u,r),w.current=S,P.current=V;return}}w.current={x:0,y:0},P.current={x:0,y:0},x()},[o,u,t,x,i,r,JSON.stringify(y),JSON.stringify(b),p,E,f,c,JSON.stringify(h)])}const xi={x:{[Ee.Backward]:!1,[Ee.Forward]:!1},y:{[Ee.Backward]:!1,[Ee.Forward]:!1}};function pi(n){let{delta:o,disabled:l}=n;const t=xn(o);return jo(s=>{if(l||!t||!s)return xi;const i={x:Math.sign(o.x-t.x),y:Math.sign(o.y-t.y)};return{x:{[Ee.Backward]:s.x[Ee.Backward]||i.x===-1,[Ee.Forward]:s.x[Ee.Forward]||i.x===1},y:{[Ee.Backward]:s.y[Ee.Backward]||i.y===-1,[Ee.Forward]:s.y[Ee.Forward]||i.y===1}}},[l,o,t])}function Ci(n,o){const l=o!=null?n.get(o):void 0,t=l?l.node.current:null;return jo(s=>{var i;return o==null?null:(i=t??s)!=null?i:null},[t,o])}function Ri(n,o){return d.useMemo(()=>n.reduce((l,t)=>{const{sensor:s}=t,i=s.activators.map(r=>({eventName:r.eventName,handler:o(r.handler,t)}));return[...l,...i]},[]),[n,o])}var Vo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Vo||(Vo={}));var Pn;(function(n){n.Optimized="optimized"})(Pn||(Pn={}));const il=new Map;function Pi(n,o){let{dragging:l,dependencies:t,config:s}=o;const[i,r]=d.useState(null),{frequency:a,measure:m,strategy:E}=s,c=d.useRef(n),N=w(),h=So(N),b=d.useCallback(function(P){P===void 0&&(P=[]),!h.current&&r(y=>y===null?P:y.concat(P.filter(D=>!y.includes(D))))},[h]),p=d.useRef(null),x=jo(P=>{if(N&&!l)return il;if(!P||P===il||c.current!==n||i!=null){const y=new Map;for(let D of n){if(!D)continue;if(i&&i.length>0&&!i.includes(D.id)&&D.rect.current){y.set(D.id,D.rect.current);continue}const u=D.node.current,f=u?new Hn(m(u),u):null;D.rect.current=f,f&&y.set(D.id,f)}return y}return P},[n,i,l,N,m]);return d.useEffect(()=>{c.current=n},[n]),d.useEffect(()=>{N||b()},[l,N]),d.useEffect(()=>{i&&i.length>0&&r(null)},[JSON.stringify(i)]),d.useEffect(()=>{N||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{b(),p.current=null},a))},[a,N,b,...t]),{droppableRects:x,measureDroppableContainers:b,measuringScheduled:i!=null};function w(){switch(E){case Vo.Always:return!1;case Vo.BeforeDragging:return l;default:return!l}}}function Al(n,o){return jo(l=>n?l||(typeof o=="function"?o(n):n):null,[o,n])}function hi(n,o){return Al(n,o)}function gi(n){let{callback:o,disabled:l}=n;const t=Bn(o),s=d.useMemo(()=>{if(l||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(t)},[t,l]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function Jo(n){let{callback:o,disabled:l}=n;const t=Bn(o),s=d.useMemo(()=>{if(l||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(t)},[l]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function vi(n){return new Hn(co(n),n)}function sl(n,o,l){o===void 0&&(o=vi);const[t,s]=d.useState(null);function i(){s(m=>{if(!n)return null;if(n.isConnected===!1){var E;return(E=m??l)!=null?E:null}const c=o(n);return JSON.stringify(m)===JSON.stringify(c)?m:c})}const r=gi({callback(m){if(n)for(const E of m){const{type:c,target:N}=E;if(c==="childList"&&N instanceof HTMLElement&&N.contains(n)){i();break}}}}),a=Jo({callback:i});return ze(()=>{i(),n?(a?.observe(n),r?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),r?.disconnect())},[n]),t}function Di(n){const o=Al(n);return Vl(n,o)}const dl=[];function Si(n){const o=d.useRef(n),l=jo(t=>n?t&&t!==dl&&n&&o.current&&n.parentNode===o.current.parentNode?t:Ko(n):dl,[n]);return d.useEffect(()=>{o.current=n},[n]),l}function yi(n){const[o,l]=d.useState(null),t=d.useRef(n),s=d.useCallback(i=>{const r=nn(i.target);r&&l(a=>a?(a.set(r,Cn(r)),new Map(a)):null)},[]);return d.useEffect(()=>{const i=t.current;if(n!==i){r(i);const a=n.map(m=>{const E=nn(m);return E?(E.addEventListener("scroll",s,{passive:!0}),[E,Cn(E)]):null}).filter(m=>m!=null);l(a.length?new Map(a):null),t.current=n}return()=>{r(n),r(i)};function r(a){a.forEach(m=>{const E=nn(m);E?.removeEventListener("scroll",s)})}},[s,n]),d.useMemo(()=>n.length?o?Array.from(o.values()).reduce((i,r)=>ao(i,r),Te):Il(n):Te,[n,o])}function al(n,o){o===void 0&&(o=[]);const l=d.useRef(null);return d.useEffect(()=>{l.current=null},o),d.useEffect(()=>{const t=n!==Te;t&&!l.current&&(l.current=n),!t&&l.current&&(l.current=null)},[n]),l.current?yo(n,l.current):Te}function wi(n){d.useEffect(()=>{if(!Xo)return;const o=n.map(l=>{let{sensor:t}=l;return t.setup==null?void 0:t.setup()});return()=>{for(const l of o)l?.()}},n.map(o=>{let{sensor:l}=o;return l}))}function Vi(n,o){return d.useMemo(()=>n.reduce((l,t)=>{let{eventName:s,handler:i}=t;return l[s]=r=>{i(r,o)},l},{}),[n,o])}function Tl(n){return d.useMemo(()=>n?Zt(n):null,[n])}const rl=[];function Fi(n,o){o===void 0&&(o=co);const[l]=n,t=Tl(l?Se(l):null),[s,i]=d.useState(rl);function r(){i(()=>n.length?n.map(m=>Hl(m)?t:new Hn(o(m),m)):rl)}const a=Jo({callback:r});return ze(()=>{a?.disconnect(),r(),n.forEach(m=>a?.observe(m))},[n]),s}function Bi(n){if(!n)return null;if(n.children.length>1)return n;const o=n.children[0];return Bo(o)?o:n}function ji(n){let{measure:o}=n;const[l,t]=d.useState(null),s=d.useCallback(E=>{for(const{target:c}of E)if(Bo(c)){t(N=>{const h=o(c);return N?{...N,width:h.width,height:h.height}:h});break}},[o]),i=Jo({callback:s}),r=d.useCallback(E=>{const c=Bi(E);i?.disconnect(),c&&i?.observe(c),t(c?o(c):null)},[o,i]),[a,m]=Oo(r);return d.useMemo(()=>({nodeRef:a,rect:l,setRef:m}),[l,a,m])}const Hi=[{sensor:Mn,options:{}},{sensor:kn,options:{}}],ki={current:{}},$o={draggable:{measure:ol},droppable:{measure:ol,strategy:Vo.WhileDragging,frequency:Pn.Optimized},dragOverlay:{measure:co}};class go extends Map{get(o){var l;return o!=null&&(l=super.get(o))!=null?l:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(o=>{let{disabled:l}=o;return!l})}getNodeFor(o){var l,t;return(l=(t=this.get(o))==null?void 0:t.node.current)!=null?l:void 0}}const Ii={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new go,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$o,measureDroppableContainers:Qo,windowRect:null,measuringScheduled:!1},Mi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qo,draggableNodes:new Map,over:null,measureDroppableContainers:Qo},Yo=d.createContext(Mi),Ll=d.createContext(Ii);function Ai(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new go}}}function Ti(n,o){switch(o.type){case fe.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:o.initialCoordinates,active:o.active}};case fe.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:o.coordinates.x-n.draggable.initialCoordinates.x,y:o.coordinates.y-n.draggable.initialCoordinates.y}}};case fe.DragEnd:case fe.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fe.RegisterDroppable:{const{element:l}=o,{id:t}=l,s=new go(n.droppable.containers);return s.set(t,l),{...n,droppable:{...n.droppable,containers:s}}}case fe.SetDroppableDisabled:{const{id:l,key:t,disabled:s}=o,i=n.droppable.containers.get(l);if(!i||t!==i.key)return n;const r=new go(n.droppable.containers);return r.set(l,{...i,disabled:s}),{...n,droppable:{...n.droppable,containers:r}}}case fe.UnregisterDroppable:{const{id:l,key:t}=o,s=n.droppable.containers.get(l);if(!s||t!==s.key)return n;const i=new go(n.droppable.containers);return i.delete(l),{...n,droppable:{...n.droppable,containers:i}}}default:return n}}function Li(n){let{disabled:o}=n;const{active:l,activatorEvent:t,draggableNodes:s}=d.useContext(Yo),i=xn(t),r=xn(l?.id);return d.useEffect(()=>{if(!o&&!t&&i&&r!=null){if(!jn(i)||document.activeElement===i.target)return;const a=s.get(r);if(!a)return;const{activatorNode:m,node:E}=a;if(!m.current&&!E.current)return;requestAnimationFrame(()=>{for(const c of[m.current,E.current]){if(!c)continue;const N=Bt(c);if(N){N.focus();break}}})}},[t,o,s,r,i]),null}function $i(n,o){let{transform:l,...t}=o;return n!=null&&n.length?n.reduce((s,i)=>i({transform:s,...t}),l):l}function zi(n){return d.useMemo(()=>({draggable:{...$o.draggable,...n?.draggable},droppable:{...$o.droppable,...n?.droppable},dragOverlay:{...$o.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function Oi(n){let{activeNode:o,measure:l,initialRect:t,config:s=!0}=n;const i=d.useRef(!1),{x:r,y:a}=typeof s=="boolean"?{x:s,y:s}:s;ze(()=>{if(!r&&!a||!o){i.current=!1;return}if(i.current||!t)return;const E=o?.node.current;if(!E||E.isConnected===!1)return;const c=l(E),N=Vl(c,t);if(r||(N.x=0),a||(N.y=0),i.current=!0,Math.abs(N.x)>0||Math.abs(N.y)>0){const h=Fl(E);h&&h.scrollBy({top:N.y,left:N.x})}},[o,r,a,t,l])}const $l=d.createContext({...Te,scaleX:1,scaleY:1});var qe;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(qe||(qe={}));const Qi=d.memo(function(o){var l,t,s,i;let{id:r,accessibility:a,autoScroll:m=!0,children:E,sensors:c=Hi,collisionDetection:N=Gt,measuring:h,modifiers:b,...p}=o;const x=d.useReducer(Ti,void 0,Ai),[w,P]=x,[y,D]=At(),[u,f]=d.useState(qe.Uninitialized),v=u===qe.Initialized,{draggable:{active:C,nodes:F,translate:V},droppable:{containers:S}}=w,I=C!=null?F.get(C):null,H=d.useRef({initial:null,translated:null}),O=d.useMemo(()=>{var Re;return C!=null?{id:C,data:(Re=I?.data)!=null?Re:ki,rect:H}:null},[C,I]),Q=d.useRef(null),[G,oe]=d.useState(null),[R,B]=d.useState(null),L=So(p,Object.values(p)),Z=Ho("DndDescribedBy",r),U=d.useMemo(()=>S.getEnabled(),[S]),A=zi(h),{droppableRects:$,measureDroppableContainers:K,measuringScheduled:j}=Pi(U,{dragging:v,dependencies:[V.x,V.y],config:A.droppable}),W=Ci(F,C),ce=d.useMemo(()=>R?pn(R):null,[R]),ie=Xl(),te=hi(W,A.draggable.measure);Oi({activeNode:C!=null?F.get(C):null,config:ie.layoutShiftCompensation,initialRect:te,measure:A.draggable.measure});const _=sl(W,A.draggable.measure,te),Ce=sl(W?W.parentElement:null),le=d.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),se=S.getNodeFor((l=le.current.over)==null?void 0:l.id),ee=ji({measure:A.dragOverlay.measure}),be=(t=ee.nodeRef.current)!=null?t:W,M=v?(s=ee.rect)!=null?s:_:null,k=!!(ee.nodeRef.current&&ee.rect),z=Di(k?null:_),de=Tl(be?Se(be):null),re=Si(v?se??W:null),X=Fi(re),ae=$i(b,{transform:{x:V.x-z.x,y:V.y-z.y,scaleX:1,scaleY:1},activatorEvent:R,active:O,activeNodeRect:_,containerNodeRect:Ce,draggingNodeRect:M,over:le.current.over,overlayNodeRect:ee.rect,scrollableAncestors:re,scrollableAncestorRects:X,windowRect:de}),me=ce?ao(ce,V):null,je=yi(re),lo=al(je),g=al(je,[_]),T=ao(ae,lo),ne=M?Xt(M,ae):null,Y=O&&ne?N({active:O,collisionRect:ne,droppableRects:$,droppableContainers:U,pointerCoordinates:me}):null,ye=wl(Y,"id"),[Pe,he]=d.useState(null),to=k?ae:ao(ae,g),ko=Ut(to,(i=Pe?.rect)!=null?i:null,_),Ye=d.useRef(null),Tn=d.useCallback((Re,we)=>{let{sensor:Ve,options:We}=we;if(Q.current==null)return;const He=F.get(Q.current);if(!He)return;const Fe=Re.nativeEvent,Le=new Ve({active:Q.current,activeNode:He,event:Fe,options:We,context:le,onAbort(Ne){if(!F.get(Ne))return;const{onDragAbort:$e}=L.current,Oe={id:Ne};$e?.(Oe),y({type:"onDragAbort",event:Oe})},onPending(Ne,_e,$e,Oe){if(!F.get(Ne))return;const{onDragPending:fo}=L.current,Ge={id:Ne,constraint:_e,initialCoordinates:$e,offset:Oe};fo?.(Ge),y({type:"onDragPending",event:Ge})},onStart(Ne){const _e=Q.current;if(_e==null)return;const $e=F.get(_e);if(!$e)return;const{onDragStart:Oe}=L.current,bo={activatorEvent:Fe,active:{id:_e,data:$e.data,rect:H}};po.unstable_batchedUpdates(()=>{Oe?.(bo),f(qe.Initializing),P({type:fe.DragStart,initialCoordinates:Ne,active:_e}),y({type:"onDragStart",event:bo}),oe(Ye.current),B(Fe)})},onMove(Ne){P({type:fe.DragMove,coordinates:Ne})},onEnd:io(fe.DragEnd),onCancel:io(fe.DragCancel)});Ye.current=Le;function io(Ne){return async function(){const{active:$e,collisions:Oe,over:bo,scrollAdjustedTranslate:fo}=le.current;let Ge=null;if($e&&fo){const{cancelDrop:Eo}=L.current;Ge={activatorEvent:Fe,active:$e,collisions:Oe,delta:fo,over:bo},Ne===fe.DragEnd&&typeof Eo=="function"&&await Promise.resolve(Eo(Ge))&&(Ne=fe.DragCancel)}Q.current=null,po.unstable_batchedUpdates(()=>{P({type:Ne}),f(qe.Uninitialized),he(null),oe(null),B(null),Ye.current=null;const Eo=Ne===fe.DragEnd?"onDragEnd":"onDragCancel";if(Ge){const Zo=L.current[Eo];Zo?.(Ge),y({type:Eo,event:Ge})}})}}},[F]),Gl=d.useCallback((Re,we)=>(Ve,We)=>{const He=Ve.nativeEvent,Fe=F.get(We);if(Q.current!==null||!Fe||He.dndKit||He.defaultPrevented)return;const Le={active:Fe};Re(Ve,we.options,Le)===!0&&(He.dndKit={capturedBy:we.sensor},Q.current=We,Tn(Ve,we))},[F,Tn]),Ln=Ri(c,Gl);wi(c),ze(()=>{_&&u===qe.Initializing&&f(qe.Initialized)},[_,u]),d.useEffect(()=>{const{onDragMove:Re}=L.current,{active:we,activatorEvent:Ve,collisions:We,over:He}=le.current;if(!we||!Ve)return;const Fe={active:we,activatorEvent:Ve,collisions:We,delta:{x:T.x,y:T.y},over:He};po.unstable_batchedUpdates(()=>{Re?.(Fe),y({type:"onDragMove",event:Fe})})},[T.x,T.y]),d.useEffect(()=>{const{active:Re,activatorEvent:we,collisions:Ve,droppableContainers:We,scrollAdjustedTranslate:He}=le.current;if(!Re||Q.current==null||!we||!He)return;const{onDragOver:Fe}=L.current,Le=We.get(ye),io=Le&&Le.rect.current?{id:Le.id,rect:Le.rect.current,data:Le.data,disabled:Le.disabled}:null,Ne={active:Re,activatorEvent:we,collisions:Ve,delta:{x:He.x,y:He.y},over:io};po.unstable_batchedUpdates(()=>{he(io),Fe?.(Ne),y({type:"onDragOver",event:Ne})})},[ye]),ze(()=>{le.current={activatorEvent:R,active:O,activeNode:W,collisionRect:ne,collisions:Y,droppableRects:$,draggableNodes:F,draggingNode:be,draggingNodeRect:M,droppableContainers:S,over:Pe,scrollableAncestors:re,scrollAdjustedTranslate:T},H.current={initial:M,translated:ne}},[O,W,Y,ne,F,be,M,$,S,Pe,re,T]),Ni({...ie,delta:V,draggingRect:ne,pointerCoordinates:me,scrollableAncestors:re,scrollableAncestorRects:X});const Ul=d.useMemo(()=>({active:O,activeNode:W,activeNodeRect:_,activatorEvent:R,collisions:Y,containerNodeRect:Ce,dragOverlay:ee,draggableNodes:F,droppableContainers:S,droppableRects:$,over:Pe,measureDroppableContainers:K,scrollableAncestors:re,scrollableAncestorRects:X,measuringConfiguration:A,measuringScheduled:j,windowRect:de}),[O,W,_,R,Y,Ce,ee,F,S,$,Pe,K,re,X,A,j,de]),ql=d.useMemo(()=>({activatorEvent:R,activators:Ln,active:O,activeNodeRect:_,ariaDescribedById:{draggable:Z},dispatch:P,draggableNodes:F,over:Pe,measureDroppableContainers:K}),[R,Ln,O,_,P,Z,F,Pe,K]);return ve.createElement(Dl.Provider,{value:D},ve.createElement(Yo.Provider,{value:ql},ve.createElement(Ll.Provider,{value:Ul},ve.createElement($l.Provider,{value:ko},E)),ve.createElement(Li,{disabled:a?.restoreFocus===!1})),ve.createElement($t,{...a,hiddenTextDescribedById:Z}));function Xl(){const Re=G?.autoScrollEnabled===!1,we=typeof m=="object"?m.enabled===!1:m===!1,Ve=v&&!Re&&!we;return typeof m=="object"?{...m,enabled:Ve}:{enabled:Ve}}}),Wi=d.createContext(null),ul="button",_i="Draggable";function Gi(n){let{id:o,data:l,disabled:t=!1,attributes:s}=n;const i=Ho(_i),{activators:r,activatorEvent:a,active:m,activeNodeRect:E,ariaDescribedById:c,draggableNodes:N,over:h}=d.useContext(Yo),{role:b=ul,roleDescription:p="draggable",tabIndex:x=0}=s??{},w=m?.id===o,P=d.useContext(w?$l:Wi),[y,D]=Oo(),[u,f]=Oo(),v=Vi(r,o),C=So(l);ze(()=>(N.set(o,{id:o,key:i,node:y,activatorNode:u,data:C}),()=>{const V=N.get(o);V&&V.key===i&&N.delete(o)}),[N,o]);const F=d.useMemo(()=>({role:b,tabIndex:x,"aria-disabled":t,"aria-pressed":w&&b===ul?!0:void 0,"aria-roledescription":p,"aria-describedby":c.draggable}),[t,b,x,w,p,c.draggable]);return{active:m,activatorEvent:a,activeNodeRect:E,attributes:F,isDragging:w,listeners:t?void 0:v,node:y,over:h,setNodeRef:D,setActivatorNodeRef:f,transform:P}}function Ui(){return d.useContext(Ll)}const qi="Droppable",Xi={timeout:25};function Ki(n){let{data:o,disabled:l=!1,id:t,resizeObserverConfig:s}=n;const i=Ho(qi),{active:r,dispatch:a,over:m,measureDroppableContainers:E}=d.useContext(Yo),c=d.useRef({disabled:l}),N=d.useRef(!1),h=d.useRef(null),b=d.useRef(null),{disabled:p,updateMeasurementsFor:x,timeout:w}={...Xi,...s},P=So(x??t),y=d.useCallback(()=>{if(!N.current){N.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{E(Array.isArray(P.current)?P.current:[P.current]),b.current=null},w)},[w]),D=Jo({callback:y,disabled:p||!r}),u=d.useCallback((F,V)=>{D&&(V&&(D.unobserve(V),N.current=!1),F&&D.observe(F))},[D]),[f,v]=Oo(u),C=So(o);return d.useEffect(()=>{!D||!f.current||(D.disconnect(),N.current=!1,D.observe(f.current))},[f,D]),d.useEffect(()=>(a({type:fe.RegisterDroppable,element:{id:t,key:i,disabled:l,node:f,rect:h,data:C}}),()=>a({type:fe.UnregisterDroppable,key:i,id:t})),[t]),d.useEffect(()=>{l!==c.current.disabled&&(a({type:fe.SetDroppableDisabled,id:t,key:i,disabled:l}),c.current.disabled=l)},[t,i,l,a]),{active:r,rect:h,isOver:m?.id===t,node:f,over:m,setNodeRef:v}}function An(n,o,l){const t=n.slice();return t.splice(l<0?t.length+l:l,0,t.splice(o,1)[0]),t}function Ji(n,o){return n.reduce((l,t,s)=>{const i=o.get(t);return i&&(l[s]=i),l},Array(n.length))}function Mo(n){return n!==null&&n>=0}function Yi(n,o){if(n===o)return!0;if(n.length!==o.length)return!1;for(let l=0;l<n.length;l++)if(n[l]!==o[l])return!1;return!0}function Zi(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const zl=n=>{let{rects:o,activeIndex:l,overIndex:t,index:s}=n;const i=An(o,t,l),r=o[s],a=i[s];return!a||!r?null:{x:a.left-r.left,y:a.top-r.top,scaleX:a.width/r.width,scaleY:a.height/r.height}},Ao={scaleX:1,scaleY:1},es=n=>{var o;let{activeIndex:l,activeNodeRect:t,index:s,rects:i,overIndex:r}=n;const a=(o=i[l])!=null?o:t;if(!a)return null;if(s===l){const E=i[r];return E?{x:0,y:l<r?E.top+E.height-(a.top+a.height):E.top-a.top,...Ao}:null}const m=os(i,s,l);return s>l&&s<=r?{x:0,y:-a.height-m,...Ao}:s<l&&s>=r?{x:0,y:a.height+m,...Ao}:{x:0,y:0,...Ao}};function os(n,o,l){const t=n[o],s=n[o-1],i=n[o+1];return t?l<o?s?t.top-(s.top+s.height):i?i.top-(t.top+t.height):0:i?i.top-(t.top+t.height):s?t.top-(s.top+s.height):0:0}const Ol="Sortable",Ql=ve.createContext({activeIndex:-1,containerId:Ol,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:zl,disabled:{draggable:!1,droppable:!1}});function ns(n){let{children:o,id:l,items:t,strategy:s=zl,disabled:i=!1}=n;const{active:r,dragOverlay:a,droppableRects:m,over:E,measureDroppableContainers:c}=Ui(),N=Ho(Ol,l),h=a.rect!==null,b=d.useMemo(()=>t.map(v=>typeof v=="object"&&"id"in v?v.id:v),[t]),p=r!=null,x=r?b.indexOf(r.id):-1,w=E?b.indexOf(E.id):-1,P=d.useRef(b),y=!Yi(b,P.current),D=w!==-1&&x===-1||y,u=Zi(i);ze(()=>{y&&p&&c(b)},[y,b,p,c]),d.useEffect(()=>{P.current=b},[b]);const f=d.useMemo(()=>({activeIndex:x,containerId:N,disabled:u,disableTransforms:D,items:b,overIndex:w,useDragOverlay:h,sortedRects:Ji(b,m),strategy:s}),[x,N,u.draggable,u.droppable,D,b,w,m,h,s]);return ve.createElement(Ql.Provider,{value:f},o)}const ls=n=>{let{id:o,items:l,activeIndex:t,overIndex:s}=n;return An(l,t,s).indexOf(o)},ts=n=>{let{containerId:o,isSorting:l,wasDragging:t,index:s,items:i,newIndex:r,previousItems:a,previousContainerId:m,transition:E}=n;return!E||!t||a!==i&&s===r?!1:l?!0:r!==s&&o===m},is={duration:200,easing:"ease"},Wl="transform",ss=wo.Transition.toString({property:Wl,duration:0,easing:"linear"}),ds={roleDescription:"sortable"};function as(n){let{disabled:o,index:l,node:t,rect:s}=n;const[i,r]=d.useState(null),a=d.useRef(l);return ze(()=>{if(!o&&l!==a.current&&t.current){const m=s.current;if(m){const E=co(t.current,{ignoreTransform:!0}),c={x:m.left-E.left,y:m.top-E.top,scaleX:m.width/E.width,scaleY:m.height/E.height};(c.x||c.y)&&r(c)}}l!==a.current&&(a.current=l)},[o,l,t,s]),d.useEffect(()=>{i&&r(null)},[i]),i}function rs(n){let{animateLayoutChanges:o=ts,attributes:l,disabled:t,data:s,getNewIndex:i=ls,id:r,strategy:a,resizeObserverConfig:m,transition:E=is}=n;const{items:c,containerId:N,activeIndex:h,disabled:b,disableTransforms:p,sortedRects:x,overIndex:w,useDragOverlay:P,strategy:y}=d.useContext(Ql),D=us(t,b),u=c.indexOf(r),f=d.useMemo(()=>({sortable:{containerId:N,index:u,items:c},...s}),[N,s,u,c]),v=d.useMemo(()=>c.slice(c.indexOf(r)),[c,r]),{rect:C,node:F,isOver:V,setNodeRef:S}=Ki({id:r,data:f,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:v,...m}}),{active:I,activatorEvent:H,activeNodeRect:O,attributes:Q,setNodeRef:G,listeners:oe,isDragging:R,over:B,setActivatorNodeRef:L,transform:Z}=Gi({id:r,data:f,attributes:{...ds,...l},disabled:D.draggable}),U=yt(S,G),A=!!I,$=A&&!p&&Mo(h)&&Mo(w),K=!P&&R,j=K&&$?Z:null,ce=$?j??(a??y)({rects:x,activeNodeRect:O,activeIndex:h,overIndex:w,index:u}):null,ie=Mo(h)&&Mo(w)?i({id:r,items:c,activeIndex:h,overIndex:w}):u,te=I?.id,_=d.useRef({activeId:te,items:c,newIndex:ie,containerId:N}),Ce=c!==_.current.items,le=o({active:I,containerId:N,isDragging:R,isSorting:A,id:r,index:u,items:c,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:E,wasDragging:_.current.activeId!=null}),se=as({disabled:!le,index:u,node:F,rect:C});return d.useEffect(()=>{A&&_.current.newIndex!==ie&&(_.current.newIndex=ie),N!==_.current.containerId&&(_.current.containerId=N),c!==_.current.items&&(_.current.items=c)},[A,ie,N,c]),d.useEffect(()=>{if(te===_.current.activeId)return;if(te!=null&&_.current.activeId==null){_.current.activeId=te;return}const be=setTimeout(()=>{_.current.activeId=te},50);return()=>clearTimeout(be)},[te]),{active:I,activeIndex:h,attributes:Q,data:f,rect:C,index:u,newIndex:ie,items:c,isOver:V,isSorting:A,isDragging:R,listeners:oe,node:F,overIndex:w,over:B,setNodeRef:U,setActivatorNodeRef:L,setDroppableNodeRef:S,setDraggableNodeRef:G,transform:se??ce,transition:ee()};function ee(){if(se||Ce&&_.current.newIndex===u)return ss;if(!(K&&!jn(H)||!E)&&(A||le))return wo.Transition.toString({...E,property:Wl})}}function us(n,o){var l,t;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(l=n?.draggable)!=null?l:o.draggable,droppable:(t=n?.droppable)!=null?t:o.droppable}}function _o(n){if(!n)return!1;const o=n.data.current;return!!(o&&"sortable"in o&&typeof o.sortable=="object"&&"containerId"in o.sortable&&"items"in o.sortable&&"index"in o.sortable)}const ms=[J.Down,J.Right,J.Up,J.Left],cs=(n,o)=>{let{context:{active:l,collisionRect:t,droppableRects:s,droppableContainers:i,over:r,scrollableAncestors:a}}=o;if(ms.includes(n.code)){if(n.preventDefault(),!l||!t)return;const m=[];i.getEnabled().forEach(N=>{if(!N||N!=null&&N.disabled)return;const h=s.get(N.id);if(h)switch(n.code){case J.Down:t.top<h.top&&m.push(N);break;case J.Up:t.top>h.top&&m.push(N);break;case J.Left:t.left>h.left&&m.push(N);break;case J.Right:t.left<h.left&&m.push(N);break}});const E=Wt({collisionRect:t,droppableRects:s,droppableContainers:m});let c=wl(E,"id");if(c===r?.id&&E.length>1&&(c=E[1].id),c!=null){const N=i.get(l.id),h=i.get(c),b=h?s.get(h.id):null,p=h?.node.current;if(p&&b&&N&&h){const w=Ko(p).some((v,C)=>a[C]!==v),P=_l(N,h),y=bs(N,h),D=w||!P?{x:0,y:0}:{x:y?t.width-b.width:0,y:y?t.height-b.height:0},u={x:b.left,y:b.top};return D.x&&D.y?u:yo(u,D)}}}};function _l(n,o){return!_o(n)||!_o(o)?!1:n.data.current.sortable.containerId===o.data.current.sortable.containerId}function bs(n,o){return!_o(n)||!_o(o)||!_l(n,o)?!1:n.data.current.sortable.index<o.data.current.sortable.index}function fs({id:n,children:o,isEditing:l,onRemove:t}){const{attributes:s,listeners:i,setNodeRef:r,transform:a,transition:m,isDragging:E}=rs({id:n}),c={transform:wo.Transform.toString(a),transition:m,zIndex:E?100:"auto",position:"relative"};return e.jsxDEV("div",{ref:r,style:c,className:`relative group ${E?"z-50":""}`,children:[l&&e.jsxDEV("div",{className:"absolute -top-3 -right-3 z-50 flex gap-1",children:[e.jsxDEV("div",{...s,...i,className:"p-2 bg-white shadow-lg rounded-full cursor-grab active:cursor-grabbing hover:bg-indigo-50 text-indigo-500 border border-indigo-100 transition-all hover:scale-110",title:"Drag to reorder",children:e.jsxDEV(tt,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:40,columnNumber:25},this)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:34,columnNumber:21},this),t&&e.jsxDEV("button",{onClick:t,className:"p-2 bg-white shadow-lg rounded-full cursor-pointer hover:bg-rose-50 text-rose-500 border border-rose-100 transition-all hover:scale-110",title:"Remove widget",children:e.jsxDEV(Go,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:48,columnNumber:29},this)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:43,columnNumber:25},this)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:33,columnNumber:17},this),e.jsxDEV("div",{className:`${l?"opacity-100 scale-[0.99] transition-all":""}`,children:o},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:53,columnNumber:13},this),l&&e.jsxDEV("div",{className:"absolute inset-0 border-2 border-dashed border-indigo-400/30 rounded-2xl pointer-events-none bg-indigo-50/5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:57,columnNumber:17},this)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/DashboardWidget.tsx",lineNumber:31,columnNumber:9},this)}function Es(){const n=cl.isNativePlatform(),[o,l]=d.useState({isOnline:!0,isSyncing:!1,lastSync:null,pendingCount:0,stats:{products:0,partners:0,invoices:0,accounts:0,vehicles:0},error:null});d.useEffect(()=>{if(!n)return;t();const m=setInterval(t,5e3);return()=>clearInterval(m)},[n]);const t=async()=>{try{const[m,E,c]=await Promise.all([ue.isOnline(),ue.getStats(),ue.getPendingCount()]);l(N=>({...N,isOnline:m,lastSync:E.lastSync,pendingCount:c,stats:{products:E.products,partners:E.partners,invoices:E.invoices,accounts:E.accounts,vehicles:E.vehicles||0}}))}catch{}},s=d.useCallback(async()=>{if(n){l(m=>({...m,isSyncing:!0,error:null}));try{const m=await ue.downloadAllData();m.success||l(E=>({...E,error:m.message}))}catch(m){l(E=>({...E,error:m.message}))}await t(),l(m=>({...m,isSyncing:!1}))}},[n]),i=d.useCallback(async()=>{if(n){l(m=>({...m,isSyncing:!0,error:null}));try{const m=await ue.downloadAllData();m.success||l(E=>({...E,error:m.message}))}catch(m){l(E=>({...E,error:m.message}))}await t(),l(m=>({...m,isSyncing:!1}))}},[n]),r=d.useCallback(async()=>{if(!n)return{synced:0,failed:0};const m=await ue.syncPendingOperations();return await t(),m},[n]),a=d.useCallback(()=>{l(m=>({...m,error:null}))},[]);return{...o,isMobile:n,fullSync:s,deltaSync:i,syncPending:r,clearError:a}}function Ns(n){if(!n)return"لم تتم المزامنة بعد";const o=new Date(n),t=new Date().getTime()-o.getTime(),s=Math.floor(t/1e3/60),i=Math.floor(s/60),r=Math.floor(i/24);return s<1?"الآن":s<60?`منذ ${s} دقيقة`:i<24?`منذ ${i} ساعة`:r<7?`منذ ${r} يوم`:o.toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"})}const xs=({vehicleId:n,onBack:o,onStartVisit:l,onQuickSale:t})=>{const[s,i]=d.useState([]),[r,a]=d.useState(!0),[m,E]=d.useState(null),[c,N]=d.useState("خط سير اليوم");d.useEffect(()=>{h()},[n]);const h=async()=>{a(!0);try{const f=await Sn.getAll({vehicleId:n}),v=new Date().toISOString().split("T")[0],C=f.find(F=>F.routeDate?.startsWith(v))||f[0];if(C&&C.stops&&C.stops.length>0){N(C.routeName||"خط سير اليوم");const F=C.stops?.map((V,S)=>({id:V.id||`stop-${S}`,customerId:V.customerId||V.partnerId,customerName:V.customerName||V.partnerName||"عميل",address:V.address,phone:V.phone,sequence:V.sequence||S+1,status:V.status||"PENDING",visitId:V.visitId,saleAmount:V.saleAmount}))||[];i(F)}else N("لا يوجد خط سير"),i([])}catch{}a(!1)},b=f=>{f&&(window.location.href=`tel:${f}`)},p=f=>{if(f){const v=encodeURIComponent(f);window.open(`https://www.google.com/maps/search/?api=1&query=${v}`,"_blank")}},x=async f=>{E(f.id),l(f.customerId,f.customerName)},w=async f=>{i(v=>v.map(C=>C.id===f?{...C,status:"SKIPPED"}:C))},P=f=>{switch(f){case"VISITED":return e.jsxDEV(oo,{className:"w-6 h-6 text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:112,columnNumber:24},void 0);case"SKIPPED":return e.jsxDEV(On,{className:"w-6 h-6 text-amber-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:114,columnNumber:24},void 0);default:return e.jsxDEV(Co,{className:"w-6 h-6 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:116,columnNumber:24},void 0)}},y=s.filter(f=>f.status==="VISITED").length,D=s.length,u=D>0?Math.round(y/D*100):0;return r?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV(De,{className:"w-8 h-8 text-indigo-600 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:127,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:126,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 text-white px-4 py-5 sticky top-0 z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:o,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:138,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:137,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:c},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:141,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-indigo-200 text-sm mt-1",children:[y," من ",D," زيارة مكتملة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:142,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:140,columnNumber:21},void 0),e.jsxDEV("button",{onClick:h,className:"p-2 rounded-full hover:bg-white/10",children:e.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:147,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:146,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:136,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-emerald-400 rounded-full transition-all duration-500",style:{width:`${u}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:154,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:153,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:152,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:135,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-3",children:s.length===0?e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(Do,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:166,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-500 text-lg",children:"لا توجد نقاط في خط السير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:167,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-2",children:"تواصل مع المدير لإضافة خط سير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:168,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:165,columnNumber:21},void 0):s.map((f,v)=>e.jsxDEV("div",{className:`bg-white rounded-2xl shadow-sm border-2 transition-all ${f.status==="VISITED"?"border-emerald-200 bg-emerald-50/50":f.status==="SKIPPED"?"border-amber-200 bg-amber-50/50":"border-transparent hover:border-indigo-200"}`,children:[e.jsxDEV("div",{className:"p-4 flex items-start gap-3",children:[e.jsxDEV("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold ${f.status==="VISITED"?"bg-emerald-500 text-white":f.status==="SKIPPED"?"bg-amber-500 text-white":"bg-indigo-100 text-indigo-600"}`,children:v+1},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:184,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 text-lg truncate",children:f.customerName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:195,columnNumber:37},void 0),f.address&&e.jsxDEV("p",{className:"text-slate-500 text-sm mt-1 flex items-center gap-1",children:[e.jsxDEV(Do,{className:"w-4 h-4 flex-shrink-0"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:200,columnNumber:45},void 0),e.jsxDEV("span",{className:"truncate",children:f.address},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:201,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:199,columnNumber:41},void 0),f.saleAmount&&f.saleAmount>0&&e.jsxDEV("p",{className:"text-emerald-600 text-sm mt-1 font-semibold",children:["مبيعات: ",f.saleAmount.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:205,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:194,columnNumber:33},void 0),P(f.status)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:182,columnNumber:29},void 0),f.status==="PENDING"&&e.jsxDEV("div",{className:"px-4 pb-4 flex gap-2",children:[e.jsxDEV("button",{onClick:()=>b(f.phone),className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-600 font-medium flex items-center justify-center gap-2",disabled:!f.phone,children:[e.jsxDEV(hn,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:224,columnNumber:41},void 0),"اتصال"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:219,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>p(f.address),className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-600 font-medium flex items-center justify-center gap-2",disabled:!f.address,children:[e.jsxDEV(gn,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:232,columnNumber:41},void 0),"الموقع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:227,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>w(f.id),className:"py-3 px-4 rounded-xl bg-amber-100 text-amber-600 font-medium",children:e.jsxDEV(On,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:239,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:235,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:217,columnNumber:33},void 0),f.status==="PENDING"&&e.jsxDEV("div",{className:"px-4 pb-4 flex gap-2",children:[e.jsxDEV("button",{onClick:()=>x(f),className:"flex-1 py-4 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/30",children:[e.jsxDEV(it,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:251,columnNumber:41},void 0),"بدء الزيارة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:247,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>t(f.customerId,f.customerName),className:"py-4 px-5 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-bold flex items-center justify-center shadow-lg shadow-emerald-500/30",children:e.jsxDEV(vn,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:258,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:254,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:246,columnNumber:33},void 0)]},f.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:172,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedRouteScreen.tsx",lineNumber:133,columnNumber:9},void 0)},xo=bl("Share",{web:()=>qo(()=>import("./web-CSyec5cP.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(n=>new n.ShareWeb)});function ps(n){n.CapacitorUtils.Synapse=new Proxy({},{get(o,l){return new Proxy({},{get(t,s){return(i,r,a)=>{const m=n.Capacitor.Plugins[l];if(m===void 0){a(new Error(`Capacitor plugin ${l} not found`));return}if(typeof m[s]!="function"){a(new Error(`Method ${s} not found in Capacitor plugin ${l}`));return}(async()=>{try{const E=await m[s](i);r(E)}catch(E){a(E)}})()}}})}})}function Cs(n){n.CapacitorUtils.Synapse=new Proxy({},{get(o,l){return n.cordova.plugins[l]}})}function Rs(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?ps(window):window.cordova!==void 0&&Cs(window))}var so;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",n.ExternalCache="EXTERNAL_CACHE",n.LibraryNoCloud="LIBRARY_NO_CLOUD",n.Temporary="TEMPORARY"})(so||(so={}));var vo;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(vo||(vo={}));const To=bl("Filesystem",{web:()=>qo(()=>import("./web-DgKQ6aHV.js"),__vite__mapDeps([7,1,2,3,4,5,6,8])).then(n=>new n.FilesystemWeb)});Rs();const Me={SAVED_PRINTERS:"erp_saved_printers",DEFAULT_PRINTER:"erp_default_printer",PRINT_SETTINGS:"erp_print_settings",SYSTEM_CONFIG:"erp_system_config"},ml={printerWidth:80,fontSize:"normal",showLogo:!0,showBarcode:!1,copies:1,printFooter:!0,companyName:"",companyPhone:"",companyAddress:"",companyLogo:"",companyEmail:"",taxId:""},Ze="\x1B",Lo="",q={INIT:Ze+"@",ALIGN_CENTER:Ze+"a",ALIGN_RIGHT:Ze+"a",BOLD_ON:Ze+"E",BOLD_OFF:Ze+"E\0",DOUBLE_HEIGHT:Lo+"!",DOUBLE_SIZE:Lo+"!0",NORMAL_SIZE:Lo+"!\0",LINE_SPACING_TIGHT:Ze+"3",FEED_LINE:`
`,FEED_PAPER:Ze+"d",CUT_PAPER_PARTIAL:Lo+"V"};class Ps{constructor(){this.savedPrinters=[],this.defaultPrinter=null,this.settings=ml,this.initialized=!1}async initialize(){if(!this.initialized)try{const{value:o}=await ke.get({key:Me.SAVED_PRINTERS});o&&(this.savedPrinters=JSON.parse(o));const{value:l}=await ke.get({key:Me.DEFAULT_PRINTER});l&&(this.defaultPrinter=JSON.parse(l));const{value:t}=await ke.get({key:Me.PRINT_SETTINGS});t&&(this.settings={...ml,...JSON.parse(t)}),await this.loadCompanyConfig(),this.initialized=!0}catch{}}async loadCompanyConfig(){try{const{value:o}=await ke.get({key:"server_url"});if(o){const t=localStorage.getItem("authToken"),s={"Content-Type":"application/json","ngrok-skip-browser-warning":"true"};t&&(s.Authorization=`Bearer ${t}`);const i=await fetch(`${o}/api/settings`,{headers:s});if(i.ok){const r=await i.json();this.settings={...this.settings,companyName:r.companyName||this.settings.companyName,companyPhone:r.companyPhone||this.settings.companyPhone,companyAddress:r.companyAddress||this.settings.companyAddress,companyLogo:r.logo||this.settings.companyLogo,companyEmail:r.companyEmail||this.settings.companyEmail,taxId:r.taxId||this.settings.taxId},await ke.set({key:Me.SYSTEM_CONFIG,value:JSON.stringify(r)});return}}const{value:l}=await ke.get({key:Me.SYSTEM_CONFIG});if(l){const t=JSON.parse(l);this.settings={...this.settings,companyName:t.companyName||this.settings.companyName,companyPhone:t.companyPhone||this.settings.companyPhone,companyAddress:t.companyAddress||this.settings.companyAddress,companyLogo:t.logo||this.settings.companyLogo,companyEmail:t.companyEmail||this.settings.companyEmail,taxId:t.taxId||this.settings.taxId}}}catch{}}async refreshCompanyConfig(){await this.loadCompanyConfig()}async getSettings(){return await this.initialize(),{...this.settings}}async updateSettings(o){await this.initialize(),this.settings={...this.settings,...o},await ke.set({key:Me.PRINT_SETTINGS,value:JSON.stringify(this.settings)})}async getSavedPrinters(){return await this.initialize(),[...this.savedPrinters]}async savePrinter(o){await this.initialize();const l=this.savedPrinters.findIndex(t=>t.id===o.id);l>=0?this.savedPrinters[l]=o:this.savedPrinters.push(o),await ke.set({key:Me.SAVED_PRINTERS,value:JSON.stringify(this.savedPrinters)})}async removePrinter(o){await this.initialize(),this.savedPrinters=this.savedPrinters.filter(l=>l.id!==o),this.defaultPrinter?.id===o&&(this.defaultPrinter=null,await ke.remove({key:Me.DEFAULT_PRINTER})),await ke.set({key:Me.SAVED_PRINTERS,value:JSON.stringify(this.savedPrinters)})}async setDefaultPrinter(o){await this.initialize(),this.defaultPrinter=o,o?await ke.set({key:Me.DEFAULT_PRINTER,value:JSON.stringify(o)}):await ke.remove({key:Me.DEFAULT_PRINTER})}async getDefaultPrinter(){return await this.initialize(),this.defaultPrinter}async discoverBluetoothPrinters(){return[]}isMobile(){return cl.isNativePlatform()}generateReceiptHTML(o,l){const t=l.printerWidth===58?"58mm":"80mm",s=l.fontSize==="small"?"9px":l.fontSize==="large"?"12px":"10px",i=o.items.map(r=>`
            <tr>
                <td style="padding: 2px 0; text-align: right;">${r.name}</td>
                <td style="padding: 2px 2px; text-align: center;">${r.quantity}</td>
                <td style="padding: 2px 2px; text-align: center;">${r.price.toLocaleString("ar-EG")}</td>
                <td style="padding: 2px 0; text-align: left; font-weight: bold;">${r.total.toLocaleString("ar-EG")}</td>
            </tr>
        `).join("");return`
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فاتورة ${o.invoiceNumber}</title>
    <style>
        @media print {
            @page {
                size: ${t} auto;
                margin: 2mm;
            }
            body { margin: 0; }
        }
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Arial', 'Tahoma', sans-serif;
            font-size: ${s};
            max-width: ${t};
            margin: 0 auto;
            padding: 5px;
            color: #000;
            background: #fff;
        }
        
        .header {
            text-align: center;
            border-bottom: 1px dashed #333;
            padding-bottom: 8px;
            margin-bottom: 8px;
        }
        
        .company-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .company-info {
            font-size: 9px;
            color: #666;
        }
        
        .invoice-type {
            font-size: 12px;
            font-weight: bold;
            margin: 6px 0;
            padding: 4px;
            background: #f0f0f0;
            border-radius: 4px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
            font-size: 9px;
        }
        
        .divider {
            border-top: 1px dashed #333;
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 9px;
        }
        
        table th {
            border-bottom: 1px solid #333;
            padding: 4px 2px;
            text-align: right;
            font-weight: bold;
        }
        
        table td {
            padding: 3px 2px;
            border-bottom: 1px dotted #ccc;
        }
        
        .totals {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed #333;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
        }
        
        .grand-total {
            font-size: 14px;
            font-weight: bold;
            padding: 6px;
            background: #f0f0f0;
            border-radius: 4px;
            margin-top: 6px;
        }
        
        .payment-info {
            text-align: center;
            margin-top: 8px;
            padding: 4px;
            background: ${o.paymentMethod==="CASH"?"#e8f5e9":"#fff3e0"};
            border-radius: 4px;
            font-weight: bold;
        }
        
        .footer {
            text-align: center;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px dashed #333;
            font-size: 9px;
            color: #666;
        }
        
        .barcode {
            text-align: center;
            margin: 8px 0;
            font-family: 'Libre Barcode 128', monospace;
            font-size: 32px;
        }
    </style>
</head>
<body>
    <div class="header">
        ${l.companyLogo&&l.showLogo?`<div style="margin-bottom: 8px;"><img src="${l.companyLogo}" alt="${l.companyName||"Logo"}" style="max-width: 80px; max-height: 60px; object-fit: contain;" /></div>`:""}
        ${l.companyName?`<div class="company-name">${l.companyName}</div>`:""}
        ${l.companyPhone?`<div class="company-info">📞 ${l.companyPhone}</div>`:""}
        ${l.companyEmail?`<div class="company-info">✉️ ${l.companyEmail}</div>`:""}
        ${l.companyAddress?`<div class="company-info">📍 ${l.companyAddress}</div>`:""}
        ${l.taxId?`<div class="company-info" style="font-weight: bold;">ر.ض: ${l.taxId}</div>`:""}
    </div>
    
    <div class="invoice-type">
        ${o.type==="SALE"?"🧾 فاتورة مبيعات":o.type==="RETURN"?"↩️ فاتورة مرتجع":"📄 إيصال"}
    </div>
    
    <div class="info-row">
        <span>رقم الفاتورة:</span>
        <span>${o.invoiceNumber}</span>
    </div>
    <div class="info-row">
        <span>التاريخ:</span>
        <span>${new Date(o.date).toLocaleDateString("ar-EG")} ${new Date(o.date).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}</span>
    </div>
    <div class="info-row">
        <span>العميل:</span>
        <span><strong>${o.partnerName}</strong></span>
    </div>
    ${o.salesmanName?`
    <div class="info-row">
        <span>المندوب:</span>
        <span>${o.salesmanName}</span>
    </div>
    `:""}
    
    <div class="divider"></div>
    
    <table>
        <thead>
            <tr>
                <th style="text-align: right;">الصنف</th>
                <th style="text-align: center;">الكمية</th>
                <th style="text-align: center;">السعر</th>
                <th style="text-align: left;">المبلغ</th>
            </tr>
        </thead>
        <tbody>
            ${i}
        </tbody>
    </table>
    
    <div class="totals">
        <div class="total-row">
            <span>الإجمالي الفرعي:</span>
            <span>${o.subtotal.toLocaleString("ar-EG")} ج.م</span>
        </div>
        ${o.discount&&o.discount>0?`
        <div class="total-row">
            <span>الخصم:</span>
            <span style="color: #c62828;">-${o.discount.toLocaleString("ar-EG")} ج.م</span>
        </div>
        `:""}
        ${o.tax&&o.tax>0?`
        <div class="total-row">
            <span>الضريبة:</span>
            <span>${o.tax.toLocaleString("ar-EG")} ج.م</span>
        </div>
        `:""}
        
        <div class="grand-total">
            <div class="total-row" style="margin: 0;">
                <span>الإجمالي:</span>
                <span>${o.total.toLocaleString("ar-EG")} ج.م</span>
            </div>
        </div>
    </div>
    
    <div class="payment-info">
        ${o.paymentMethod==="CASH"?"💵 نقداً":o.paymentMethod==="CARD"?"💳 بطاقة":"📝 آجل"}
        ${o.paidAmount!==void 0?` - المدفوع: ${o.paidAmount.toLocaleString("ar-EG")} ج.م`:""}
        ${o.change&&o.change>0?` - الباقي: ${o.change.toLocaleString("ar-EG")} ج.م`:""}
    </div>
    
    ${o.previousBalance!==void 0||o.newBalance!==void 0?`
    <div style="margin-top: 8px; padding: 8px; background: #e3f2fd; border-radius: 4px; border: 1px solid #bbdefb;">
        <div style="font-weight: bold; margin-bottom: 4px; color: #1565c0;">💰 رصيد العميل</div>
        <div class="total-row" style="font-size: 9px;">
            <span>الرصيد السابق:</span>
            <span>${(o.previousBalance||0).toLocaleString("ar-EG")} ج.م</span>
        </div>
        <div class="total-row" style="font-size: 9px;">
            <span>قيمة الفاتورة:</span>
            <span>${o.total.toLocaleString("ar-EG")} ج.م</span>
        </div>
        <div class="total-row" style="font-size: 10px; font-weight: bold; color: ${(o.newBalance||0)>0?"#c62828":"#2e7d32"};">
            <span>الرصيد الجديد:</span>
            <span>${(o.newBalance||0).toLocaleString("ar-EG")} ج.م</span>
        </div>
    </div>
    `:""}
    
    ${o.notes?`
    <div style="margin-top: 8px; padding: 4px; background: #f8f8f8; border-radius: 4px; font-size: 9px;">
        <strong>ملاحظات:</strong> ${o.notes}
    </div>
    `:""}
    
    ${l.printFooter?`
    <div class="footer">
        <p>شكراً لتعاملكم معنا 🙏</p>
        <p>${new Date().toLocaleDateString("ar-EG")}</p>
    </div>
    `:""}
</body>
</html>`}generateESCPOS(o,l){const t=l.printerWidth===58?32:48,s="-".repeat(t);let i="";i+=q.INIT,i+=q.LINE_SPACING_TIGHT,i+=q.ALIGN_CENTER,i+=q.DOUBLE_SIZE,i+=q.BOLD_ON,i+=(l.companyName||"")+q.FEED_LINE,i+=q.NORMAL_SIZE,i+=q.BOLD_OFF,l.companyPhone&&(i+=l.companyPhone+q.FEED_LINE),i+=s+q.FEED_LINE,i+=q.BOLD_ON,i+=q.DOUBLE_HEIGHT;const r=o.type==="SALE"?"فاتورة مبيعات":o.type==="RETURN"?"فاتورة مرتجع":"إيصال";i+=r+q.FEED_LINE,i+=q.NORMAL_SIZE,i+=q.BOLD_OFF,i+=s+q.FEED_LINE,i+=q.ALIGN_RIGHT,i+=`رقم: ${o.invoiceNumber} `+q.FEED_LINE,i+=`التاريخ: ${new Date(o.date).toLocaleDateString("ar-EG")} `+q.FEED_LINE,i+=`العميل: ${o.partnerName} `+q.FEED_LINE,o.salesmanName&&(i+=`المندوب: ${o.salesmanName} `+q.FEED_LINE),i+=s+q.FEED_LINE,i+=q.BOLD_ON,i+=this.padLine("الصنف","الكمية","المبلغ",t),i+=q.BOLD_OFF;for(const m of o.items){const E=m.name.length>t-16?m.name.substring(0,t-19)+"...":m.name;i+=this.padLine(E,m.quantity.toString(),m.total.toLocaleString("ar-EG"),t)}i+=s+q.FEED_LINE,i+=this.padLine("الإجمالي الفرعي:","",o.subtotal.toLocaleString("ar-EG"),t),o.discount&&o.discount>0&&(i+=this.padLine("الخصم:","","-"+o.discount.toLocaleString("ar-EG"),t)),i+=q.BOLD_ON,i+=q.DOUBLE_HEIGHT,i+=this.padLine("الإجمالي:","",o.total.toLocaleString("ar-EG")+" ج.م",t),i+=q.NORMAL_SIZE,i+=q.BOLD_OFF,i+=s+q.FEED_LINE,i+=q.ALIGN_CENTER;const a=o.paymentMethod==="CASH"?"نقداً":o.paymentMethod==="CARD"?"بطاقة":"آجل";return i+=q.BOLD_ON,i+=`الدفع: ${a} `+q.FEED_LINE,i+=q.BOLD_OFF,o.paidAmount!==void 0&&(i+=`المدفوع: ${o.paidAmount.toLocaleString("ar-EG")} ج.م`+q.FEED_LINE),o.change&&o.change>0&&(i+=`الباقي: ${o.change.toLocaleString("ar-EG")} ج.م`+q.FEED_LINE),l.printFooter&&(i+=q.FEED_LINE,i+="شكراً لتعاملكم معنا"+q.FEED_LINE),i+=q.FEED_PAPER,i+=q.CUT_PAPER_PARTIAL,i}padLine(o,l,t,s){const i=o.length+l.length+t.length,r=Math.max(0,s-i),a=Math.floor(r/2),m=r-a;return o+" ".repeat(a)+l+" ".repeat(m)+t+q.FEED_LINE}async printWithSystemDialog(o){await this.initialize();try{const l=this.generateReceiptHTML(o,this.settings);if(this.isMobile()){const i=document.createElement("div");i.id="print-preview-modal",i.style.cssText=`
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.8);
                    z-index: 99999;
                    display: flex;
                    flex-direction: column;
                    padding: 16px;
                `;const r=document.createElement("div");r.style.cssText=`
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 12px;
                `,r.innerHTML=`
                    <span style="color: white; font-size: 18px; font-weight: bold;">معاينة الفاتورة</span>
                    <button id="close-print-preview" style="
                        background: #ef4444;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 36px;
                        height: 36px;
                        font-size: 18px;
                        cursor: pointer;
                    ">✕</button>
                `;const a=document.createElement("div");a.style.cssText=`
                    flex: 1;
                    background: white;
                    border-radius: 12px;
                    overflow: auto;
                    padding: 0;
                `,a.innerHTML=l;const m=document.createElement("div");m.style.cssText=`
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                    margin-top: 12px;
                `,m.innerHTML=`
                    <button id="print-rawbt" style="
                        width: 100%;
                        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                        color: white;
                        border: none;
                        border-radius: 12px;
                        padding: 16px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                    ">🖨️ طباعة على الطابعة الحرارية</button>
                    
                    <div style="display: flex; gap: 8px;">
                        <button id="save-and-print" style="
                            flex: 1;
                            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                            color: white;
                            border: none;
                            border-radius: 12px;
                            padding: 14px;
                            font-size: 13px;
                            font-weight: bold;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 4px;
                        ">📄 حفظ HTML</button>
                        <button id="share-receipt" style="
                            flex: 1;
                            background: #10b981;
                            color: white;
                            border: none;
                            border-radius: 12px;
                            padding: 14px;
                            font-size: 13px;
                            font-weight: bold;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 4px;
                        ">📤 مشاركة نص</button>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 10px; margin-top: 4px;">
                        <p style="text-align: center; color: white; font-size: 11px; margin: 0;">
                            💡 للطباعة: قم بتثبيت تطبيق <strong>Print Label</strong> من Play Store ثم اختره عند المشاركة
                        </p>
                    </div>
                `,i.appendChild(r),i.appendChild(a),i.appendChild(m),document.body.appendChild(i);const E=()=>{document.body.contains(i)&&document.body.removeChild(i)};return document.getElementById("close-print-preview")?.addEventListener("click",E),document.getElementById("print-rawbt")?.addEventListener("click",async()=>{try{const c=document.getElementById("print-rawbt");c&&(c.innerHTML="⏳ جاري إنشاء الصورة...",c.setAttribute("disabled","true"));const N=await this.generateReceiptImage(o),h=`receipt_${o.invoiceNumber}_${Date.now()}.png`,b=N.split(",")[1],p=await To.writeFile({path:h,data:b,directory:so.Cache});c&&(c.innerHTML="📤 جاري الإرسال...");const x=p.uri;await xo.share({files:[x],title:"فاتورة "+o.invoiceNumber,dialogTitle:"اختر Print Label للطباعة على الطابعة الحرارية"}),E()}catch(c){alert("حدث خطأ: "+c.message);const N=document.getElementById("print-rawbt");N&&(N.innerHTML="🖨️ طباعة على الطابعة الحرارية",N.removeAttribute("disabled"))}}),document.getElementById("save-and-print")?.addEventListener("click",async()=>{try{const c=`invoice_${o.invoiceNumber}_${Date.now()}.html`,N=`
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فاتورة ${o.invoiceNumber}</title>
    <style>
        @media print {
            body { margin: 0; padding: 10px; }
            .no-print { display: none !important; }
        }
        body { 
            font-family: Arial, sans-serif; 
            direction: rtl;
            background: white;
            padding: 10px;
        }
    </style>
</head>
<body>
    ${l}
    <div class="no-print" style="text-align: center; padding: 20px;">
        <button onclick="window.print()" style="
            background: #4f46e5; color: white; border: none;
            padding: 15px 40px; border-radius: 10px; font-size: 16px;
            font-weight: bold; cursor: pointer;
        ">🖨️ طباعة الفاتورة</button>
    </div>
</body>
</html>`,h=await To.writeFile({path:c,data:N,directory:so.Cache,encoding:vo.UTF8});await xo.share({title:"فاتورة "+o.invoiceNumber,text:"افتح الملف في المتصفح ثم اضغط على زر الطباعة",url:h.uri,dialogTitle:"فتح الفاتورة للطباعة"}),E()}catch(c){alert("حدث خطأ: "+c.message)}}),document.getElementById("share-receipt")?.addEventListener("click",async()=>{try{const c=`
📄 فاتورة رقم: ${o.invoiceNumber}
📅 التاريخ: ${new Date(o.date).toLocaleDateString("ar-EG")}
👤 العميل: ${o.partnerName}
${o.items.map(N=>`  • ${N.name}: ${N.quantity} × ${N.price} = ${N.total}`).join(`
`)}
────────────────
💰 الإجمالي: ${o.total.toLocaleString("ar-EG")} ج.م
${o.paidAmount?`✅ المدفوع: ${o.paidAmount.toLocaleString("ar-EG")} ج.م`:""}
💳 طريقة الدفع: ${o.paymentMethod==="CASH"?"نقدي":"آجل"}
                        `.trim();await xo.share({title:"فاتورة "+o.invoiceNumber,text:c,dialogTitle:"مشاركة الفاتورة"}),E()}catch(c){c.message?.includes("cancel")||alert("حدث خطأ في المشاركة")}}),{success:!0,message:"تم فتح معاينة الطباعة"}}const t=document.createElement("iframe");t.style.position="fixed",t.style.right="-9999px",t.style.top="-9999px",document.body.appendChild(t);const s=t.contentDocument||t.contentWindow?.document;return s?(s.open(),s.write(l),s.close(),await new Promise(i=>setTimeout(i,300)),t.contentWindow?.print(),setTimeout(()=>{document.body.removeChild(t)},2e3),{success:!0,message:"تم فتح نافذة الطباعة"}):{success:!1,message:"فشل في إنشاء صفحة الطباعة"}}catch(l){return{success:!1,message:l.message||"خطأ في الطباعة"}}}async printToBluetoothPrinter(o,l){await this.initialize();try{const t=this.generateESCPOS(l,this.settings);return await this.printWithSystemDialog(l)}catch(t){return{success:!1,message:t.message||"خطأ في الطباعة"}}}async smartPrint(o){return await this.initialize(),this.defaultPrinter&&this.defaultPrinter.type==="bluetooth"?{...await this.printToBluetoothPrinter(this.defaultPrinter,o),method:"bluetooth"}:{...await this.printWithSystemDialog(o),method:"system"}}async previewReceipt(o){return await this.initialize(),this.generateReceiptHTML(o,this.settings)}async printGenericHTML(o,l="تقرير"){await this.initialize();try{if(this.isMobile()){const i=document.createElement("div");i.id="print-preview-modal",i.style.cssText=`
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.8);
                    z-index: 99999;
                    display: flex;
                    flex-direction: column;
                    padding: 16px;
                `;const r=document.createElement("div");r.style.cssText=`
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 12px;
                `,r.innerHTML=`
                    <span style="color: white; font-size: 18px; font-weight: bold;">${l}</span>
                    <button id="close-print-preview" style="
                        background: #ef4444;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 36px;
                        height: 36px;
                        font-size: 18px;
                        cursor: pointer;
                    ">✕</button>
                `;const a=document.createElement("div");a.style.cssText=`
                    flex: 1;
                    background: white;
                    border-radius: 12px;
                    overflow: auto;
                    padding: 16px;
                `,a.innerHTML=o;const m=document.createElement("div");m.style.cssText=`
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                    margin-top: 12px;
                `,m.innerHTML=`
                    <button id="print-thermal-report" style="
                        width: 100%;
                        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                        color: white;
                        border: none;
                        border-radius: 12px;
                        padding: 16px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                    ">🖨️ طباعة على الطابعة الحرارية</button>
                    
                    <div style="display: flex; gap: 8px;">
                        <button id="save-and-share-report" style="
                            flex: 1;
                            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                            color: white;
                            border: none;
                            border-radius: 12px;
                            padding: 14px;
                            font-size: 13px;
                            font-weight: bold;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 4px;
                        ">📄 حفظ HTML</button>
                        <button id="copy-report-text" style="
                            flex: 1;
                            background: #10b981;
                            color: white;
                            border: none;
                            border-radius: 12px;
                            padding: 14px;
                            font-size: 13px;
                            font-weight: bold;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 4px;
                        ">📋 نسخ</button>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 10px; margin-top: 4px;">
                        <p style="text-align: center; color: white; font-size: 11px; margin: 0;">
                            💡 للطباعة: قم بتثبيت تطبيق <strong>Print Label</strong> من Play Store ثم اختره عند المشاركة
                        </p>
                    </div>
                `,i.appendChild(r),i.appendChild(a),i.appendChild(m),document.body.appendChild(i);const E=()=>{document.body.contains(i)&&document.body.removeChild(i)};return document.getElementById("close-print-preview")?.addEventListener("click",E),document.getElementById("print-thermal-report")?.addEventListener("click",async()=>{try{const c=document.getElementById("print-thermal-report");c&&(c.innerHTML="⏳ جاري التحضير...",c.setAttribute("disabled","true"));const N=`${l.replace(/\s+/g,"_")}_${Date.now()}.html`,h=`<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${l}</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: Arial, sans-serif; 
            direction: rtl;
            background: white;
            padding: 10px;
            width: 58mm;
            max-width: 58mm;
        }
        table { width: 100%; border-collapse: collapse; font-size: 10px; }
        th, td { border: 1px solid #000; padding: 4px; text-align: right; }
        th { background: #eee; font-weight: bold; }
        h1 { font-size: 14px; text-align: center; margin: 5px 0; }
        h3 { font-size: 11px; text-align: center; margin: 3px 0; color: #333; }
        p { font-size: 10px; }
    </style>
</head>
<body>
    ${o}
</body>
</html>`,b=await To.writeFile({path:N,data:h,directory:so.Cache,encoding:vo.UTF8});c&&(c.innerHTML="📤 جاري الإرسال..."),await xo.share({files:[b.uri],title:l,dialogTitle:"اختر Print Label للطباعة على الطابعة الحرارية"}),E()}catch(c){alert("حدث خطأ: "+c.message);const N=document.getElementById("print-thermal-report");N&&(N.innerHTML="🖨️ طباعة على الطابعة الحرارية",N.removeAttribute("disabled"))}}),document.getElementById("save-and-share-report")?.addEventListener("click",async()=>{try{const c=`${l.replace(/\s+/g,"_")}_${Date.now()}.html`,N=`
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${l}</title>
    <style>
        @media print {
            body { margin: 0; padding: 10px; }
            .no-print { display: none !important; }
        }
        body { 
            font-family: Arial, sans-serif; 
            direction: rtl;
            background: white;
            padding: 10px;
        }
    </style>
</head>
<body>
    ${o}
    <div class="no-print" style="text-align: center; padding: 20px;">
        <button onclick="window.print()" style="
            background: #4f46e5; color: white; border: none;
            padding: 15px 40px; border-radius: 10px; font-size: 16px;
            font-weight: bold; cursor: pointer;
        ">🖨️ طباعة</button>
    </div>
</body>
</html>`,h=await To.writeFile({path:c,data:N,directory:so.Cache,encoding:vo.UTF8});await xo.share({title:l,text:"افتح الملف في المتصفح ثم اضغط على زر الطباعة",url:h.uri,dialogTitle:"مشاركة التقرير"}),E()}catch(c){alert("حدث خطأ: "+c.message)}}),document.getElementById("copy-report-text")?.addEventListener("click",async()=>{try{const c=a.innerText||a.textContent||"";await navigator.clipboard.writeText(c),alert("تم نسخ التقرير"),E()}catch{alert("حدث خطأ في النسخ")}}),{success:!0,message:"تم فتح معاينة التقرير"}}const t=document.createElement("iframe");t.style.position="fixed",t.style.right="-9999px",t.style.top="-9999px",document.body.appendChild(t);const s=t.contentDocument||t.contentWindow?.document;return s?(s.open(),s.write(o),s.close(),await new Promise(i=>setTimeout(i,300)),t.contentWindow?.print(),setTimeout(()=>{document.body.removeChild(t)},2e3),{success:!0,message:"تم فتح نافذة الطباعة"}):{success:!1,message:"فشل في إنشاء صفحة الطباعة"}}catch(t){return{success:!1,message:t.message||"خطأ في الطباعة"}}}async invoiceToReceipt(o,l){let t=[];const s=["lines","items","invoiceLines","linesJson","itemsJson"];for(const r of s){const a=o[r];if(a){if(Array.isArray(a)&&a.length>0){t=a;break}else if(typeof a=="string")try{const m=JSON.parse(a);if(Array.isArray(m)&&m.length>0){t=m;break}}catch{}}}if(t.length===0&&o.id)try{const a=await(await qo(()=>import("./index-BIcNJgNM.js").then(m=>m.$),__vite__mapDeps([1,2,3,4,5,6]))).api.get(`/invoices/${o.id}`);a&&a.lines&&Array.isArray(a.lines)&&a.lines.length>0&&(t=a.lines,o={...o,...a})}catch{}const i=t.map(r=>({name:r.productName||r.name||"منتج",quantity:r.quantity||0,price:r.price||0,total:r.total||r.quantity*r.price||0}));return{invoiceId:o.id,invoiceNumber:o.number||o.id?.slice(0,8)||"",date:o.date||new Date().toISOString(),type:o.type?.includes("RETURN")?"RETURN":o.type?.includes("RECEIPT")?"RECEIPT":"SALE",partnerName:o.partnerName||"عميل",partnerPhone:o.partnerPhone,items:i,subtotal:t.reduce((r,a)=>r+(a.total||a.quantity*a.price||0),0),discount:o.discount||o.globalDiscount||0,tax:o.taxAmount||0,total:o.total||0,paidAmount:o.paidAmount,paymentMethod:o.paymentMethod||"CASH",notes:o.notes,salesmanName:o.salesmanName,vehicleId:o.vehicleId,previousBalance:o.previousBalance??o.partnerBalance??0,newBalance:o.newBalance??0}}generatePlainTextReceipt(o){const l=this.settings.printerWidth===58?32:48,t="─".repeat(l),s="═".repeat(l),i=m=>{const E=Math.max(0,Math.floor((l-m.length)/2));return" ".repeat(E)+m},r=(m,E)=>{const c=Math.max(1,l-m.length-E.length);return m+" ".repeat(c)+E};let a=[];a.push(""),this.settings.companyName&&a.push(i(this.settings.companyName)),this.settings.companyPhone&&a.push(i(this.settings.companyPhone)),this.settings.companyAddress&&a.push(i(this.settings.companyAddress)),a.push(""),a.push(s),a.push(i("فاتورة مبيعات")),a.push(i("رقم: "+o.invoiceNumber)),a.push(i(new Date(o.date).toLocaleDateString("ar-EG"))),a.push(t),a.push("العميل: "+o.partnerName),o.partnerPhone&&a.push("الهاتف: "+o.partnerPhone),a.push(t),a.push(r("الصنف","المبلغ")),a.push(t);for(const m of o.items)a.push(m.name),a.push(r(`  ${m.quantity} × ${m.price.toFixed(2)}`,m.total.toFixed(2)));if(a.push(t),a.push(r("المجموع الفرعي:",o.subtotal.toFixed(2))),o.discount&&o.discount>0&&a.push(r("الخصم:","- "+o.discount.toFixed(2))),o.tax&&o.tax>0&&a.push(r("الضريبة:",o.tax.toFixed(2))),a.push(s),a.push(r("الإجمالي:",o.total.toFixed(2)+" ج.م")),a.push(s),o.paidAmount!==void 0){a.push(r("المدفوع:",o.paidAmount.toFixed(2)));const m=o.total-o.paidAmount;m>0&&a.push(r("المتبقي:",m.toFixed(2)))}return a.push(r("طريقة الدفع:",o.paymentMethod==="CASH"?"نقدي":"آجل")),o.notes&&(a.push(t),a.push("ملاحظات: "+o.notes)),a.push(""),a.push(t),a.push(i("شكراً لتعاملكم معنا")),a.push(i(new Date().toLocaleTimeString("ar-EG"))),a.push(""),a.push(""),a.push(""),a.join(`
`)}async generateReceiptImage(o){return new Promise(async(l,t)=>{try{const p="#000000",x="#ffffff",w="#333333";let P=350;P+=250,P+=200,P+=150+o.items.length*200,P+=400,P+=400,P+=250,P+=100;const y=document.createElement("canvas");y.width=576,y.height=P;const D=y.getContext("2d");if(!D){t(new Error("Failed to create canvas context"));return}D.fillStyle=x,D.fillRect(0,0,y.width,y.height);let u=24;const f=(A,$,K,j={})=>{const{size:W=30,color:ce=p,align:ie="right",bold:te=!0,maxWidth:_}=j,Ce=te?"900":"700";if(D.font=`${Ce} ${W}px Arial, Tahoma, sans-serif`,D.fillStyle=ce,D.textAlign=ie,D.textBaseline="top",_){let le=A;for(;D.measureText(le).width>_&&le.length>0;)le=le.slice(0,-1);le!==A&&(le+=".."),D.fillText(le,$,K)}else D.fillText(A,$,K)},v=(A,$=!1)=>{D.strokeStyle=p,D.lineWidth=$?3:1,D.beginPath(),D.moveTo(24,A),D.lineTo(552,A),D.stroke()},C=A=>{D.strokeStyle=p,D.lineWidth=2,D.beginPath(),D.moveTo(24,A),D.lineTo(552,A),D.stroke(),D.beginPath(),D.moveTo(24,A+5),D.lineTo(552,A+5),D.stroke()},F=(A,$,K,j,W=!1)=>{D.strokeStyle=p,D.lineWidth=2,W?(D.fillStyle=p,D.fillRect(A,$,K,j)):D.strokeRect(A,$,K,j)};let V=this.settings.companyName,S=this.settings.companyPhone;if(!V||V==="شركتنا")try{const A=localStorage.getItem("systemConfig");if(A){const $=JSON.parse(A);V=$.companyName||V,S=$.companyPhone||S}}catch{}if(!V||V==="شركتنا")try{for(let A=0;A<localStorage.length;A++){const $=localStorage.key(A);if($&&($.includes("system_config")||$.includes("SYSTEM_CONFIG")||$.includes("settings"))){const K=localStorage.getItem($);if(K)try{const j=JSON.parse(K);if(j.companyName){V=j.companyName,S=j.companyPhone||S;break}}catch{}}}}catch{}V=V||"شركتنا",S=S||"",f(V,576/2,u,{size:42,align:"center"}),u+=60,S&&(f("📞 "+S,576/2,u,{size:26,align:"center",color:w}),u+=45),u+=45,C(u),u+=15;const I=o.type==="SALE"?"فاتورة مبيعات":o.type==="RETURN"?"مرتجع مبيعات":"إيصال";f(I,576/2,u,{size:42,align:"center"}),u+=65,C(u),u+=45,f("رقم الفاتورة:",552,u,{size:30}),f(o.invoiceNumber,24,u,{size:30,align:"left"}),u+=55,f("التاريخ:",552,u,{size:30});const H=new Date(o.date).toLocaleDateString("ar-EG");f(H,24,u,{size:30,align:"left"}),u+=55,f("العميل:",552,u,{size:30}),f(o.partnerName,24,u,{size:30,align:"left",maxWidth:300}),u+=55,o.partnerPhone&&(f("الهاتف:",552,u,{size:26,color:w}),f(o.partnerPhone,24,u,{size:26,align:"left",color:w}),u+=45),u+=45,v(u,!0),u+=45,f("الأصناف",576/2,u,{size:36,align:"center"}),u+=55,v(u),u+=15;for(const A of o.items){const $=A.name||"بدون اسم";f($,552,u,{size:30,maxWidth:508}),u+=55;const K=`${A.quantity} × ${A.price.toFixed(2)}`;f(K,532,u,{size:26,color:w}),f(A.total.toFixed(2)+" ج.م",24,u,{size:36,align:"left"}),u+=70,D.strokeStyle=w,D.lineWidth=1,D.setLineDash([4,4]),D.beginPath(),D.moveTo(24,u),D.lineTo(552,u),D.stroke(),D.setLineDash([]),u+=20}u+=45,v(u,!0),u+=45,f("الإجمالي الفرعي:",552,u,{size:30}),f(o.subtotal.toFixed(2)+" ج.م",24,u,{size:30,align:"left"}),u+=55,o.discount&&o.discount>0&&(f("الخصم:",552,u,{size:30}),f("-"+o.discount.toFixed(2)+" ج.م",24,u,{size:30,align:"left"}),u+=55),o.tax&&o.tax>0&&(f("الضريبة:",552,u,{size:30}),f(o.tax.toFixed(2)+" ج.م",24,u,{size:30,align:"left"}),u+=55),u+=45,F(24,u,528,70),f("الإجمالي:",537,u+18,{size:42}),f(o.total.toFixed(2)+" ج.م",39,u+18,{size:54,align:"left"}),u+=90,u+=45,C(u),u+=15,f("💰 ملخص الحساب",576/2,u,{size:36,align:"center"}),u+=65,v(u),u+=20;const O=o.previousBalance||0;f("الرصيد السابق:",552,u,{size:30,color:w}),f(O.toFixed(2)+" ج.م",24,u,{size:30,align:"left"}),u+=55,f("إجمالي الفاتورة:",552,u,{size:30});const Q=o.type==="RETURN"?"-":"+";f(Q+o.total.toFixed(2)+" ج.م",24,u,{size:30,align:"left"}),u+=55;const G=o.paidAmount||0;f("المدفوع:",552,u,{size:30,color:w}),f("-"+G.toFixed(2)+" ج.م",24,u,{size:30,align:"left",color:w}),u+=55,v(u),u+=15;let oe=o.newBalance;oe===void 0&&(o.type==="RETURN"?oe=O-o.total+G:oe=O+o.total-G),F(24,u,528,60),f("الرصيد الحالي:",537,u+12,{size:36}),f(oe.toFixed(2)+" ج.م",39,u+12,{size:42,align:"left"}),u+=80,u+=45;const R=o.paymentMethod==="CASH"?"💵 نقداً":o.paymentMethod==="CREDIT"?"📅 آجل":"💳 بطاقة";F(24,u,528,50,!0),f(R,576/2,u+10,{size:36,color:x,align:"center"}),u+=70,u+=45,o.salesmanName&&(f("المندوب: "+o.salesmanName,576/2,u,{size:26,align:"center",color:w}),u+=45),f("شكراً لتعاملكم معنا",576/2,u,{size:30,align:"center"}),u+=55,f(new Date().toLocaleString("ar-EG"),576/2,u,{size:26,align:"center",color:w}),u+=55,C(u);const B=u+24+20,L=document.createElement("canvas");L.width=576,L.height=B;const Z=L.getContext("2d");Z&&(Z.fillStyle=x,Z.fillRect(0,0,L.width,L.height),Z.drawImage(y,0,0));const U=(Z?L:y).toDataURL("image/png");l(U)}catch(s){t(s)}})}}const pe=new Ps,hs=({vehicleId:n,preselectedCustomerId:o,preselectedCustomerName:l,onBack:t,onComplete:s})=>{const[i,r]=d.useState(o?2:1),[a,m]=d.useState(!1),[E,c]=d.useState(!1),[N,h]=d.useState([]),[b,p]=d.useState(""),[x,w]=d.useState(o?{id:o,name:l||"",balance:0}:null),[P,y]=d.useState([]),[D,u]=d.useState(""),[f,v]=d.useState([]),[C,F]=d.useState("CASH"),[V,S]=d.useState(0),[I,H]=d.useState(0),[O,Q]=d.useState("CASH"),[G,oe]=d.useState([]),[R,B]=d.useState(""),[L,Z]=d.useState(""),[U,A]=d.useState(!1),[$,K]=d.useState(null),[j,W]=d.useState(!1),[ce,ie]=d.useState(null),[te,_]=d.useState("");d.useEffect(()=>{let g=!1;return(async()=>{m(!0);try{const[ne,Y,ye]=await Promise.all([no.partner.getAll("CUSTOMER"),yn.getInventory(n),ue.getBanks().catch(()=>[])]);if(!g&&(h(ne),y(Y),oe(ye||[]),o&&ne.length>0)){const Pe=ne.find(he=>String(he.id)===String(o));Pe&&w({id:Pe.id,name:Pe.name,balance:Number(Pe.balance)||0})}}catch{}g||m(!1)})(),()=>{g=!0}},[n,o]);const Ce=d.useMemo(()=>b?N.filter(g=>g.name?.includes(b)||g.phone?.includes(b)).slice(0,50):N,[N,b]),le=d.useMemo(()=>{const g=P.filter(T=>T.quantity>0);return D?g.filter(T=>T.productName?.includes(D)||T.barcode?.includes(D)):g},[P,D]),se=d.useMemo(()=>f.reduce((g,T)=>g+T.quantity*T.price,0)-V,[f,V]),ee=d.useMemo(()=>f.reduce((g,T)=>g+T.quantity,0),[f]),be=g=>{w({id:g.id,name:g.name,balance:parseFloat(g.balance)||0}),r(2)},M=g=>{v(T=>{const ne=T.find(Y=>Y.productId===g.productId);return ne?ne.quantity<g.quantity?T.map(Y=>Y.productId===g.productId?{...Y,quantity:Y.quantity+1}:Y):T:[...T,{productId:g.productId,productName:g.productName,quantity:1,price:g.unitPrice||g.price||0,available:g.quantity}]})},k=(g,T)=>{v(ne=>ne.map(Y=>{if(Y.productId===g){const ye=Y.quantity+T;return ye<=0?null:ye>Y.available?Y:{...Y,quantity:ye}}return Y}).filter(Boolean))},z=(g,T)=>{if(T<=0){v(ne=>ne.filter(Y=>Y.productId!==g));return}v(ne=>ne.map(Y=>{if(Y.productId===g){const ye=Math.min(T,Y.available);return{...Y,quantity:ye}}return Y}))},de=(g,T,ne,Y)=>{ie({productId:g,productName:T,maxQty:ne}),_(String(Y))},re=()=>{if(ce){const g=parseInt(te)||0;z(ce.productId,g),ie(null),_("")}},X=ve.useRef(!1),ae=async()=>{if(!(X.current||E)){if(X.current=!0,c(!0),!x){alert("يرجى اختيار العميل"),X.current=!1,c(!1);return}if(f.length===0){alert("يرجى إضافة منتجات للسلة"),X.current=!1,c(!1);return}try{const g=await wn.quickSale("direct-sale",{partnerId:x.id,partnerName:x.name,vehicleId:n,lines:f.map(T=>({productId:T.productId,productName:T.productName,quantity:T.quantity,price:T.price,total:T.quantity*T.price})),total:se,paymentMethod:C,paidAmount:C==="CASH"||C==="BANK"?se:I,discount:V,bankAccountId:C==="BANK"||C==="CREDIT"&&O==="BANK"?R:void 0,notes:L?`رقم التحويل: ${L}`:void 0,creditPaymentType:C==="CREDIT"?O:void 0});if(g.success){const T=C==="CASH"||C==="BANK"?se:I,ne=se-T,Y=x.balance||0,ye=Y+se-T,Pe={id:g.invoiceId,number:g.invoiceNumber||g.invoiceId?.slice(0,8),date:new Date().toISOString(),type:"SALE",partnerId:x.id,partnerName:x.name,previousBalance:Y,newBalance:ye,partnerBalance:Y,lines:f.map(he=>({productId:he.productId,productName:he.productName,quantity:he.quantity,price:he.price,total:he.quantity*he.price})),total:se,discount:V,paymentMethod:C,paidAmount:T};if(K(Pe),y(he=>he.map(to=>{const ko=f.find(Ye=>String(Ye.productId)===String(to.productId));if(ko){const Ye=Math.max(0,(to.quantity||0)-ko.quantity);return{...to,quantity:Ye}}return to})),x&&w({...x,balance:ye}),v([]),g.offline)try{const he=await ue.syncPendingOperations()}catch{}A(!0)}else alert(`فشل في حفظ الفاتورة: ${g.message}`)}catch(g){alert(`فشل في حفظ الفاتورة: ${g.message}`)}finally{X.current=!1,c(!1)}}},me=()=>e.jsxDEV("div",{className:"flex-1 overflow-auto",children:[e.jsxDEV("div",{className:"p-4 sticky top-0 bg-white border-b",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:386,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",placeholder:"بحث عن عميل...",value:b,onChange:g=>p(g.target.value),className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 outline-none text-lg"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:387,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:385,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:384,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-2",children:[N.length>0&&e.jsxDEV("div",{className:"text-center text-sm text-slate-500 mb-2",children:["عرض ",Ce.length," من ",N.length," عميل"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:401,columnNumber:21},void 0),Ce.map(g=>{const T=parseFloat(g.balance)||0;return e.jsxDEV("button",{onClick:()=>be(g),className:"w-full p-4 bg-white rounded-xl border-2 border-slate-100 hover:border-indigo-300 flex items-center gap-3 transition-all",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${T>0?"bg-rose-100":T<0?"bg-emerald-100":"bg-indigo-100"}`,children:e.jsxDEV(ro,{className:`w-6 h-6 ${T>0?"text-rose-600":T<0?"text-emerald-600":"text-indigo-600"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:416,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:414,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1 text-right",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:g.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:420,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[g.phone&&e.jsxDEV("span",{className:"text-slate-500",children:g.phone},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:423,columnNumber:41},void 0),T!==0&&e.jsxDEV("span",{className:`font-bold ${T>0?"text-rose-600":"text-emerald-600"}`,children:["رصيد: ",T.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:426,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:421,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:419,columnNumber:29},void 0),e.jsxDEV(st,{className:"w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:433,columnNumber:29},void 0)]},g.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:409,columnNumber:25},void 0)}),!a&&N.length===0&&e.jsxDEV("div",{className:"text-center py-8 text-slate-500",children:[e.jsxDEV(Uo,{className:"w-12 h-12 mx-auto text-amber-500 mb-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:441,columnNumber:25},void 0),e.jsxDEV("p",{className:"font-bold text-lg mb-2",children:"لا يوجد عملاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:442,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm",children:"يرجى مزامنة البيانات من الإعدادات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:443,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:440,columnNumber:21},void 0),!a&&N.length>0&&Ce.length===0&&b&&e.jsxDEV("div",{className:"text-center py-8 text-slate-500",children:[e.jsxDEV(Ae,{className:"w-10 h-10 mx-auto text-slate-300 mb-2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:450,columnNumber:25},void 0),e.jsxDEV("p",{children:['لا توجد نتائج للبحث "',b,'"']},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:451,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:449,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:398,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:382,columnNumber:9},void 0),je=()=>e.jsxDEV("div",{className:"flex-1 overflow-auto pb-24",children:[e.jsxDEV("div",{className:"p-4 sticky top-0 bg-white border-b z-10",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:463,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",placeholder:"بحث عن منتج...",value:D,onChange:g=>u(g.target.value),className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 outline-none text-lg"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:464,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:462,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:461,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 grid grid-cols-2 gap-3",children:le.map(g=>{const T=f.find(ne=>ne.productId===g.productId);return e.jsxDEV("div",{className:`bg-white rounded-xl border-2 p-3 transition-all ${T?"border-emerald-400 bg-emerald-50":"border-slate-100"}`,children:[e.jsxDEV("div",{className:"text-center mb-2",children:e.jsxDEV(Xe,{className:"w-10 h-10 text-slate-300 mx-auto"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:485,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:484,columnNumber:29},void 0),e.jsxDEV("p",{className:"font-bold text-slate-800 text-xs text-center line-clamp-3 min-h-[2.75rem] leading-snug",children:g.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:487,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-indigo-600 font-bold text-center mt-1",children:[(g.unitPrice||g.price||0).toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:490,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-400 text-xs text-center",children:["متوفر: ",g.quantity]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:493,columnNumber:29},void 0),T?e.jsxDEV("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsxDEV("button",{onClick:()=>k(g.productId,-1),className:"w-10 h-10 rounded-full bg-red-100 text-red-600 flex items-center justify-center active:scale-95",children:e.jsxDEV(dt,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:503,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:499,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>de(g.productId,g.productName,g.quantity,T.quantity),className:"font-bold text-lg w-12 h-10 text-center bg-slate-100 rounded-lg border-2 border-dashed border-indigo-300 text-indigo-700 active:bg-indigo-100",children:T.quantity},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:506,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>k(g.productId,1),className:"w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center active:scale-95",disabled:T.quantity>=g.quantity,children:e.jsxDEV(Ke,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:517,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:512,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:498,columnNumber:33},void 0):e.jsxDEV("button",{onClick:()=>M(g),className:"w-full mt-3 py-2 rounded-lg bg-indigo-600 text-white font-medium flex items-center justify-center gap-1",children:[e.jsxDEV(Ke,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:525,columnNumber:37},void 0),"إضافة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:521,columnNumber:33},void 0)]},g.productId,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:479,columnNumber:25},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:475,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:459,columnNumber:9},void 0),lo=()=>e.jsxDEV("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border-2 border-slate-100",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 mb-3",children:"ملخص الطلب"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:540,columnNumber:17},void 0),f.map(g=>e.jsxDEV("div",{className:"flex justify-between py-2 border-b border-slate-100 last:border-0",children:[e.jsxDEV("span",{className:"text-slate-600",children:[g.productName," × ",g.quantity]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:543,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold",children:[(g.quantity*g.price).toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:544,columnNumber:25},void 0)]},g.productId,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:542,columnNumber:21},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:539,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-4 text-white",children:[e.jsxDEV("h3",{className:"font-bold text-slate-200 mb-3 flex items-center gap-2",children:[e.jsxDEV(ro,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:552,columnNumber:21},void 0),"رصيد العميل: ",x?.name]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:551,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-600",children:[e.jsxDEV("span",{className:"text-slate-300",children:"الرصيد السابق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:558,columnNumber:25},void 0),e.jsxDEV("span",{className:`font-bold text-lg ${(x?.balance||0)>0?"text-rose-400":(x?.balance||0)<0?"text-emerald-400":"text-white"}`,children:[(x?.balance||0).toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:559,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:557,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-600",children:[e.jsxDEV("span",{className:"text-slate-300",children:[C==="CREDIT"?"+":""," قيمة الفاتورة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:566,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold text-lg text-amber-400",children:[se.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:569,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:565,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 pt-3",children:[e.jsxDEV("span",{className:"text-white font-bold",children:"الرصيد الجديد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:576,columnNumber:25},void 0),(()=>{const g=x?.balance||0,T=C==="CREDIT"?I:se,ne=g+se-T;return e.jsxDEV("span",{className:`font-black text-xl ${ne>0?"text-rose-400":ne<0?"text-emerald-400":"text-white"}`,children:[ne.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:587,columnNumber:33},void 0)})()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:575,columnNumber:21},void 0),e.jsxDEV("div",{className:`mt-2 px-3 py-2 rounded-lg text-xs ${C==="CREDIT"?"bg-amber-500/20 text-amber-200":"bg-emerald-500/20 text-emerald-200"}`,children:C==="CREDIT"?"⚠️ العميل سيدفع لاحقاً (آجل) - سيضاف المبلغ إلى رصيده":"✅ الدفع نقدي - لن يتغير رصيد العميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:595,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:555,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:550,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border-2 border-slate-100",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 mb-3",children:"طريقة الدفع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:606,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:()=>{F("CASH"),H(0)},className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${C==="CASH"?"border-emerald-500 bg-emerald-50":"border-slate-200"}`,children:[e.jsxDEV(mn,{className:`w-8 h-8 ${C==="CASH"?"text-emerald-600":"text-slate-400"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:615,columnNumber:25},void 0),e.jsxDEV("span",{className:`font-bold ${C==="CASH"?"text-emerald-600":"text-slate-600"}`,children:"نقداً"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:616,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:608,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>F("CREDIT"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${C==="CREDIT"?"border-amber-500 bg-amber-50":"border-slate-200"}`,children:[e.jsxDEV(El,{className:`w-8 h-8 ${C==="CREDIT"?"text-amber-600":"text-slate-400"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:627,columnNumber:25},void 0),e.jsxDEV("span",{className:`font-bold ${C==="CREDIT"?"text-amber-600":"text-slate-600"}`,children:"آجل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:628,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:620,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>F("BANK"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${C==="BANK"?"border-blue-500 bg-blue-50":"border-slate-200"}`,children:[e.jsxDEV(Qn,{className:`w-8 h-8 ${C==="BANK"?"text-blue-600":"text-slate-400"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:639,columnNumber:25},void 0),e.jsxDEV("span",{className:`font-bold ${C==="BANK"?"text-blue-600":"text-slate-600"}`,children:"بنوك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:640,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:632,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:607,columnNumber:17},void 0),C==="BANK"&&e.jsxDEV("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🏦 اختر البنك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:649,columnNumber:25},void 0),e.jsxDEV("select",{value:R,onChange:g=>B(g.target.value),className:"w-full p-3 text-lg font-bold text-right border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none bg-white",children:[e.jsxDEV("option",{value:"",children:"اختر البنك..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:657,columnNumber:29},void 0),G.map(g=>e.jsxDEV("option",{value:g.id,children:[g.name," ",g.accountNumber?`(${g.accountNumber})`:""]},g.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:659,columnNumber:33},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:652,columnNumber:25},void 0),G.length===0&&e.jsxDEV("p",{className:"text-sm text-blue-600 mt-2",children:"لا توجد حسابات بنكية. أضف بنوك من إعدادات البنوك."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:665,columnNumber:29},void 0),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🔢 رقم التحويل / المرجع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:671,columnNumber:29},void 0),e.jsxDEV("input",{type:"text",value:L,onChange:g=>Z(g.target.value),placeholder:"أدخل رقم العملية أو التحويل...",className:"w-full p-3 text-lg font-bold text-right border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:674,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:670,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:648,columnNumber:21},void 0),C==="CREDIT"&&e.jsxDEV("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("label",{className:"block text-amber-700 font-medium mb-2",children:"💳 طريقة استلام المبلغ المدفوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:690,columnNumber:29},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>{Q("CASH"),B("")},className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${O==="CASH"?"border-emerald-500 bg-emerald-100 text-emerald-700":"border-amber-300 text-amber-700"}`,children:[e.jsxDEV(mn,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:702,columnNumber:37},void 0),e.jsxDEV("span",{className:"font-bold",children:"نقداً"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:703,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:694,columnNumber:33},void 0),e.jsxDEV("button",{type:"button",onClick:()=>Q("BANK"),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${O==="BANK"?"border-blue-500 bg-blue-100 text-blue-700":"border-amber-300 text-amber-700"}`,children:[e.jsxDEV(Qn,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:713,columnNumber:37},void 0),e.jsxDEV("span",{className:"font-bold",children:"تحويل بنكي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:714,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:705,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:693,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:689,columnNumber:25},void 0),O==="BANK"&&e.jsxDEV("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🏦 اختر البنك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:722,columnNumber:33},void 0),e.jsxDEV("select",{value:R,onChange:g=>B(g.target.value),className:"w-full p-3 text-lg font-bold text-right border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none bg-white",children:[e.jsxDEV("option",{value:"",children:"اختر البنك..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:730,columnNumber:37},void 0),G.map(g=>e.jsxDEV("option",{value:g.id,children:[g.name," ",g.accountNumber?`(${g.accountNumber})`:""]},g.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:732,columnNumber:41},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:725,columnNumber:33},void 0),e.jsxDEV("div",{className:"mt-3",children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🔢 رقم التحويل / المرجع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:738,columnNumber:37},void 0),e.jsxDEV("input",{type:"text",value:L,onChange:g=>Z(g.target.value),placeholder:"أدخل رقم العملية أو التحويل...",className:"w-full p-3 text-lg font-bold text-right border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:741,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:737,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:721,columnNumber:29},void 0),e.jsxDEV("label",{className:"block text-amber-700 font-medium mb-2",children:"💰 المبلغ المدفوع (يمكن دفع جزء من الرصيد السابق)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:752,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"number",value:I||"",onChange:g=>H(Math.max(0,Number(g.target.value)||0)),placeholder:"0",className:"flex-1 p-3 text-lg font-bold text-right border-2 border-amber-300 rounded-lg focus:border-amber-500 focus:outline-none",min:0},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:756,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-amber-700 font-bold",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:764,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:755,columnNumber:25},void 0),e.jsxDEV("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxDEV("div",{className:"flex justify-between text-slate-600",children:[e.jsxDEV("span",{children:"الرصيد السابق:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:768,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold",children:[(x?.balance||0).toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:769,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:767,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between text-amber-700",children:[e.jsxDEV("span",{children:"+ قيمة الفاتورة:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:772,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold",children:["+",se.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:773,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:771,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between text-emerald-600",children:[e.jsxDEV("span",{children:["- المدفوع ",O==="BANK"?"(بنك)":"(نقداً)",":"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:776,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold",children:["-",I.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:777,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:775,columnNumber:29},void 0),e.jsxDEV("div",{className:"border-t border-amber-300 pt-1 flex justify-between text-amber-800 font-bold",children:[e.jsxDEV("span",{children:"الرصيد الجديد:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:780,columnNumber:33},void 0),e.jsxDEV("span",{children:[((x?.balance||0)+se-I).toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:781,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:779,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:766,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:687,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:605,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border-2 border-slate-100 mt-4",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 mb-2",children:"خصم إضافي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:790,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:"number",min:"0",value:V||"",onChange:g=>S(Number(g.target.value)),className:"w-full p-3 pl-12 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none text-xl font-bold",placeholder:"0.00"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:792,columnNumber:21},void 0),e.jsxDEV("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:800,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:791,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:789,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 rounded-xl p-5 text-white mt-4",children:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"text-indigo-200",children:"الإجمالي بعد الخصم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:807,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-3xl font-black",children:[se.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:808,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:806,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:805,columnNumber:13},void 0),e.jsxDEV("button",{onClick:ae,disabled:E||f.length===0,className:"w-full py-5 rounded-xl bg-emerald-500 text-white font-bold text-xl flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/30 disabled:opacity-50 mt-4",children:E?e.jsxDEV("span",{children:"جاري الحفظ..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:819,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(un,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:822,columnNumber:25},void 0),"تأكيد الفاتورة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:821,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:813,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:537,columnNumber:9},void 0);return e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex flex-col",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-700 text-white px-4 py-5",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:i>1&&!o?()=>r(i-1):t,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:839,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:835,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"بيع سريع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:842,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-emerald-200 text-sm",children:[i===1&&"اختر العميل",i===2&&`${x?.name||""} - أضف المنتجات`,i===3&&"تأكيد الفاتورة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:843,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:841,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:834,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex gap-2 mt-4",children:[1,2,3].map(g=>e.jsxDEV("div",{className:`flex-1 h-1.5 rounded-full ${g<=i?"bg-white":"bg-white/30"}`},g,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:854,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:852,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:833,columnNumber:13},void 0),i===1&&me(),i===2&&je(),i===3&&lo(),i===2&&f.length>0&&e.jsxDEV("div",{className:"fixed bottom-20 left-4 right-4 z-50",children:e.jsxDEV("button",{onClick:()=>r(3),className:"w-full py-4 rounded-xl bg-emerald-500 text-white font-bold text-lg flex items-center justify-center gap-3 shadow-xl shadow-emerald-500/30",children:[e.jsxDEV(vn,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:874,columnNumber:25},void 0),e.jsxDEV("span",{children:["متابعة (",ee," منتج)"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:875,columnNumber:25},void 0),e.jsxDEV("span",{className:"bg-white/20 px-3 py-1 rounded-lg",children:[se.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:876,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:870,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:869,columnNumber:17},void 0),ce&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4 pb-24",children:e.jsxDEV("div",{className:"bg-white w-full max-w-sm rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-4 text-white",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("h3",{className:"font-bold text-lg",children:"تعديل الكمية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:890,columnNumber:33},void 0),e.jsxDEV("button",{onClick:()=>{ie(null),_("")},className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsxDEV(Go,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:895,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:891,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:889,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-indigo-100 text-sm mt-1",children:ce.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:898,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:888,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-6 space-y-4",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-slate-500 text-sm mb-2",children:["الحد الأقصى: ",ce.maxQty]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:904,columnNumber:33},void 0),e.jsxDEV("input",{type:"number",inputMode:"numeric",value:te,onChange:g=>_(g.target.value),placeholder:"أدخل الكمية",autoFocus:!0,className:"w-full text-center text-4xl font-black py-4 border-2 border-indigo-200 rounded-2xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none",max:ce.maxQty,min:0},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:905,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:903,columnNumber:29},void 0),e.jsxDEV("div",{className:"grid grid-cols-4 gap-2",children:[10,25,50,100].filter(g=>g<=ce.maxQty).map(g=>e.jsxDEV("button",{onClick:()=>_(String(g)),className:"py-3 rounded-xl bg-slate-100 text-slate-700 font-bold active:bg-indigo-100 active:text-indigo-700 transition-colors",children:g},g,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:921,columnNumber:37},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:919,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex gap-3 pt-2",children:[e.jsxDEV("button",{onClick:()=>{ie(null),_("")},className:"flex-1 py-4 rounded-xl border-2 border-slate-200 text-slate-600 font-bold text-lg",children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:933,columnNumber:33},void 0),e.jsxDEV("button",{onClick:re,className:"flex-1 py-4 rounded-xl bg-indigo-600 text-white font-bold text-lg flex items-center justify-center gap-2",children:[e.jsxDEV(un,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:943,columnNumber:37},void 0),"تأكيد"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:939,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:932,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:902,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:886,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:885,columnNumber:17},void 0),U&&$&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white w-full max-w-sm rounded-2xl overflow-hidden",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-6 text-center text-white",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsxDEV(oo,{className:"w-10 h-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:960,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:959,columnNumber:29},void 0),e.jsxDEV("h2",{className:"text-xl font-bold",children:"تم حفظ الفاتورة بنجاح!"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:962,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-emerald-100 text-sm mt-1",children:["رقم الفاتورة: ",$.number]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:963,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:958,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[e.jsxDEV("span",{className:"text-slate-500",children:"العميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:971,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold",children:$.partnerName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:972,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:970,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[e.jsxDEV("span",{className:"text-slate-500",children:"عدد الأصناف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:975,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold",children:$.lines?.length||0},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:976,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:974,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[e.jsxDEV("span",{className:"text-slate-500",children:"الإجمالي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:979,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-emerald-600 text-lg",children:[$.total?.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:980,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:978,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2",children:[e.jsxDEV("span",{className:"text-slate-500",children:"طريقة الدفع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:985,columnNumber:33},void 0),e.jsxDEV("span",{className:`font-bold px-3 py-1 rounded-full text-sm ${$.paymentMethod==="CASH"?"bg-emerald-100 text-emerald-700":$.paymentMethod==="BANK"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:$.paymentMethod==="CASH"?"نقدي":$.paymentMethod==="BANK"?"بنك":"آجل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:986,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:984,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:969,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-4 space-y-3 bg-slate-50",children:[e.jsxDEV("button",{onClick:async()=>{W(!0);try{const g=await pe.invoiceToReceipt($);g.previousBalance=$.partnerBalance||0,g.newBalance=$.newBalance||0;const T=await pe.smartPrint(g);T.success||alert("فشل في الطباعة: "+T.message)}catch(g){alert("خطأ في الطباعة: "+g.message)}W(!1),A(!1),s($.id)},disabled:j,className:"w-full py-4 rounded-xl bg-indigo-600 text-white font-bold text-lg flex items-center justify-center gap-3 disabled:opacity-50",children:j?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1025,columnNumber:41},void 0),"جاري الطباعة..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1024,columnNumber:37},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Qe,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1030,columnNumber:41},void 0),"طباعة الفاتورة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1029,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1e3,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>{A(!1),s($.id)},disabled:j,className:"w-full py-3 rounded-xl border-2 border-slate-200 text-slate-600 font-bold flex items-center justify-center gap-2",children:"تخطي الطباعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:1035,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:999,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:956,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:955,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedQuickSale.tsx",lineNumber:831,columnNumber:9},void 0)},gs=({vehicleId:n,vehicleName:o,onBack:l})=>{const[t,s]=d.useState([]),[i,r]=d.useState(!0),[a,m]=d.useState("");d.useEffect(()=>{E()},[n]);const E=async()=>{r(!0);try{const b=await yn.getInventory(n);s(b.map(p=>({productId:p.productId,productName:p.productName,quantity:p.quantity||0,price:p.price,minStock:p.minStock||5})))}catch{}r(!1)},c=d.useMemo(()=>a?t.filter(b=>b.productName?.includes(a)):t,[t,a]),N=d.useMemo(()=>{const b=t.length,p=t.filter(P=>P.quantity>0&&P.quantity<=(P.minStock||5)).length,x=t.filter(P=>P.quantity<=0).length,w=t.reduce((P,y)=>P+y.quantity*(y.price||0),0);return{total:b,lowStock:p,outOfStock:x,totalValue:w}},[t]),h=async()=>{const b=`
            <div dir="rtl" style="font-family: Arial, sans-serif; padding: 10px;">
                <h1 style="text-align: center; margin-bottom: 5px;">جرد السيارة</h1>
                <h3 style="text-align: center; color: #666; margin-top: 0;">${o||"سيارتي"}</h3>
                <p style="text-align: center; color: #888;">التاريخ: ${new Date().toLocaleDateString("ar-EG")}</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">#</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">المنتج</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">الكمية</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">السعر</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">الإجمالي</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${t.map((p,x)=>`
                            <tr style="${p.quantity<=0?"color: red;":p.quantity<=(p.minStock||5)?"color: orange;":""}">
                                <td style="border: 1px solid #ccc; padding: 8px;">${x+1}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${p.productName}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${p.quantity}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${p.price?.toLocaleString("ar-EG")||"-"}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${((p.quantity||0)*(p.price||0)).toLocaleString("ar-EG")}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
                <p style="margin-top: 15px; text-align: left; font-weight: bold;">
                    إجمالي القيمة: ${N.totalValue.toLocaleString("ar-EG")} ج.م
                </p>
            </div>
        `;await pe.printGenericHTML(b,`جرد السيارة - ${o||""}`)};return i?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV(De,{className:"w-8 h-8 text-indigo-600 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:114,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:113,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:l,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:125,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:124,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"جرد السيارة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:128,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-blue-200 text-sm",children:o||"سيارتي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:129,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:127,columnNumber:21},void 0),e.jsxDEV("button",{onClick:E,className:"p-2 rounded-full hover:bg-white/10",children:e.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:132,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:131,columnNumber:21},void 0),e.jsxDEV("button",{onClick:h,className:"p-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:135,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:134,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:123,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:122,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 grid grid-cols-3 gap-3",children:[e.jsxDEV("div",{className:"bg-white rounded-xl p-3 text-center border border-slate-100",children:[e.jsxDEV(Xe,{className:"w-6 h-6 text-indigo-500 mx-auto mb-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:143,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-black text-slate-800",children:N.total},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:144,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:"إجمالي الأصناف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:145,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:142,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-amber-50 rounded-xl p-3 text-center border border-amber-100",children:[e.jsxDEV(Nl,{className:"w-6 h-6 text-amber-500 mx-auto mb-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-black text-amber-600",children:N.lowStock},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:149,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-amber-600",children:"مخزون منخفض"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:150,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:147,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-red-50 rounded-xl p-3 text-center border border-red-100",children:[e.jsxDEV(at,{className:"w-6 h-6 text-red-500 mx-auto mb-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:153,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-black text-red-600",children:N.outOfStock},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:154,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-red-600",children:"نفذ من المخزن"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:155,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:152,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:141,columnNumber:13},void 0),e.jsxDEV("div",{className:"mx-4 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-4 text-white flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(xl,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:162,columnNumber:21},void 0),e.jsxDEV("span",{children:"قيمة المخزون"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:163,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:161,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-2xl font-black",children:[N.totalValue.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:171,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",placeholder:"بحث عن منتج...",value:a,onChange:b=>m(b.target.value),className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:172,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:170,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:169,columnNumber:13},void 0),e.jsxDEV("div",{className:"px-4 pb-4 space-y-2",children:c.length===0?e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(Xe,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:186,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-500",children:"لا توجد منتجات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:187,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:185,columnNumber:21},void 0):c.map((b,p)=>e.jsxDEV("div",{className:`bg-white rounded-xl p-4 border-2 flex items-center gap-3 ${b.quantity<=0?"border-red-200 bg-red-50/50":b.quantity<=(b.minStock||5)?"border-amber-200 bg-amber-50/50":"border-slate-100"}`,children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b.quantity<=0?"bg-red-100":b.quantity<=(b.minStock||5)?"bg-amber-100":"bg-indigo-100"}`,children:e.jsxDEV(Xe,{className:`w-6 h-6 ${b.quantity<=0?"text-red-500":b.quantity<=(b.minStock||5)?"text-amber-500":"text-indigo-500"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:207,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:201,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"font-bold text-slate-800 truncate",children:b.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:217,columnNumber:33},void 0),b.price&&e.jsxDEV("p",{className:"text-slate-500 text-sm",children:[b.price.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:219,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:216,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:`text-2xl font-black ${b.quantity<=0?"text-red-600":b.quantity<=(b.minStock||5)?"text-amber-600":"text-slate-800"}`,children:b.quantity},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:225,columnNumber:33},void 0),b.quantity<=0&&e.jsxDEV("span",{className:"text-xs text-red-500",children:"نفذ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:234,columnNumber:37},void 0),b.quantity>0&&b.quantity<=(b.minStock||5)&&e.jsxDEV("span",{className:"text-xs text-amber-500",children:"منخفض"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:237,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:224,columnNumber:29},void 0)]},b.productId,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:191,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:183,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SimplifiedInventory.tsx",lineNumber:120,columnNumber:9},void 0)},vs=({salesmanId:n,vehicleId:o,onBack:l,onSuccess:t})=>{const[s,i]=d.useState(!1),[r,a]=d.useState([]),[m,E]=d.useState([]),[c,N]=d.useState(null),[h,b]=d.useState(!1),[p,x]=d.useState({name:"",phone:"",phone2:"",address:"",routeId:"",selectedSalesmanId:n||"",notes:"",latitude:null,longitude:null});d.useEffect(()=>{w(),P()},[]);const w=async()=>{try{const u=await Sn.getAll({vehicleId:o});a(u),u.length>0&&x(f=>({...f,routeId:u[0].id}))}catch{}},P=async()=>{try{const{unifiedStorage:u}=await qo(async()=>{const{unifiedStorage:v}=await import("./index-BIcNJgNM.js").then(C=>C.a1);return{unifiedStorage:v}},__vite__mapDeps([1,2,3,4,5,6]));await u.initialize();const f=await u.getSalesmen();if(E(Array.isArray(f)?f:[]),n&&Array.isArray(f)&&f.length>0){const v=f.find(C=>String(C.id)===String(n)||C.name===n);v&&x(C=>({...C,selectedSalesmanId:v.id}))}}catch{}},y=()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(u=>{x(f=>({...f,latitude:u.coords.latitude,longitude:u.coords.longitude}))},u=>{N("تعذر تحديد الموقع")})},D=async()=>{if(!p.name.trim()){N("يرجى إدخال اسم العميل");return}i(!0),N(null);try{const u={name:p.name,phone:p.phone,phone2:p.phone2,address:p.address,type:"CUSTOMER",isCustomer:!0,isSupplier:!1,salesmanId:p.selectedSalesmanId||n,routeId:p.routeId,notes:p.notes,latitude:p.latitude,longitude:p.longitude,balance:0},f=await no.partner.create(u);b(!0),setTimeout(()=>{t(f.id)},1500)}catch(u){N(u.message||"فشل في حفظ العميل")}i(!1)};return h?e.jsxDEV("div",{className:"min-h-screen bg-emerald-50 flex items-center justify-center",dir:"rtl",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(oo,{className:"w-10 h-10 text-white"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:152,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:151,columnNumber:21},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold text-emerald-700",children:"تم تسجيل العميل بنجاح"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:154,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:150,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:149,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:l,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:166,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:165,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"تسجيل عميل جديد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:169,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-blue-200 text-sm",children:"إضافة عميل لخط السير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:170,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:168,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:164,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:163,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-4",children:[c&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsxDEV(Uo,{className:"w-5 h-5 text-red-500 flex-shrink-0"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:180,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-red-700",children:c},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:181,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:179,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(ro,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:188,columnNumber:25},void 0),"اسم العميل *"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:187,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:p.name,onChange:u=>x(f=>({...f,name:u.target.value})),placeholder:"أدخل اسم العميل",className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none text-lg"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:191,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:186,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(hn,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:203,columnNumber:25},void 0),"رقم الهاتف"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:202,columnNumber:21},void 0),e.jsxDEV("input",{type:"tel",value:p.phone,onChange:u=>x(f=>({...f,phone:u.target.value})),placeholder:"رقم الهاتف الأساسي",className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none text-lg mb-2",dir:"ltr"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:206,columnNumber:21},void 0),e.jsxDEV("input",{type:"tel",value:p.phone2,onChange:u=>x(f=>({...f,phone2:u.target.value})),placeholder:"رقم هاتف إضافي (اختياري)",className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none",dir:"ltr"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:214,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:201,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(Do,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:227,columnNumber:25},void 0),"العنوان"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:226,columnNumber:21},void 0),e.jsxDEV("textarea",{value:p.address,onChange:u=>x(f=>({...f,address:u.target.value})),placeholder:"أدخل عنوان العميل",rows:2,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none resize-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:230,columnNumber:21},void 0),e.jsxDEV("button",{onClick:y,className:"mt-2 flex items-center gap-2 text-indigo-600 font-medium",children:[e.jsxDEV(gn,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:241,columnNumber:25},void 0),p.latitude?"تم تحديد الموقع ✓":"تحديد الموقع الحالي"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:237,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:225,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:"خط السير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:248,columnNumber:21},void 0),e.jsxDEV("select",{value:p.routeId,onChange:u=>x(f=>({...f,routeId:u.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none bg-white",children:[e.jsxDEV("option",{value:"",children:"-- اختر خط السير --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:256,columnNumber:25},void 0),r.map(u=>e.jsxDEV("option",{value:u.id,children:u.routeName||`خط ${u.id.slice(0,6)}`},u.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:258,columnNumber:29},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:251,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:247,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(eo,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:268,columnNumber:25},void 0),"مندوب المبيعات المسؤول"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:267,columnNumber:21},void 0),e.jsxDEV("select",{value:p.selectedSalesmanId,onChange:u=>x(f=>({...f,selectedSalesmanId:u.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none bg-white",children:[e.jsxDEV("option",{value:"",children:"-- اختر المندوب --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:276,columnNumber:25},void 0),m.map(u=>e.jsxDEV("option",{value:u.id,children:u.employeeName||u.name||`مندوب ${String(u.id).slice(0,6)}`},u.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:278,columnNumber:29},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:271,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:266,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:"ملاحظات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:287,columnNumber:21},void 0),e.jsxDEV("textarea",{value:p.notes,onChange:u=>x(f=>({...f,notes:u.target.value})),placeholder:"أي ملاحظات إضافية عن العميل",rows:2,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-indigo-500 outline-none resize-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:290,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:286,columnNumber:17},void 0),e.jsxDEV("button",{onClick:D,disabled:s||!p.name.trim(),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-bold text-xl flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/30 disabled:opacity-50",children:s?e.jsxDEV("span",{children:"جاري الحفظ..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:306,columnNumber:25},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Fo,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:309,columnNumber:29},void 0),"حفظ العميل"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:308,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:300,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/NewCustomerForm.tsx",lineNumber:161,columnNumber:9},void 0)},Ds=({vehicleId:n,salesmanId:o,onBack:l,onComplete:t})=>{const[s,i]=d.useState(""),[r,a]=d.useState([]),[m,E]=d.useState(null),[c,N]=d.useState([]),[h,b]=d.useState(""),[p,x]=d.useState(0),[w,P]=d.useState(!1),[y,D]=d.useState(!0);d.useEffect(()=>{u()},[]);const u=async()=>{D(!0);try{let O=(await ue.getInvoices()).filter(Q=>Q.type==="INVOICE_SALE"||Q.type==="SALE_INVOICE");if(o)try{const Q=await no.partner.getAll("CUSTOMER"),G=new Set(Q.map(oe=>String(oe.id)));O=O.filter(oe=>G.has(String(oe.partnerId))||oe.salesmanId===o)}catch{}a(O)}catch{}D(!1)},f=d.useMemo(()=>s?r.filter(H=>H.partnerName?.includes(s)||H.id?.includes(s)).slice(0,20):r.slice(0,20),[r,s]),v=H=>{E(H);let O=H.lines||[];if(typeof H.linesJson=="string")try{O=JSON.parse(H.linesJson)}catch{O=[]}else if(typeof H.lines=="string")try{O=JSON.parse(H.lines)}catch{O=[]}const Q=O.map(G=>({productId:G.productId,productName:G.productName,originalQty:G.quantity||G.qty||0,returnQty:0,price:G.price||0}));N(Q)},C=(H,O)=>{N(Q=>Q.map(G=>{if(G.productId===H){const oe=Math.max(0,Math.min(G.originalQty,G.returnQty+O));return{...G,returnQty:oe}}return G}))},F=(H,O)=>{N(Q=>Q.map(G=>{if(G.productId===H){const oe=Math.max(0,Math.min(G.originalQty,O));return{...G,returnQty:oe}}return G}))},V=d.useMemo(()=>Math.max(0,c.reduce((H,O)=>H+O.returnQty*O.price,0)-p),[c,p]),S=c.some(H=>H.returnQty>0),I=async()=>{if(!(!S||!m)){P(!0);try{const H={partnerId:m.partnerId,partnerName:m.partnerName,vehicleId:n,referenceInvoiceId:m.id,lines:c.filter(Q=>Q.returnQty>0).map(Q=>({productId:Q.productId,productName:Q.productName,quantity:Q.returnQty,price:Q.price,total:Q.returnQty*Q.price})),total:V,discount:p,notes:h},O=await wn.quickSale("return",{...H,paymentMethod:"RETURN",paidAmount:0});O.success&&t(O.invoiceId)}catch{}P(!1)}};return m?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 pb-32",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-amber-600 to-orange-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:()=>E(null),className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:256,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:255,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:["مرتجع: ",m.partnerName]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:259,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-amber-200 text-sm",children:"حدد الأصناف للإرجاع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:260,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:258,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:254,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:253,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-3",children:[c.length===0&&e.jsxDEV("div",{className:"text-center py-8 text-slate-500",children:[e.jsxDEV(Xe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:269,columnNumber:25},void 0),e.jsxDEV("p",{children:"لا توجد أصناف في هذه الفاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:270,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm text-slate-400 mt-1",children:"اختر فاتورة أخرى"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:271,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:268,columnNumber:21},void 0),c.map(H=>e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:H.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:278,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-sm text-slate-500",children:["الكمية المباعة: ",H.originalQty," | السعر: ",H.price.toLocaleString("ar-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:279,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:277,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:276,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:()=>C(H.productId,-1),className:"w-12 h-12 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center text-2xl font-bold",children:"-"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:285,columnNumber:29},void 0),e.jsxDEV("input",{type:"number",value:H.returnQty,onChange:O=>F(H.productId,parseInt(O.target.value)||0),className:"flex-1 text-center text-2xl font-bold py-2 border-2 border-slate-200 rounded-xl",min:0,max:H.originalQty},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:291,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>C(H.productId,1),className:"w-12 h-12 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center text-2xl font-bold",children:"+"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:299,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:284,columnNumber:25},void 0)]},H.productId,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:275,columnNumber:21},void 0)),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:"سبب الإرجاع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:311,columnNumber:21},void 0),e.jsxDEV("textarea",{value:h,onChange:H=>b(H.target.value),placeholder:"أدخل سبب الإرجاع...",rows:2,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-amber-500 outline-none resize-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:314,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:310,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:"خصم إضافي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:325,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"number",value:p||"",onChange:H=>x(Math.max(0,Number(H.target.value)||0)),placeholder:"0",min:0,className:"flex-1 px-4 py-3 text-lg font-bold text-right rounded-lg border-2 border-slate-200 focus:border-amber-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:329,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-slate-600 font-bold",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:337,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:328,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:324,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:266,columnNumber:13},void 0),S&&e.jsxDEV("div",{className:"fixed bottom-20 left-0 right-0 bg-white border-t border-slate-200 p-4 shadow-xl rounded-t-2xl",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("span",{className:"text-slate-600",children:"إجمالي المرتجع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:346,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-2xl font-black text-amber-600",children:[V.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:347,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:345,columnNumber:21},void 0),e.jsxDEV("button",{onClick:I,disabled:w,className:"w-full py-4 rounded-xl bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold text-lg flex items-center justify-center gap-2 shadow-lg",children:w?"جاري الحفظ...":e.jsxDEV(e.Fragment,{children:[e.jsxDEV(pl,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:358,columnNumber:33},void 0),"تأكيد المرتجع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:357,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:351,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:344,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:251,columnNumber:9},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-amber-600 to-orange-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:l,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:198,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:197,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"مرتجع مبيعات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:201,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-amber-200 text-sm",children:"اختر الفاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:202,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:200,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:196,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:195,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:210,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:s,onChange:H=>i(H.target.value),placeholder:"بحث برقم الفاتورة أو اسم العميل...",className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-amber-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:211,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:209,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:208,columnNumber:17},void 0),e.jsxDEV("div",{className:"px-4 space-y-2",children:f.map(H=>e.jsxDEV("button",{onClick:()=>v(H),className:"w-full bg-white rounded-xl p-4 border border-slate-200 flex items-center gap-3 text-right",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:e.jsxDEV(Je,{className:"w-6 h-6 text-amber-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:230,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:229,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:H.partnerName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:233,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsxDEV(Ro,{className:"w-3 h-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:235,columnNumber:37},void 0),new Date(H.date).toLocaleDateString("ar-EG"),e.jsxDEV("span",{className:"font-bold text-amber-600",children:[H.total?.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:237,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:234,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:232,columnNumber:29},void 0)]},H.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:224,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:222,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesReturnScreen.tsx",lineNumber:193,columnNumber:13},void 0)},Ss=({salesmanId:n,onBack:o,onComplete:l})=>{const[t,s]=d.useState(1),[i,r]=d.useState([]),[a,m]=d.useState(""),[E,c]=d.useState(!0),[N,h]=d.useState(!1),[b,p]=d.useState(null),[x,w]=d.useState("CASH"),[P,y]=d.useState(""),[D,u]=d.useState(""),[f,v]=d.useState([]),[C,F]=d.useState(""),[V,S]=d.useState("");d.useEffect(()=>{H(),I()},[]);const I=async()=>{try{await ue.initialize();const R=await ue.getBanks();v(R)}catch{}},H=async()=>{c(!0);try{const R=await no.partner.getAll("CUSTOMER");r(R)}catch{}c(!1)},O=d.useMemo(()=>a?i.filter(R=>R.name?.includes(a)||R.phone?.includes(a)).slice(0,30):i.slice(0,30),[i,a]),Q=R=>{p({id:R.id,name:R.name,balance:R.balance||0}),s(2)},G=async()=>{if(!N){if(!b||!P||parseFloat(P)<=0){alert("يرجى إدخال المبلغ");return}h(!0);try{const R=Date.now(),B=Math.random().toString(36).substr(2,6).toUpperCase(),L=`RECEIPT_${R}_${B}`,Z=`REC-${B}`;let U=D;x==="BANK"&&V&&(U=U?`${U} - رقم التحويل: ${V}`:`رقم التحويل: ${V}`);const A=f.find(K=>K.id===C),$={id:L,number:Z,type:"RECEIPT",partnerId:b.id,partnerName:b.name,total:parseFloat(P),paidAmount:parseFloat(P),paymentMethod:x,notes:U,salesmanId:n,date:new Date().toISOString(),status:"POSTED",bankAccountId:x==="BANK"?C:null,bankName:x==="BANK"&&A?A.name:null};await ue.initialize(),await ue.saveInvoice($),await ue.addToPendingSync("invoice","CREATE",$);try{const K=await ue.syncPendingOperations()}catch{}alert("تم حفظ الإيصال بنجاح"),l(L)}catch(R){alert(`فشل في حفظ الإيصال: ${R.message}`)}h(!1)}},oe=[{type:"CASH",label:"كاش",icon:mn,color:"emerald"},{type:"BANK",label:"تحويل بنكي",icon:rt,color:"blue"}];return t===1?e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:o,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:184,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:183,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"استلام نقدية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:187,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-emerald-200 text-sm",children:"اختر العميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:188,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:186,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:182,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:181,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:196,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:a,onChange:R=>m(R.target.value),placeholder:"بحث عن عميل...",className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-emerald-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:197,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:195,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:194,columnNumber:17},void 0),e.jsxDEV("div",{className:"px-4 space-y-2",children:O.map(R=>e.jsxDEV("button",{onClick:()=>Q(R),className:"w-full bg-white rounded-xl p-4 border border-slate-200 flex items-center gap-3 text-right",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsxDEV(ro,{className:"w-6 h-6 text-emerald-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:216,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:215,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:R.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:219,columnNumber:33},void 0),R.phone&&e.jsxDEV("p",{className:"text-sm text-slate-500",children:R.phone},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:221,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:218,columnNumber:29},void 0),R.balance>0&&e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"text-red-500 font-bold",children:R.balance.toLocaleString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:226,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400",children:"رصيد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:229,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:225,columnNumber:33},void 0)]},R.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:210,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:208,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:179,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:()=>s(1),className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:246,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:245,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:["استلام من: ",b?.name]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:249,columnNumber:25},void 0),b&&b.balance>0&&e.jsxDEV("p",{className:"text-emerald-200 text-sm",children:["الرصيد المستحق: ",b.balance.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:251,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:248,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:244,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:243,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-4",children:[e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-3",children:"طريقة الدفع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:262,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:oe.map(R=>e.jsxDEV("button",{onClick:()=>w(R.type),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${x===R.type?`border-${R.color}-500 bg-${R.color}-50`:"border-slate-200"}`,children:[e.jsxDEV(R.icon,{className:`w-8 h-8 ${x===R.type?`text-${R.color}-600`:"text-slate-400"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:275,columnNumber:33},void 0),e.jsxDEV("span",{className:`text-sm font-medium ${x===R.type?`text-${R.color}-600`:"text-slate-600"}`,children:R.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:277,columnNumber:33},void 0)]},R.type,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:267,columnNumber:29},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:265,columnNumber:21},void 0),x==="BANK"&&e.jsxDEV("div",{className:"mt-4 space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🏦 اختر البنك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:289,columnNumber:33},void 0),e.jsxDEV("select",{value:C,onChange:R=>F(R.target.value),className:"w-full p-3 text-lg border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[e.jsxDEV("option",{value:"",children:"اختر البنك..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:297,columnNumber:37},void 0),f.map(R=>e.jsxDEV("option",{value:R.id,children:R.name},R.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:299,columnNumber:41},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:292,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:288,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-blue-700 font-medium mb-2",children:"🔢 رقم التحويل / المرجع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:307,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:V,onChange:R=>S(R.target.value),placeholder:"أدخل رقم العملية أو التحويل...",className:"w-full p-3 text-lg border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:310,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:306,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:287,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:261,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(zo,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:325,columnNumber:25},void 0),"المبلغ"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:324,columnNumber:21},void 0),e.jsxDEV("input",{type:"number",value:P,onChange:R=>y(R.target.value),placeholder:"أدخل المبلغ",className:"w-full px-4 py-4 rounded-lg border-2 border-slate-200 focus:border-emerald-500 outline-none text-2xl font-bold text-center",dir:"ltr"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:328,columnNumber:21},void 0),b&&b.balance>0&&e.jsxDEV("button",{onClick:()=>y(b.balance.toString()),className:"mt-2 text-sm text-emerald-600 font-medium",children:["استلام كامل الرصيد (",b.balance.toLocaleString("ar-EG"),")"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:337,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:323,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[e.jsxDEV("label",{className:"block text-slate-600 text-sm font-medium mb-2",children:[e.jsxDEV(Je,{className:"w-4 h-4 inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:349,columnNumber:25},void 0),"ملاحظات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:348,columnNumber:21},void 0),e.jsxDEV("textarea",{value:D,onChange:R=>u(R.target.value),placeholder:"أي ملاحظات إضافية...",rows:2,className:"w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-emerald-500 outline-none resize-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:352,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:347,columnNumber:17},void 0),e.jsxDEV("button",{onClick:G,disabled:N||!P||parseFloat(P)<=0,className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-bold text-xl flex items-center justify-center gap-2 shadow-lg shadow-emerald-500/30 disabled:opacity-50",children:N?e.jsxDEV("span",{children:"جاري الحفظ..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:368,columnNumber:25},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(un,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:371,columnNumber:29},void 0),"تأكيد الاستلام"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:370,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:362,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:259,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CashReceiptScreen.tsx",lineNumber:241,columnNumber:9},void 0)},ys=({onBack:n,onSelectCustomer:o})=>{const[l,t]=d.useState([]),[s,i]=d.useState(!0),[r,a]=d.useState(""),[m,E]=d.useState("debtors");d.useEffect(()=>{let b=!1;return(async()=>{i(!0);try{const x=await no.partner.getAll("CUSTOMER");b||t(x)}catch{}b||i(!1)})(),()=>{b=!0}},[]);const c=d.useMemo(()=>{let b=l;return m==="debtors"?b=b.filter(p=>(p.balance||0)>0):m==="creditors"&&(b=b.filter(p=>(p.balance||0)<0)),r&&(b=b.filter(p=>p.name?.includes(r)||p.phone?.includes(r))),b.sort((p,x)=>Math.abs(x.balance||0)-Math.abs(p.balance||0))},[l,m,r]),N=d.useMemo(()=>c.reduce((b,p)=>b+(p.balance||0),0),[c]),h=async()=>{const b=`
            <div dir="rtl" style="font-family: Arial, sans-serif; padding: 10px;">
                <h1 style="text-align: center; margin-bottom: 5px;">أرصدة العملاء</h1>
                <p style="text-align: center; color: #888;">التاريخ: ${new Date().toLocaleDateString("ar-EG")}</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">#</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">العميل</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">الهاتف</th>
                            <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">الرصيد</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${c.map((p,x)=>`
                            <tr>
                                <td style="border: 1px solid #ccc; padding: 8px;">${x+1}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${p.name}</td>
                                <td style="border: 1px solid #ccc; padding: 8px;">${p.phone||"-"}</td>
                                <td style="border: 1px solid #ccc; padding: 8px; color: ${(p.balance||0)>0?"red":"green"};">
                                    ${Math.abs(p.balance||0).toLocaleString("ar-EG")} ${(p.balance||0)>0?"مدين":(p.balance||0)<0?"دائن":"-"}
                                </td>
                            </tr>
                        `).join("")}
                        <tr style="font-weight: bold; background: #f0f0f0;">
                            <td colspan="3" style="border: 1px solid #ccc; padding: 8px;">الإجمالي</td>
                            <td style="border: 1px solid #ccc; padding: 8px;">${N.toLocaleString("ar-EG")} ج.م</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        `;await pe.printGenericHTML(b,"أرصدة العملاء")};return s?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV(De,{className:"w-8 h-8 text-indigo-600 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:121,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:120,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-red-600 to-rose-700 text-white px-4 py-5 sticky top-0 z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:n,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:132,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:131,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"أرصدة العملاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:135,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-red-200 text-sm",children:[c.length," عميل"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:136,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:134,columnNumber:21},void 0),e.jsxDEV("button",{onClick:h,className:"p-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:139,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:138,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:130,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-4 bg-white/10 rounded-xl p-4 text-center",children:[e.jsxDEV("p",{className:"text-red-200 text-sm",children:"إجمالي الأرصدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:145,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-3xl font-black",children:[N.toLocaleString("ar-EG")," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:146,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:144,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:129,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:154,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:r,onChange:b=>a(b.target.value),placeholder:"بحث عن عميل...",className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-red-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:155,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:153,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[{key:"debtors",label:"مدينون",icon:Cl},{key:"creditors",label:"دائنون",icon:Nl},{key:"all",label:"الكل",icon:ro}].map(b=>e.jsxDEV("button",{onClick:()=>E(b.key),className:`flex-1 py-2 rounded-lg font-medium flex items-center justify-center gap-1 text-sm ${m===b.key?"bg-red-600 text-white":"bg-white text-slate-600 border border-slate-200"}`,children:[e.jsxDEV(b.icon,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:179,columnNumber:29},void 0),b.label]},b.key,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:171,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:151,columnNumber:13},void 0),e.jsxDEV("div",{className:"px-4 pb-4 space-y-2",children:c.map(b=>{const p=b.balance||0,x=p>0;return e.jsxDEV("button",{onClick:()=>o?.(b.id,b.name),className:"w-full bg-white rounded-xl p-4 border border-slate-200 flex items-center gap-3 text-right",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${x?"bg-red-100":"bg-emerald-100"}`,children:e.jsxDEV(ro,{className:`w-6 h-6 ${x?"text-red-600":"text-emerald-600"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:200,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:198,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:b.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:203,columnNumber:33},void 0),b.phone&&e.jsxDEV("p",{className:"text-slate-500 text-sm flex items-center gap-1",children:[e.jsxDEV(hn,{className:"w-3 h-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:206,columnNumber:41},void 0),b.phone]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:205,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:202,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:`font-bold text-lg ${x?"text-red-600":"text-emerald-600"}`,children:Math.abs(p).toLocaleString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:212,columnNumber:33},void 0),e.jsxDEV("p",{className:`text-xs ${x?"text-red-400":"text-emerald-400"}`,children:x?"مدين":"دائن"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:215,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:211,columnNumber:29},void 0)]},b.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:193,columnNumber:25},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/CustomerBalances.tsx",lineNumber:127,columnNumber:9},void 0)},ws=({onBack:n,onOpenSettings:o,salesmanId:l})=>{const[t,s]=d.useState([]),[i,r]=d.useState(!0),[a,m]=d.useState(""),[E,c]=d.useState(null),[N,h]=d.useState(null),[b,p]=d.useState("");d.useEffect(()=>{let u=!1;return(async()=>{r(!0);try{let v=await ue.getInvoices();if(l)try{const C=await no.partner.getAll("CUSTOMER"),F=new Set(C.map(V=>String(V.id)));v=v.filter(V=>F.has(String(V.partnerId))||V.salesmanId===l)}catch{}if(!u){const C=v.sort((F,V)=>new Date(V.date).getTime()-new Date(F.date).getTime());s(C)}}catch{}u||r(!1)})(),()=>{u=!0}},[l]);const x=d.useMemo(()=>a?t.filter(u=>u.partnerName?.includes(a)||u.id?.includes(a)||u.number?.includes(a)).slice(0,50):t.slice(0,50),[t,a]),w=async u=>{if(u.previousBalance!==void 0&&u.previousBalance!==null)return{...u,partnerBalance:u.previousBalance};try{const v=(await no.partner.getAll("CUSTOMER")).find(C=>String(C.id)===String(u.partnerId));if(v){const C=Number(v.balance)||0,F=Number(u.total)||0,V=Number(u.paidAmount)||0,S=`Calc: ${C} - ${F} + ${V}`,I=C-F+V;return{...u,partnerBalance:I,previousBalance:I,newBalance:C}}}catch{}return u},P=async u=>{c(u.id);try{const f=await w(u),v=await pe.invoiceToReceipt(f),C=await pe.smartPrint(v);C.success||alert("فشل في الطباعة: "+C.message)}catch(f){alert("خطأ في الطباعة: "+f.message)}c(null)},y=async u=>{try{const f=await w(u),v=await pe.invoiceToReceipt(f),C=await pe.previewReceipt(v);p(C),h(f)}catch{}},D=u=>{switch(u){case"INVOICE_SALE":case"SALE_INVOICE":case"SALE":return{label:"بيع",color:"text-emerald-600 bg-emerald-100"};case"RETURN_SALE":case"RETURN":return{label:"مرتجع",color:"text-amber-600 bg-amber-100"};case"RECEIPT":return{label:"استلام",color:"text-blue-600 bg-blue-100"};default:return{label:u?.replace("INVOICE_","")||"فاتورة",color:"text-slate-600 bg-slate-100"}}};return i?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV(De,{className:"w-8 h-8 text-indigo-600 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:185,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:184,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:n,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:196,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:195,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold",children:"إعادة طباعة فاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:199,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-indigo-200 text-sm",children:[x.length," فاتورة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:200,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:198,columnNumber:21},void 0),o&&e.jsxDEV("button",{onClick:o,className:"p-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Rl,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:207,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:203,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:194,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:193,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:216,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",value:a,onChange:u=>m(u.target.value),placeholder:"بحث برقم الفاتورة أو اسم العميل...",className:"w-full pr-10 pl-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:217,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:215,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:214,columnNumber:13},void 0),e.jsxDEV("div",{className:"px-4 pb-4 space-y-2",children:x.map(u=>{const f=D(u.type),v=E===u.id;return e.jsxDEV("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:e.jsxDEV(Je,{className:"w-6 h-6 text-indigo-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:240,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:239,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:u.partnerName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:244,columnNumber:41},void 0),e.jsxDEV("span",{className:`text-xs px-2 py-0.5 rounded-full ${f.color}`,children:f.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:245,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:243,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 text-sm text-slate-500 mt-1",children:[e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(Ro,{className:"w-3 h-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:251,columnNumber:45},void 0),new Date(u.date).toLocaleDateString("ar-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:250,columnNumber:41},void 0),e.jsxDEV("span",{className:"flex items-center gap-1 font-bold text-indigo-600",children:[e.jsxDEV(zo,{className:"w-3 h-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:255,columnNumber:45},void 0),(u.total||0).toLocaleString("ar-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:254,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:249,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:242,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>y(u),className:"p-3 rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200",title:"معاينة",children:e.jsxDEV(ut,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:266,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:261,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>P(u),disabled:v,className:`p-3 rounded-xl ${v?"bg-indigo-200 text-indigo-400":"bg-indigo-100 text-indigo-600 hover:bg-indigo-200"}`,title:"طباعة",children:v?e.jsxDEV(De,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:278,columnNumber:45},void 0):e.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:280,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:268,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:260,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:238,columnNumber:29},void 0)},u.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:234,columnNumber:25},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:228,columnNumber:13},void 0),N&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white w-full max-w-md max-h-[90vh] rounded-2xl overflow-hidden flex flex-col",children:[e.jsxDEV("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsxDEV("h3",{className:"font-bold text-lg",children:"معاينة الفاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:295,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>{h(null),p("")},className:"p-2 rounded-lg hover:bg-slate-100",children:"✕"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:296,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:294,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto p-2 bg-slate-50",dangerouslySetInnerHTML:{__html:b}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:306,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-4 border-t border-slate-200 flex gap-3",children:[e.jsxDEV("button",{onClick:()=>{h(null),p("")},className:"flex-1 py-3 border-2 border-slate-200 rounded-xl font-bold text-slate-600",children:"إغلاق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:311,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>{P(N),h(null),p("")},className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[e.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:328,columnNumber:33},void 0),"طباعة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:320,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:310,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:293,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:292,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/ReprintInvoice.tsx",lineNumber:191,columnNumber:9},void 0)},Vs=({onBack:n})=>{const[o,l]=d.useState(!0),[t,s]=d.useState(!1),[i,r]=d.useState(null),[a,m]=d.useState([]),[E,c]=d.useState(null),[N,h]=d.useState(!1),[b,p]=d.useState(!1),[x,w]=d.useState([]),[P,y]=d.useState({name:"",address:"",type:"bluetooth",paperWidth:80});d.useEffect(()=>{D()},[]);const D=async()=>{l(!0);try{const[S,I,H]=await Promise.all([pe.getSettings(),pe.getSavedPrinters(),pe.getDefaultPrinter()]);r(S),m(I),c(H)}catch{}l(!1)},u=async()=>{if(i){s(!0);try{await pe.updateSettings(i),alert("تم حفظ الإعدادات بنجاح")}catch{alert("فشل في حفظ الإعدادات")}s(!1)}},f=async()=>{alert(`📱 طريقة الطباعة:

1. تأكد من إقران الطابعة RONGTA في إعدادات البلوتوث الخاصة بالهاتف

2. عند الضغط على "طباعة تجريبية"، سيظهر مربع حوار الطباعة

3. اختر الطابعة RONGTA من قائمة الطابعات المتاحة

💡 نصيحة: تأكد من تشغيل الطابعة وأنها متصلة بالبلوتوث قبل الطباعة`)},v=async()=>{if(!P.name){alert("يرجى إدخال اسم الطابعة");return}const S={id:`printer_${Date.now()}`,name:P.name||"",address:P.address,type:P.type||"bluetooth",paperWidth:P.paperWidth||80,isConnected:!1,lastUsed:new Date().toISOString()};await pe.savePrinter(S),m([...a,S]),h(!1),y({name:"",address:"",type:"bluetooth",paperWidth:80})},C=async S=>{confirm(`هل تريد حذف الطابعة "${S.name}"؟`)&&(await pe.removePrinter(S.id),m(a.filter(I=>I.id!==S.id)),E?.id===S.id&&c(null))},F=async S=>{await pe.setDefaultPrinter(S),c(S)},V=async()=>{const S={invoiceId:"TEST",invoiceNumber:"TEST-"+Date.now().toString().slice(-6),date:new Date().toISOString(),type:"SALE",partnerName:"طباعة تجريبية",items:[{name:"منتج تجريبي 1",quantity:2,price:50,total:100},{name:"منتج تجريبي 2",quantity:1,price:75,total:75}],subtotal:175,total:175,paymentMethod:"CASH"},I=await pe.smartPrint(S);I.success||alert("فشل في الطباعة: "+I.message)};return o?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV(De,{className:"w-8 h-8 text-indigo-600 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:149,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:148,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50 pb-20",dir:"rtl",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 text-white px-4 py-5 sticky top-0 z-10",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:n,className:"p-2 -mr-2 rounded-full hover:bg-white/10",children:e.jsxDEV(Be,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:160,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:159,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:164,columnNumber:29},void 0),"إعدادات الطباعة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:163,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-300 text-sm",children:"تكوين الطابعات وإعدادات الإيصالات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:167,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:162,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:158,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:157,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:V,className:"bg-emerald-100 text-emerald-700 p-4 rounded-xl flex flex-col items-center gap-2",children:[e.jsxDEV(Qe,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:179,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold text-sm",children:"طباعة تجريبية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:180,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:175,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>h(!0),className:"bg-indigo-100 text-indigo-700 p-4 rounded-xl flex flex-col items-center gap-2",children:[e.jsxDEV(Ke,{className:"w-6 h-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:186,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold text-sm",children:"إضافة طابعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:187,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:182,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:174,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl p-4 border border-slate-200",children:[e.jsxDEV("h2",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsxDEV(Io,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:194,columnNumber:25},void 0),"الطابعات المحفوظة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:193,columnNumber:21},void 0),a.length===0?e.jsxDEV("div",{className:"text-center py-6 text-slate-400",children:[e.jsxDEV(Qe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:200,columnNumber:29},void 0),e.jsxDEV("p",{children:"لا توجد طابعات محفوظة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:201,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>h(!0),className:"mt-3 text-indigo-600 font-bold",children:"+ إضافة طابعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:202,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:199,columnNumber:25},void 0):e.jsxDEV("div",{className:"space-y-2",children:a.map(S=>e.jsxDEV("div",{className:`p-3 rounded-xl border-2 flex items-center gap-3 ${E?.id===S.id?"border-emerald-400 bg-emerald-50":"border-slate-200"}`,children:[e.jsxDEV("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${S.type==="bluetooth"?"bg-blue-100":"bg-slate-100"}`,children:S.type==="bluetooth"?e.jsxDEV(Io,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:222,columnNumber:45},void 0):e.jsxDEV(Wn,{className:"w-5 h-5 text-slate-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:224,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:219,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:S.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:228,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:[S.paperWidth,"mm • ",S.type==="bluetooth"?"بلوتوث":"واي فاي"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:229,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:227,columnNumber:37},void 0),E?.id===S.id?e.jsxDEV("span",{className:"text-emerald-600 flex items-center gap-1 text-xs font-bold",children:[e.jsxDEV(mt,{className:"w-4 h-4 fill-current"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:235,columnNumber:45},void 0),"الافتراضية"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:234,columnNumber:41},void 0):e.jsxDEV("button",{onClick:()=>F(S),className:"text-indigo-600 text-xs font-bold",children:"تعيين كافتراضية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:239,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>C(S),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:e.jsxDEV(Dn,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:250,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:246,columnNumber:37},void 0)]},S.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:212,columnNumber:33},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:210,columnNumber:25},void 0),e.jsxDEV("button",{onClick:f,disabled:b,className:"w-full mt-4 py-3 border-2 border-dashed border-slate-300 rounded-xl text-slate-500 font-bold flex items-center justify-center gap-2",children:b?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(De,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:265,columnNumber:33},void 0),"جاري البحث..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:264,columnNumber:29},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ae,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:270,columnNumber:33},void 0),"البحث عن طابعات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:269,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:258,columnNumber:21},void 0),x.length>0&&e.jsxDEV("div",{className:"mt-4 p-3 bg-blue-50 rounded-xl",children:[e.jsxDEV("p",{className:"font-bold text-blue-800 mb-2",children:"طابعات متاحة:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:279,columnNumber:29},void 0),x.map(S=>e.jsxDEV("button",{onClick:async()=>{await pe.savePrinter(S),m([...a,S]),w(x.filter(I=>I.id!==S.id))},className:"w-full p-2 bg-white rounded-lg text-right mb-1 flex items-center gap-2",children:[e.jsxDEV(Io,{className:"w-4 h-4 text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:290,columnNumber:37},void 0),e.jsxDEV("span",{className:"flex-1",children:S.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:291,columnNumber:37},void 0),e.jsxDEV(Ke,{className:"w-4 h-4 text-emerald-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:292,columnNumber:37},void 0)]},S.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:281,columnNumber:33},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:278,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:192,columnNumber:17},void 0),i&&e.jsxDEV("div",{className:"bg-white rounded-2xl p-4 border border-slate-200",children:[e.jsxDEV("h2",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsxDEV(Rl,{className:"w-5 h-5 text-slate-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:303,columnNumber:29},void 0),"إعدادات الطباعة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:302,columnNumber:25},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"عرض الورق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:310,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("button",{onClick:()=>r({...i,printerWidth:58}),className:`py-3 rounded-xl font-bold ${i.printerWidth===58?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"58mm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:312,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>r({...i,printerWidth:80}),className:`py-3 rounded-xl font-bold ${i.printerWidth===80?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"80mm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:321,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:311,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:309,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"حجم الخط"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:335,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:["small","normal","large"].map(S=>e.jsxDEV("button",{onClick:()=>r({...i,fontSize:S}),className:`py-2 rounded-xl text-sm font-bold ${i.fontSize===S?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:S==="small"?"صغير":S==="normal"?"عادي":"كبير"},S,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:338,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:336,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:334,columnNumber:29},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("label",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-bold text-slate-700",children:"إظهار الشعار"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:355,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>r({...i,showLogo:!i.showLogo}),className:`w-12 h-6 rounded-full transition-colors ${i.showLogo?"bg-emerald-500":"bg-slate-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-transform ${i.showLogo?"translate-x-6":"translate-x-0.5"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:361,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:356,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:354,columnNumber:33},void 0),e.jsxDEV("label",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"font-bold text-slate-700",children:"طباعة تذييل الصفحة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:367,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>r({...i,printFooter:!i.printFooter}),className:`w-12 h-6 rounded-full transition-colors ${i.printFooter?"bg-emerald-500":"bg-slate-300"}`,children:e.jsxDEV("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-transform ${i.printFooter?"translate-x-6":"translate-x-0.5"}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:373,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:368,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:366,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:353,columnNumber:29},void 0),e.jsxDEV("div",{className:"pt-3 border-t border-slate-200",children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"اسم الشركة (للإيصال)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:381,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:i.companyName||"",onChange:S=>r({...i,companyName:S.target.value}),className:"w-full p-3 border-2 border-slate-200 rounded-xl",placeholder:"اسم الشركة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:382,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:380,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"رقم الهاتف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:392,columnNumber:33},void 0),e.jsxDEV("input",{type:"tel",value:i.companyPhone||"",onChange:S=>r({...i,companyPhone:S.target.value}),className:"w-full p-3 border-2 border-slate-200 rounded-xl",placeholder:"01xxxxxxxxx",dir:"ltr"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:393,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:391,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"العنوان"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:404,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:i.companyAddress||"",onChange:S=>r({...i,companyAddress:S.target.value}),className:"w-full p-3 border-2 border-slate-200 rounded-xl",placeholder:"العنوان"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:405,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:403,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:307,columnNumber:25},void 0),e.jsxDEV("button",{onClick:u,disabled:t,className:"w-full mt-4 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(De,{className:"w-5 h-5 animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:423,columnNumber:37},void 0),"جاري الحفظ..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:422,columnNumber:33},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Fo,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:428,columnNumber:37},void 0),"حفظ الإعدادات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:427,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:416,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:301,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 flex gap-3",children:[e.jsxDEV(Qe,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:438,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-sm text-blue-800",children:[e.jsxDEV("p",{className:"font-bold mb-2",children:"🖨️ طريقة إعداد طابعة RONGTA:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:440,columnNumber:25},void 0),e.jsxDEV("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsxDEV("li",{children:["افتح ",e.jsxDEV("strong",{children:"إعدادات الهاتف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:442,columnNumber:38},void 0)," → ",e.jsxDEV("strong",{children:"البلوتوث"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:442,columnNumber:72},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:442,columnNumber:29},void 0),e.jsxDEV("li",{children:"شغّل الطابعة واجعلها في وضع الإقران"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:443,columnNumber:29},void 0),e.jsxDEV("li",{children:["اختر ",e.jsxDEV("strong",{children:"RPP30"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:444,columnNumber:38},void 0)," من قائمة الأجهزة المتاحة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:444,columnNumber:29},void 0),e.jsxDEV("li",{children:["عد للتطبيق واضغط على ",e.jsxDEV("strong",{children:'"طباعة تجريبية"'},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:445,columnNumber:54},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:445,columnNumber:29},void 0),e.jsxDEV("li",{children:"اختر الطابعة من قائمة الطباعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:446,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:441,columnNumber:25},void 0),e.jsxDEV("p",{className:"mt-2 text-blue-600 font-bold",children:"✓ الطابعة ستحفظ تلقائياً بعد الطباعة الأولى"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:448,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:439,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:437,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:172,columnNumber:13},void 0),N&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",children:e.jsxDEV("div",{className:"bg-white w-full max-w-md rounded-t-3xl p-6 animate-slide-up",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"إضافة طابعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:457,columnNumber:25},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"اسم الطابعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:461,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:P.name||"",onChange:S=>y({...P,name:S.target.value}),className:"w-full p-3 border-2 border-slate-200 rounded-xl",placeholder:"مثال: طابعة المندوب"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:462,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:460,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"العنوان (MAC / IP)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:472,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:P.address||"",onChange:S=>y({...P,address:S.target.value}),className:"w-full p-3 border-2 border-slate-200 rounded-xl font-mono",placeholder:"XX:XX:XX:XX:XX:XX",dir:"ltr"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:473,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:471,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"نوع الاتصال"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:484,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("button",{onClick:()=>y({...P,type:"bluetooth"}),className:`py-2 rounded-xl font-bold flex items-center justify-center gap-2 ${P.type==="bluetooth"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600"}`,children:[e.jsxDEV(Io,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:493,columnNumber:41},void 0),"بلوتوث"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:486,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>y({...P,type:"wifi"}),className:`py-2 rounded-xl font-bold flex items-center justify-center gap-2 ${P.type==="wifi"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-600"}`,children:[e.jsxDEV(Wn,{className:"w-4 h-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:503,columnNumber:41},void 0),"واي فاي"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:496,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:485,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:483,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"عرض الورق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:510,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("button",{onClick:()=>y({...P,paperWidth:58}),className:`py-2 rounded-xl font-bold ${P.paperWidth===58?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"58mm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:512,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>y({...P,paperWidth:80}),className:`py-2 rounded-xl font-bold ${P.paperWidth===80?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:"80mm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:521,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:511,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:509,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:459,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex gap-3 mt-6",children:[e.jsxDEV("button",{onClick:()=>h(!1),className:"flex-1 py-3 border-2 border-slate-200 rounded-xl font-bold text-slate-600",children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:535,columnNumber:29},void 0),e.jsxDEV("button",{onClick:v,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[e.jsxDEV(Ke,{className:"w-5 h-5"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:545,columnNumber:33},void 0),"إضافة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:541,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:534,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:456,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:455,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/PrinterSettings.tsx",lineNumber:155,columnNumber:9},void 0)},Fs={FUEL:"بنزين/سولار",FOOD:"وجبات",DELIVERY:"توصيل",PARKING:"انتظار",MAINTENANCE:"صيانة",OTHER:"أخرى"},Bs=({vehicleId:n,salesmanName:o,onBack:l})=>{const[t,s]=d.useState(!0),[i,r]=d.useState(null),[a,m]=d.useState([]),[E,c]=d.useState(!0),[N,h]=d.useState(!0);d.useEffect(()=>{b()},[n]);const b=async()=>{s(!0);try{const x=fl();try{const P=await ue.checkAndClearApprovedSettlements();P.cleared&&P.dates.length>0}catch{}const w=await vt.calculate(n,x,o);r(w);try{const P=await ue.getExpensesForSettlement(x,n);if(P&&P.length>0){const y=P.map(D=>({category:D.category||"OTHER",description:D.description||"",amount:Number(D.amount)||0}));m(y)}else m([])}catch{m([])}}catch{}finally{s(!1)}},p=d.useMemo(()=>{if(!i)return null;const x=a.reduce((P,y)=>P+(y.amount||0),0),w=(i.cashCollected||0)-(i.totalReturns||0)-x;return{totalExpenses:x,expectedCash:w}},[i,a]);return t?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(cn,{className:"w-10 h-10 text-indigo-600 animate-spin mx-auto mb-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:117,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-600 font-medium",children:"جاري تحميل بيانات اليوم..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:118,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:116,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:115,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50 pb-10",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-600 text-white px-4 py-5 sticky top-0 z-20 shadow-md",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxDEV("button",{onClick:l,className:"p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors",children:e.jsxDEV(Be,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:130,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:129,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-lg font-bold",children:"تقرير اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:133,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-white/70 text-sm",children:new Date().toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:134,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:132,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:128,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 bg-white/10 backdrop-blur rounded-xl p-3",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-white/60 text-xs mb-1",children:"المبيعات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:143,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-lg font-bold",children:(i?.totalSales||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:144,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:142,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-center border-x border-white/20",children:[e.jsxDEV("p",{className:"text-white/60 text-xs mb-1",children:"التحصيلات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:147,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-lg font-bold",children:(i?.cashCollected||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:148,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:146,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("p",{className:"text-white/60 text-xs mb-1",children:"المرتجعات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:151,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-lg font-bold",children:(i?.totalReturns||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:152,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:150,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:141,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:127,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-4",children:[e.jsxDEV("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 flex gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600 h-fit",children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:163,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:162,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-blue-800 text-sm mb-1",children:"نظام التسوية المباشر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:166,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-blue-600 text-xs leading-relaxed",children:["يتم احتساب التسوية تلقائياً وبشكل لحظي على النظام.",e.jsxDEV("br",{},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:169,columnNumber:29},void 0),"لا داعي لإرسال التسوية يدوياً. قم فقط بتسليم النقدية الموضحة أدناه."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:167,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:165,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:161,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl p-5 border border-slate-100 shadow-sm text-center",children:[e.jsxDEV("p",{className:"text-slate-500 font-medium mb-2 flex items-center justify-center gap-2",children:[e.jsxDEV(El,{size:18,className:"text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:178,columnNumber:25},void 0),"صافي النقدية للتسليم"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:177,columnNumber:21},void 0),e.jsxDEV("div",{className:"text-4xl font-black text-slate-800 tracking-tight my-2",children:[(p?.expectedCash||0).toLocaleString(),e.jsxDEV("span",{className:"text-lg text-slate-400 font-medium mr-2",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:183,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:181,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 mt-2",children:"= التحصيلات - المرتجعات - المصروفات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:185,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:176,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[e.jsxDEV("button",{onClick:()=>h(!N),className:"w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 transition-colors",children:[e.jsxDEV("span",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsxDEV(bn,{size:18,className:"text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:197,columnNumber:29},void 0),"تفاصيل العمليات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:196,columnNumber:25},void 0),N?e.jsxDEV(_n,{size:20,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:200,columnNumber:40},void 0):e.jsxDEV(Gn,{size:20,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:200,columnNumber:93},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:192,columnNumber:21},void 0),N&&e.jsxDEV("div",{className:"px-4 pb-4 space-y-3 border-t border-slate-100 pt-3",children:[e.jsxDEV("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg",children:[e.jsxDEV("span",{className:"text-slate-600 text-sm",children:"مبيعات نقدية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:206,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-emerald-600",children:(i?.totalCashSales||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:207,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:205,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg",children:[e.jsxDEV("span",{className:"text-slate-600 text-sm",children:"مبيعات آجلة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:210,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-blue-600",children:(i?.totalCreditSales||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:211,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:209,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-lg",children:[e.jsxDEV("span",{className:"text-slate-600 text-sm",children:"تحصيلات نقدية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:214,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-emerald-600",children:(i?.cashCollected||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:215,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:213,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg border border-red-100",children:[e.jsxDEV("span",{className:"text-red-700 text-sm",children:"مرتجعات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:218,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-red-600",children:["- ",(i?.totalReturns||0).toLocaleString()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:219,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:217,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex justify-between items-center bg-orange-50 p-3 rounded-lg border border-orange-100",children:[e.jsxDEV("span",{className:"text-orange-700 text-sm",children:"خصومات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:222,columnNumber:33},void 0),e.jsxDEV("span",{className:"font-bold text-orange-600",children:["- ",(i?.totalDiscounts||0).toLocaleString()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:223,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:221,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:204,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:191,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[e.jsxDEV("button",{onClick:()=>c(!E),className:"w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 transition-colors",children:[e.jsxDEV("span",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsxDEV(fn,{size:18,className:"text-amber-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:236,columnNumber:29},void 0),"المصروفات المسجلة",a.length>0&&e.jsxDEV("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-bold",children:(p?.totalExpenses||0).toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:239,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:235,columnNumber:25},void 0),E?e.jsxDEV(_n,{size:20,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:244,columnNumber:41},void 0):e.jsxDEV(Gn,{size:20,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:244,columnNumber:94},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:231,columnNumber:21},void 0),E&&e.jsxDEV("div",{className:"px-4 pb-4 space-y-3 border-t border-slate-100 pt-3",children:a.length===0?e.jsxDEV("p",{className:"text-center text-slate-400 py-4 text-sm",children:"لا يوجد مصروفات مسجلة اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:250,columnNumber:33},void 0):a.map((x,w)=>e.jsxDEV("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100 flex justify-between items-center",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-white rounded-lg border border-slate-200 text-amber-500",children:e.jsxDEV(fn,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:256,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:255,columnNumber:45},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-700 text-sm",children:Fs[x.category]||x.category},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:259,columnNumber:49},void 0),x.description&&e.jsxDEV("p",{className:"text-xs text-slate-500",children:x.description},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:263,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:258,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:254,columnNumber:41},void 0),e.jsxDEV("p",{className:"font-bold text-slate-800",children:[x.amount.toLocaleString()," ",e.jsxDEV("span",{className:"text-[10px] text-slate-400 font-normal",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:268,columnNumber:79},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:267,columnNumber:41},void 0)]},w,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:253,columnNumber:37},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:248,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:230,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:158,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileSettlement.tsx",lineNumber:125,columnNumber:9},void 0)},sn=[{value:"FUEL",label:"بنزين/سولار",icon:fn,color:"bg-orange-500",lightColor:"bg-orange-50",textColor:"text-orange-600"},{value:"FOOD",label:"وجبات",icon:ct,color:"bg-amber-500",lightColor:"bg-amber-50",textColor:"text-amber-600"},{value:"MAINTENANCE",label:"صيانة",icon:bt,color:"bg-blue-500",lightColor:"bg-blue-50",textColor:"text-blue-600"},{value:"PARKING",label:"انتظار",icon:ft,color:"bg-purple-500",lightColor:"bg-purple-50",textColor:"text-purple-600"},{value:"DELIVERY",label:"توصيل",icon:Xe,color:"bg-emerald-500",lightColor:"bg-emerald-50",textColor:"text-emerald-600"},{value:"OTHER",label:"أخرى",icon:Je,color:"bg-slate-500",lightColor:"bg-slate-50",textColor:"text-slate-600"}],js=({vehicleId:n,salesmanId:o,salesmanName:l,onBack:t})=>{const[s,i]=d.useState(!0),[r,a]=d.useState(!1),[m,E]=d.useState([]),[c,N]=d.useState("FUEL"),[h,b]=d.useState(""),[p,x]=d.useState(""),w=fl();d.useEffect(()=>{P()},[]);const P=async()=>{i(!0);try{const C=(await ue.getExpenses()).filter(F=>F.date===w);E(C)}catch{}finally{i(!1)}},y=d.useMemo(()=>m.reduce((v,C)=>v+(C.amount||0),0),[m]),D=async()=>{if(!h||parseFloat(h)<=0){alert("يرجى إدخال قيمة المصروف");return}a(!0);try{const v={id:`exp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category:c,amount:parseFloat(h),description:p.trim(),date:w,createdAt:new Date().toISOString()};await ue.saveExpense({...v,vehicleId:n,salesmanId:o,salesmanName:l,status:"PENDING"}),E([...m,v]),b(""),x(""),N("FUEL")}catch{alert("حدث خطأ في حفظ المصروف")}finally{a(!1)}},u=async v=>{if(confirm("هل تريد حذف هذا المصروف؟"))try{await ue.deleteExpense(v),E(m.filter(C=>C.id!==v))}catch{}},f=v=>sn.find(C=>C.value===v)||sn[5];return s?e.jsxDEV("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(cn,{className:"w-10 h-10 text-amber-600 animate-spin mx-auto mb-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-600 font-medium",children:"جاري تحميل المصروفات..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:149,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:147,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:146,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50 pb-32",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 text-white px-4 py-5 sticky top-0 z-20",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxDEV("button",{onClick:t,className:"p-2 bg-white/10 rounded-full",children:e.jsxDEV(Be,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:161,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:160,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-lg font-bold",children:"المصروفات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:164,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-white/70 text-sm",children:new Date().toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:165,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:163,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:159,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4 text-center",children:[e.jsxDEV("p",{className:"text-white/60 text-sm mb-1",children:"إجمالي مصروفات اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:173,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-3xl font-black",children:[y.toLocaleString()," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:174,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-white/60 text-xs mt-1",children:[m.length," مصروفات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:175,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:172,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:158,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 space-y-4",children:[e.jsxDEV("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[e.jsxDEV("h3",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsxDEV(Ke,{size:18,className:"text-amber-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:185,columnNumber:25},void 0),"إضافة مصروف جديد"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:184,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mb-4",children:sn.map(v=>{const C=v.icon,F=c===v.value;return e.jsxDEV("button",{onClick:()=>N(v.value),className:`p-3 rounded-xl border-2 transition-all ${F?`${v.color} text-white border-transparent`:`${v.lightColor} ${v.textColor} border-slate-100`}`,children:[e.jsxDEV(C,{size:20,className:"mx-auto mb-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:203,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-xs font-medium",children:v.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:204,columnNumber:37},void 0)]},v.value,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:195,columnNumber:33},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:190,columnNumber:21},void 0),e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"المبلغ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:212,columnNumber:25},void 0),e.jsxDEV("input",{type:"number",value:h,onChange:v=>b(v.target.value),placeholder:"0",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-2xl font-bold text-center outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:213,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:211,columnNumber:21},void 0),e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"وصف (اختياري)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:224,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:p,onChange:v=>x(v.target.value),placeholder:"مثال: بنزين 20 لتر",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:225,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:223,columnNumber:21},void 0),e.jsxDEV("button",{onClick:D,disabled:r||!h,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50 active:scale-95 transition-transform shadow-lg shadow-amber-500/30",children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(cn,{size:18,className:"animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:242,columnNumber:33},void 0),"جاري الحفظ..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:241,columnNumber:29},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Fo,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:247,columnNumber:33},void 0),"إضافة المصروف"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:246,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:235,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:183,columnNumber:17},void 0),m.length>0&&e.jsxDEV("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[e.jsxDEV("div",{className:"p-4 border-b border-slate-100",children:e.jsxDEV("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsxDEV(bn,{size:18,className:"text-slate-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:259,columnNumber:33},void 0),"مصروفات اليوم"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:258,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:257,columnNumber:25},void 0),e.jsxDEV("div",{className:"divide-y divide-slate-100",children:m.map(v=>{const C=f(v.category),F=C.icon;return e.jsxDEV("div",{className:"p-4 flex items-center gap-3",children:[e.jsxDEV("div",{className:`p-2 rounded-lg ${C.lightColor}`,children:e.jsxDEV(F,{size:20,className:C.textColor},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:271,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:270,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-slate-700",children:C.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:274,columnNumber:45},void 0),v.description&&e.jsxDEV("p",{className:"text-sm text-slate-500",children:v.description},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:276,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400",children:new Date(v.createdAt).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:278,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:273,columnNumber:41},void 0),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"font-bold text-slate-700",children:v.amount.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:283,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:284,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:282,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>u(v.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-lg",children:e.jsxDEV(Dn,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:290,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:286,columnNumber:41},void 0)]},v.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:269,columnNumber:37},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:264,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:256,columnNumber:21},void 0),m.length===0&&e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-amber-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsxDEV(bn,{size:32,className:"text-amber-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:303,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:302,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-600 font-medium",children:"لا توجد مصروفات اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:305,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-1",children:"أضف أول مصروف من النموذج أعلاه"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:306,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:301,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:180,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/MobileExpenses.tsx",lineNumber:156,columnNumber:9},void 0)},Hs=({onNavigate:n,user:o,externalScreen:l})=>{const{isOnline:t,pendingCount:s,isSyncing:i,lastSync:r,stats:a,error:m,fullSync:E,syncPending:c,clearError:N}=Es(),[h,b]=d.useState(!0),[p,x]=d.useState(!1),[w,P]=d.useState(null),[y,D]=d.useState(null),[u,f]=d.useState([]),[v,C]=d.useState({targetAmount:5e3,achievedAmount:0,visitsCompleted:0,visitsTotal:0,collectionsAmount:0}),[F,V]=d.useState([]),[S,I]=d.useState("dashboard"),[H,O]=d.useState(null);d.useEffect(()=>{if(l){const W={"salesman-dashboard":"dashboard","salesman-sale":"quick-sale","salesman-inventory":"inventory","salesman-reprint":"reprint"}[l];W&&W!==S&&I(W)}},[l]),d.useEffect(()=>{(async()=>{try{const W=await ue.checkAndClearApprovedSettlements(o?.salesmanId||o?.id);W.cleared&&W.dates.length>0&&(P(`تم اعتماد التسوية - تم تصفير بيانات ${W.dates.join(", ")}`),setTimeout(()=>P(null),5e3))}catch{}})()},[o]),d.useEffect(()=>{Q()},[]);const Q=async()=>{try{const j=await yn.getAll(),W=o?.salesmanId,ce=j.find(ie=>ie.salesmanId===W||ie.salesmanId===o?.id)||j[0];if(D(ce),ce){const ie=await Sn.getAll({vehicleId:ce.id});ie.length>0&&ie[0].stops&&f(ie[0].stops.map((ee,be)=>({id:ee.id||`stop-${be}`,customerId:ee.partnerId||ee.customerId,customerName:ee.partnerName||ee.customerName||"عميل",address:ee.address,phone:ee.phone,sequence:ee.sequence||be+1,status:ee.visitId?"VISITED":"PENDING",visitId:ee.visitId,saleAmount:ee.saleAmount})));const te=await wn.getAll({vehicleId:ce.id,date:new Date().toISOString().split("T")[0]});V(te.slice(0,5));const _=te.reduce((ee,be)=>ee+(Number(be.invoiceAmount)||0),0),Ce=te.reduce((ee,be)=>ee+(Number(be.paymentCollected)||0),0);let le=0;try{const ee=new Date;ee.setHours(0,0,0,0);const be=new Date;be.setHours(23,59,59,999),le=(await ue.getInvoices()).filter(z=>{if(!z.date)return!1;const de=new Date(z.date),re=de>=ee&&de<=be,X=z.type==="INVOICE_SALE"||z.type==="SALE_INVOICE";return re&&X}).reduce((z,de)=>z+(parseFloat(de.total)||0),0)}catch{}const se=Math.max(_,le);C({targetAmount:0,achievedAmount:se,visitsCompleted:te.length,visitsTotal:u.length||te.length,collectionsAmount:Ce})}}catch{}b(!1)},G=j=>new Intl.NumberFormat("ar-EG",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),oe=()=>{const j=new Date().getHours();return j<12?"صباح الخير":(j<17,"مساء الخير")},R=async()=>{P("جاري تحميل البيانات من السيرفر...");try{await E(),P("تم تحميل البيانات بنجاح ✓"),await Q(),setTimeout(()=>P(null),3e3)}catch{P("فشل التحميل. حاول مرة أخرى."),setTimeout(()=>P(null),5e3)}},B=async()=>{if(s===0){P("لا توجد عمليات معلقة"),setTimeout(()=>P(null),2e3);return}P(`جاري رفع ${s} عملية...`);try{const j=await c();P(`تم رفع ${j.synced} عملية بنجاح ✓`),setTimeout(()=>P(null),3e3)}catch{P("فشل الرفع. حاول مرة أخرى."),setTimeout(()=>P(null),5e3)}},L=j=>{switch(j){case"VISITED":return e.jsxDEV(oo,{size:18,className:"text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:271,columnNumber:24},void 0);case"SKIPPED":return e.jsxDEV(Xn,{size:18,className:"text-rose-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:273,columnNumber:24},void 0);default:return e.jsxDEV(Xn,{size:18,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:275,columnNumber:24},void 0)}},Z=[{id:"quick-sale",label:"فاتورة بيع",icon:En,gradient:"from-emerald-500 to-teal-600 shadow-emerald-500/30",onClick:()=>I("quick-sale")},{id:"returns",label:"مرتجع مبيعات",icon:Xe,gradient:"from-amber-500 to-orange-600 shadow-amber-500/30",onClick:()=>I("returns")},{id:"receipt",label:"استلام نقدية",icon:Pl,gradient:"from-blue-500 to-indigo-600 shadow-blue-500/30",onClick:()=>I("receipt")},{id:"new-customer",label:"عميل جديد",icon:eo,gradient:"from-purple-500 to-fuchsia-600 shadow-purple-500/30",onClick:()=>I("new-customer")},{id:"inventory",label:"جرد السيارة",icon:Un,gradient:"from-cyan-500 to-blue-600 shadow-cyan-500/30",onClick:()=>I("inventory")},{id:"route",label:"خط السير",icon:Do,gradient:"from-rose-500 to-pink-600 shadow-rose-500/30",onClick:()=>I("route")},{id:"settlement",label:"تسوية اليوم",icon:zo,gradient:"from-indigo-500 to-violet-600 shadow-indigo-500/30",onClick:()=>I("settlement")}],U=()=>{I("dashboard"),O(null),Q()},A=(j,W)=>{O({id:j,name:W}),I("quick-sale")},$=(j,W)=>{O({id:j,name:W}),I("quick-sale")},K=j=>{U()};return S==="route"&&y?e.jsxDEV(xs,{vehicleId:y.id,onBack:U,onStartVisit:A,onQuickSale:$},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:358,columnNumber:13},void 0):S==="quick-sale"&&y?e.jsxDEV(hs,{vehicleId:y.id,preselectedCustomerId:H?.id,preselectedCustomerName:H?.name,onBack:U,onComplete:K},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:369,columnNumber:13},void 0):S==="inventory"&&y?e.jsxDEV(gs,{vehicleId:y.id,vehicleName:y.name||y.plateNumber,onBack:U},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:381,columnNumber:13},void 0):S==="new-customer"?e.jsxDEV(vs,{salesmanId:o?.username||o?.name||o?.id||"",vehicleId:y?.id,onBack:U,onSuccess:j=>{U()}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:391,columnNumber:13},void 0):S==="returns"&&y?e.jsxDEV(Ds,{vehicleId:y.id,salesmanId:o?.id,onBack:U,onComplete:j=>{U()}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:405,columnNumber:13},void 0):S==="receipt"?e.jsxDEV(Ss,{salesmanId:o?.id||"",onBack:U,onComplete:j=>{U()}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:419,columnNumber:13},void 0):S==="balances"?e.jsxDEV(ys,{onBack:U,onSelectCustomer:(j,W)=>{}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:435,columnNumber:13},void 0):S==="reprint"?e.jsxDEV(ws,{onBack:U,onOpenSettings:()=>I("printer-settings"),salesmanId:o?.id},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:447,columnNumber:13},void 0):S==="printer-settings"?e.jsxDEV(Vs,{onBack:U},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:457,columnNumber:13},void 0):S==="settlement"&&y?e.jsxDEV(Bs,{vehicleId:y.id,salesmanName:o?.username||o?.name,onBack:U,onSuccess:()=>{Q()}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:465,columnNumber:13},void 0):S==="expenses"?e.jsxDEV(js,{vehicleId:y?.id,salesmanId:o?.id,salesmanName:o?.username||o?.name,onBack:U},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:478,columnNumber:13},void 0):h?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[e.jsxDEV("div",{className:"absolute inset-0 border-4 border-indigo-500/30 rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:492,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute inset-0 border-4 border-t-indigo-400 rounded-full animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:493,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:491,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-indigo-200 animate-pulse font-medium",children:"جاري تحديث البيانات..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:495,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:490,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:489,columnNumber:13},void 0):e.jsxDEV("div",{className:"min-h-screen bg-slate-50 pb-24",dir:"rtl",children:[e.jsxDEV("div",{className:"relative bg-gradient-to-br from-indigo-800 via-purple-800 to-slate-900 pt-12 pb-28 px-6 overflow-hidden rounded-b-[2.5rem] shadow-2xl shadow-indigo-900/20",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:506,columnNumber:17},void 0),e.jsxDEV("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:507,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-indigo-300 text-sm font-medium mb-1 flex items-center gap-2",children:[e.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:513,columnNumber:33},void 0),oe()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:512,columnNumber:29},void 0),e.jsxDEV("h1",{className:"text-3xl font-black text-white tracking-tight",children:o?.name||"المندوب"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:516,columnNumber:29},void 0),y&&e.jsxDEV("div",{className:"flex items-center gap-2 mt-2 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-full w-fit border border-white/10",children:[e.jsxDEV(Un,{size:14,className:"text-indigo-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:519,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-indigo-100 text-xs font-bold",children:y.plateNumber||y.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:520,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:518,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:511,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>x(!p),disabled:i,className:`relative p-2.5 rounded-xl backdrop-blur-sm border transition-all active:scale-95 ${i?"bg-indigo-500/50 border-indigo-400/50":t?"bg-white/10 border-white/20 hover:bg-white/20":"bg-amber-500/30 border-amber-400/50"}`,children:[e.jsxDEV(De,{size:20,className:`text-white ${i?"animate-spin":""}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:536,columnNumber:33},void 0),s>0&&e.jsxDEV("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 text-white text-[10px] font-black rounded-full flex items-center justify-center border-2 border-purple-800",children:s},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:541,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:526,columnNumber:29},void 0),!t&&e.jsxDEV("span",{className:"bg-amber-500/90 backdrop-blur-sm text-white text-xs px-3 py-1.5 rounded-xl font-bold border border-amber-400/50 shadow-lg shadow-amber-500/20 flex items-center gap-1.5",children:[e.jsxDEV(Et,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:550,columnNumber:37},void 0),"غير متصل"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:549,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:524,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:510,columnNumber:21},void 0),p&&e.jsxDEV("div",{className:"mb-6 bg-slate-900/50 backdrop-blur-xl rounded-2xl p-4 border border-white/10 animate-in slide-in-from-top duration-300",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsxDEV(Nt,{size:18,className:"text-indigo-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:562,columnNumber:37},void 0),"المزامنة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:561,columnNumber:33},void 0),e.jsxDEV("span",{className:`text-xs font-medium px-2 py-1 rounded-lg ${t?"bg-emerald-500/20 text-emerald-300":"bg-amber-500/20 text-amber-300"}`,children:t?"متصل":"غير متصل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:565,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:560,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-indigo-200 text-xs mb-4 flex items-center gap-2",children:[e.jsxDEV(Co,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:572,columnNumber:33},void 0),"آخر مزامنة: ",Ns(r)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:571,columnNumber:29},void 0),w&&e.jsxDEV("div",{className:"bg-indigo-500/20 border border-indigo-400/30 rounded-xl p-3 mb-4 text-white text-sm font-medium flex items-center gap-2",children:[i?e.jsxDEV(De,{size:16,className:"animate-spin text-indigo-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:580,columnNumber:41},void 0):w.includes("✓")?e.jsxDEV(oo,{size:16,className:"text-emerald-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:582,columnNumber:41},void 0):e.jsxDEV(Uo,{size:16,className:"text-amber-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:584,columnNumber:41},void 0),w]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:578,columnNumber:33},void 0),m&&e.jsxDEV("div",{className:"bg-rose-500/20 border border-rose-400/30 rounded-xl p-3 mb-4 text-rose-200 text-sm",children:[m,e.jsxDEV("button",{onClick:N,className:"mr-2 text-white underline",children:"إغلاق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:594,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:592,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("button",{onClick:R,disabled:i||!t,className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-xl p-3 font-bold text-sm flex flex-col items-center gap-2 disabled:opacity-50 active:scale-95 transition-transform shadow-lg shadow-indigo-500/30",children:[e.jsxDEV(xt,{size:22},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:605,columnNumber:37},void 0),"تحميل البيانات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:600,columnNumber:33},void 0),e.jsxDEV("button",{onClick:B,disabled:i||!t||s===0,className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white rounded-xl p-3 font-bold text-sm flex flex-col items-center gap-2 disabled:opacity-50 active:scale-95 transition-transform shadow-lg shadow-emerald-500/30 relative",children:[e.jsxDEV(pt,{size:22},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:613,columnNumber:37},void 0),"رفع المعلقات",s>0&&e.jsxDEV("span",{className:"absolute top-2 left-2 bg-rose-500 text-white text-[10px] font-black px-1.5 py-0.5 rounded-lg",children:s},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:616,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:608,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:599,columnNumber:29},void 0),e.jsxDEV("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsxDEV("p",{className:"text-indigo-300 text-xs font-bold mb-2",children:"البيانات المحفوظة محلياً:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:625,columnNumber:33},void 0),e.jsxDEV("div",{className:"grid grid-cols-5 gap-2 text-center",children:[e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2",children:[e.jsxDEV("p",{className:"text-white font-black text-sm",children:a.products},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:628,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-indigo-300 text-[9px]",children:"منتج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:629,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:627,columnNumber:37},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2",children:[e.jsxDEV("p",{className:"text-white font-black text-sm",children:a.partners},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:632,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-indigo-300 text-[9px]",children:"عميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:633,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:631,columnNumber:37},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2",children:[e.jsxDEV("p",{className:"text-white font-black text-sm",children:a.invoices},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:636,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-indigo-300 text-[9px]",children:"فاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:637,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:635,columnNumber:37},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2",children:[e.jsxDEV("p",{className:"text-white font-black text-sm",children:a.vehicles},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:640,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-indigo-300 text-[9px]",children:"سيارة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:641,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:639,columnNumber:37},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2",children:[e.jsxDEV("p",{className:"text-white font-black text-sm",children:s},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:644,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-indigo-300 text-[9px]",children:"معلق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:645,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:643,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:626,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:624,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:559,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:509,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:504,columnNumber:13},void 0),e.jsxDEV("div",{className:"px-5 -mt-16 relative z-20",children:e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:Z.map((j,W)=>e.jsxDEV("button",{onClick:j.onClick,className:`bg-gradient-to-br ${j.gradient} rounded-3xl p-5 shadow-xl active:scale-95 transition-all duration-300 hover:scale-[1.02] border border-white/10 relative overflow-hidden group`,children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2 group-hover:bg-white/20 transition-colors"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:663,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative z-10 flex flex-col items-start gap-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20 shadow-inner group-hover:rotate-6 transition-transform duration-300",children:e.jsxDEV(j.icon,{size:24,className:"text-white",strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:667,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:666,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-white font-black text-xl tracking-tight",children:j.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:669,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:665,columnNumber:29},void 0)]},j.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:658,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:656,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:655,columnNumber:13},void 0),e.jsxDEV("div",{className:"px-5 mt-6",children:[e.jsxDEV("h2",{className:"text-lg font-black text-slate-800 mb-4 flex items-center gap-2",children:[e.jsxDEV(Cl,{size:20,className:"text-indigo-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:679,columnNumber:21},void 0),"التقارير"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:678,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxDEV("button",{onClick:()=>I("balances"),className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm hover:shadow-md transition-all flex flex-col items-center gap-2",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsxDEV(eo,{size:20,className:"text-red-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:689,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:688,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-slate-700 font-bold text-sm",children:"الأرصدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:691,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:684,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>I("reprint"),className:"bg-white rounded-2xl p-4 border border-slate-200 shadow-sm hover:shadow-md transition-all flex flex-col items-center gap-2",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:e.jsxDEV(zo,{size:20,className:"text-indigo-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:698,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:697,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-slate-700 font-bold text-sm",children:"الفواتير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:700,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:693,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:682,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:677,columnNumber:13},void 0),u.length>0&&e.jsxDEV("div",{className:"px-5 mt-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[e.jsxDEV(gn,{size:20,className:"text-indigo-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:710,columnNumber:29},void 0),"خط سير اليوم ",e.jsxDEV("span",{className:"text-slate-400 font-medium text-sm",children:["(",u.length,")"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:711,columnNumber:42},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:709,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>n("van-sales"),className:"text-indigo-600 text-xs font-bold bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-1",children:["عرض الخريطة",e.jsxDEV(qn,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:718,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:713,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:708,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white rounded-3xl shadow-lg shadow-slate-200/50 overflow-hidden border border-slate-100",children:u.slice(0,5).map((j,W)=>e.jsxDEV("div",{className:`p-4 flex items-center gap-4 ${W<Math.min(4,u.length-1)?"border-b border-slate-100":""} hover:bg-slate-50 transition-colors`,children:[e.jsxDEV("div",{className:"flex flex-col items-center",children:[L(j.status),W<u.length-1&&e.jsxDEV("div",{className:"w-0.5 h-8 bg-slate-100 mt-1 rounded-full"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:732,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:729,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:`font-bold text-sm truncate ${j.status==="VISITED"?"text-slate-400 line-through":"text-slate-800"}`,children:j.customerName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:736,columnNumber:37},void 0),j.address&&e.jsxDEV("p",{className:"text-xs text-slate-400 truncate mt-0.5 flex items-center gap-1",children:[e.jsxDEV(Do,{size:10},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:742,columnNumber:45},void 0),j.address]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:741,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:735,columnNumber:33},void 0),j.status==="VISITED"&&j.saleAmount?e.jsxDEV("span",{className:"bg-emerald-50 text-emerald-600 px-3 py-1 rounded-xl text-xs font-black border border-emerald-100",children:G(j.saleAmount)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:748,columnNumber:37},void 0):j.status==="PENDING"&&e.jsxDEV("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-xl text-xs font-bold shadow-lg shadow-indigo-500/20 active:scale-95 transition-transform",children:"بدء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:752,columnNumber:37},void 0)]},j.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:724,columnNumber:29},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:722,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:707,columnNumber:17},void 0),e.jsxDEV("div",{className:"px-5 mt-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"text-lg font-black text-slate-800",children:"آخر النشاطات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:765,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>I("reprint"),className:"text-indigo-600 text-xs font-bold bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-1",children:["السجل الكامل",e.jsxDEV(qn,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:771,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:766,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:764,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid gap-3",children:F.length===0?e.jsxDEV("div",{className:"bg-white rounded-3xl p-8 text-center shadow-sm border border-slate-100",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsxDEV(eo,{size:24,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:779,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:778,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-400 font-medium text-sm",children:"لا توجد زيارات اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:781,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>n("van-sales"),className:"text-indigo-600 text-xs font-bold mt-2",children:"ابدأ أول زيارة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:782,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:777,columnNumber:25},void 0):F.map(j=>e.jsxDEV("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg shadow-slate-200/50 ${j.result==="SALE"?"bg-gradient-to-br from-emerald-400 to-teal-500 text-white":j.result==="NO_SALE"?"bg-gradient-to-br from-rose-400 to-red-500 text-white":"bg-slate-100 text-slate-400"}`,children:j.result==="SALE"?e.jsxDEV(En,{size:20,className:"text-white",strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:795,columnNumber:45},void 0):e.jsxDEV(eo,{size:20,strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:797,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:791,columnNumber:37},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-800 text-sm",children:j.customerName||"عميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:801,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-1",children:[e.jsxDEV(Co,{size:10},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:803,columnNumber:45},void 0),new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:802,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:800,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:790,columnNumber:33},void 0),j.invoiceAmount>0&&e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"text-emerald-600 font-black text-sm",children:["+",G(j.invoiceAmount)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:810,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"مبيعات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:813,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:809,columnNumber:37},void 0)]},j.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:786,columnNumber:29},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:775,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:763,columnNumber:13},void 0),!t&&e.jsxDEV("div",{className:"fixed bottom-6 left-6 right-6 z-50",children:e.jsxDEV("div",{className:"bg-slate-900/90 backdrop-blur-md rounded-2xl p-4 flex items-center gap-4 shadow-2xl shadow-slate-900/20 border border-white/10 animate-bounce-subtle",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center shrink-0 shadow-lg shadow-amber-500/30",children:e.jsxDEV(Co,{size:20,className:"text-white",strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:827,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:826,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-bold text-white text-sm",children:"أنت في وضع عدم الاتصال"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:830,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs text-slate-300",children:"يتم حفظ العمليات محلياً"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:831,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:829,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:825,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:824,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/mobile/SalesmanDashboard.tsx",lineNumber:502,columnNumber:9},void 0)},Ue=n=>{if(n.status===$n.PAID||n.status==="PAID")return"PAID";if(n.status===$n.PARTIAL||n.status==="PARTIAL")return"PARTIAL";if(n.paymentMethod!==Yl.CREDIT&&n.paymentMethod!=="CREDIT")return"PAID";const o=parseFloat(n.paidAmount)||0,l=parseFloat(n.total)||0;return o>=l&&l>0?"PAID":o>0?"PARTIAL":"UNPAID"},ks={ShoppingCart:vn,Users:eo,ShoppingBag:En,Wallet:Pl,Package:Xe,Box:hl,CheckCircle:oo,AlertCircle:Uo,FileText:Je,Activity:Pt},dn=[{id:"sales",title:"المبيعات",icon:"ShoppingCart",color:"indigo",actions:[{label:"فاتورة بيع جديدة",view:"inv-sale"},{label:"مرتجع مبيعات",view:"inv-ret-sale"}]},{id:"customers",title:"العملاء",icon:"Users",color:"cyan",actions:[{label:"مقبوضات العملاء",view:"cust-payments"},{label:"كشف حساب",view:"cust-statement"},{label:"إجمالي الأرصدة",view:"cust-balances"}]},{id:"purchases",title:"المشتريات",icon:"ShoppingBag",color:"orange",actions:[{label:"فاتورة شراء",view:"inv-purchase"},{label:"مرتجع مشتريات",view:"inv-ret-purchase"},{label:"حسابات الموردين",view:"sup-statement"}]},{id:"treasury",title:"الخزينة",icon:"Wallet",color:"violet",actions:[{label:"تحويل داخلي",view:"money-transfer"},{label:"كشف حساب بنك",view:"banks"},{label:"إدارة الشيكات",view:"cheques"}]},{id:"inventory",title:"المخزون",icon:"Package",color:"emerald",actions:[{label:"جرد المخازن",view:"stock-taking"},{label:"رصيد المخزن",view:"stock-balance"},{label:"كارت الصنف",view:"item-movement"}]}],Is=["header","actions","recent_invoices","team_chat"],an=["header","actions","recent_invoices"],Ms=({onNavigate:n,currentView:o})=>{const[l,t]=d.useState(!1),[s,i]=d.useState(null);d.useEffect(()=>{(async()=>{try{if(window.Capacitor?.isNativePlatform?.()){const Z=localStorage.getItem("currentUser"),U=Z?JSON.parse(Z):null;if(i(U),U){if(["ADMIN","admin","MANAGER","manager","GENERAL_MANAGER","المدير","المدير العام","مسئول النظام"].includes(U.role)){t(!1);return}const K=["SALESMAN","salesman","SALES","sales","مبيعات","مندوب"].includes(U.role),j=!!U.vehicleId;(K||j)&&t(!0)}}}catch{}})()},[]);const{data:r}=Jl({limit:500}),a=r?.invoices||[],[m,E]=d.useState(!1),[c,N]=d.useState("today"),[h,b]=d.useState(!1),[p,x]=d.useState(()=>{const R=localStorage.getItem("dashboard_layout");return R?JSON.parse(R):an}),[w,P]=d.useState(()=>{const R=localStorage.getItem("dashboard_action_groups");return R?JSON.parse(R):dn}),[y,D]=d.useState(null),u=zt(Yn(Mn),Yn(kn,{coordinateGetter:cs})),f=(R,B="date")=>{const L=new Date,Z=new Date(L.getFullYear(),L.getMonth(),L.getDate()),U=new Date(Z);U.setDate(Z.getDate()-Z.getDay());const A=new Date(L.getFullYear(),L.getMonth(),1);return R.filter($=>{const K=new Date($[B]);switch(c){case"today":return K>=Z;case"week":return K>=U;case"month":return K>=A;default:return!0}})},v=d.useMemo(()=>{const R=localStorage.getItem("currentUser");return R?JSON.parse(R):{name:"المدير العام"}},[]),C=d.useMemo(()=>f(a),[a,c]),F=d.useMemo(()=>[...C].sort((R,B)=>{const L=new Date(R.createdAt||R.date).getTime();return new Date(B.createdAt||B.date).getTime()-L}).slice(0,5),[C]);if(l&&s)return e.jsxDEV(Hs,{onNavigate:n,user:s,externalScreen:o},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:265,columnNumber:16},void 0);const V=R=>{if(R.number&&R.number.length>0)return R.number;if(R.referenceNumber&&R.referenceNumber!=="INV-0000"&&R.referenceNumber.length>3)return R.referenceNumber;const B=R.id||"";return B.match(/^[A-Z]+-\d+$/i)?B:B.length>12?B.slice(0,8).toUpperCase():B||"N/A"},S=()=>{b(!0),setTimeout(()=>b(!1),1500)},I=R=>{const{active:B,over:L}=R;L&&B.id!==L.id&&x(Z=>{const U=Z.indexOf(B.id),A=Z.indexOf(L.id),$=An(Z,U,A);return localStorage.setItem("dashboard_layout",JSON.stringify($)),$})},H=()=>{x(an),P(dn),localStorage.setItem("dashboard_layout",JSON.stringify(an)),localStorage.setItem("dashboard_action_groups",JSON.stringify(dn)),E(!1)},O=()=>{localStorage.setItem("dashboard_layout",JSON.stringify(p)),localStorage.setItem("dashboard_action_groups",JSON.stringify(w)),E(!1)},Q=R=>{p.includes(R)?x(p.filter(B=>B!==R)):x([...p,R])},G=R=>{const B=w.map(L=>L.id===R.id?R:L);P(B),localStorage.setItem("dashboard_action_groups",JSON.stringify(B)),D(null)},oe=R=>{switch(R){case"header":return e.jsxDEV("div",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 p-4 sm:p-8 shadow-2xl",children:[e.jsxDEV("div",{className:"absolute inset-0 opacity-30",children:[e.jsxDEV("div",{className:"absolute -top-20 -right-20 w-72 h-72 sm:w-96 sm:h-96 bg-gradient-to-br from-violet-500 to-purple-500 rounded-full blur-3xl animate-pulse",style:{animationDuration:"4s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:356,columnNumber:29},void 0),e.jsxDEV("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-full blur-3xl animate-pulse",style:{animationDuration:"6s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:357,columnNumber:29},void 0),e.jsxDEV("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-gradient-to-br from-fuchsia-500 to-pink-500 rounded-full blur-3xl animate-pulse",style:{animationDuration:"5s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:358,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:355,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:362,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4 sm:gap-6",children:[e.jsxDEV("div",{className:"relative hidden sm:block",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl blur-lg opacity-60"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:368,columnNumber:37},void 0),e.jsxDEV("div",{className:"relative p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl shadow-xl border border-white/20",children:e.jsxDEV(ht,{size:32,className:"text-white",strokeWidth:2},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:370,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:369,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:367,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-purple-300 mb-1 font-medium text-[10px] sm:text-xs",children:[e.jsxDEV("span",{className:"flex h-2 w-2 relative",children:[e.jsxDEV("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:376,columnNumber:45},void 0),e.jsxDEV("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:377,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:375,columnNumber:41},void 0),e.jsxDEV("span",{children:["متصل الآن • ",new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:379,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:374,columnNumber:37},void 0),e.jsxDEV("h1",{className:"text-xl sm:text-3xl font-black text-white tracking-tight",children:["أهلاً، ",v.name,e.jsxDEV("span",{className:"inline-block mr-2 animate-bounce",style:{animationDuration:"2s"},children:"👋"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:383,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:381,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-purple-200 text-xs sm:text-sm mt-1 hidden sm:block",children:"لوحة التحكم الرئيسية • نظرة شاملة على الأداء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:385,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:373,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:366,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsxDEV("div",{className:"flex items-center bg-white/10 backdrop-blur-xl rounded-xl p-1 border border-white/10",children:[{id:"today",label:"اليوم",icon:Co},{id:"week",label:"الأسبوع",icon:Ro},{id:"month",label:"الشهر",icon:Ro},{id:"all",label:"الكل",icon:xl}].map(B=>e.jsxDEV("button",{onClick:()=>N(B.id),className:`px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg text-[10px] sm:text-xs font-bold transition-all flex items-center gap-1 ${c===B.id?"bg-white text-indigo-700 shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[e.jsxDEV(B.icon,{size:12,className:"hidden sm:block"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:407,columnNumber:45},void 0),B.label]},B.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:399,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:392,columnNumber:33},void 0),e.jsxDEV("button",{onClick:S,className:`p-2 sm:p-2.5 bg-white/10 hover:bg-white/20 rounded-xl text-white border border-white/10 transition-all ${h?"animate-spin":""}`,title:"تحديث البيانات",children:e.jsxDEV(De,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:419,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:414,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:390,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:364,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:353,columnNumber:21},void 0);case"actions":return e.jsxDEV("div",{className:"space-y-5",children:[e.jsxDEV("div",{className:"relative overflow-hidden bg-gradient-to-r from-slate-900 via-indigo-950 to-purple-950 rounded-2xl p-4 sm:p-5 shadow-xl",children:[e.jsxDEV("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsxDEV("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br from-indigo-500/30 to-purple-600/30 rounded-full blur-2xl animate-pulse",style:{animationDuration:"3s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:436,columnNumber:33},void 0),e.jsxDEV("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-gradient-to-br from-cyan-500/20 to-blue-600/20 rounded-full blur-2xl animate-pulse",style:{animationDuration:"4s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:437,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:435,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative flex items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl blur-md opacity-60 animate-pulse",style:{animationDuration:"2s"}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:442,columnNumber:37},void 0),e.jsxDEV("div",{className:"relative p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl shadow-lg",children:e.jsxDEV(Rt,{size:22,className:"text-white",strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:444,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:443,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:441,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-base sm:text-xl font-black text-white tracking-tight",children:"الوصول السريع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:448,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-xs sm:text-sm text-indigo-200/80",children:"اختصارات للعمليات الشائعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:449,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:447,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:440,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:433,columnNumber:25},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-5",children:w.map(B=>e.jsxDEV(As,{title:B.title,icon:ks[B.icon]||hl,color:B.color,actions:B.actions.map(L=>({label:L.label,onClick:()=>n(L.view)})),isEditing:m,onEdit:()=>D(B)},B.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:457,columnNumber:33},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:455,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:431,columnNumber:21},void 0);case"recent_invoices":return e.jsxDEV("div",{className:"bg-white/80 backdrop-blur-xl p-4 sm:p-6 rounded-2xl border border-slate-200/80 shadow-xl shadow-slate-200/50",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg shadow-indigo-500/20",children:e.jsxDEV(Je,{size:20,className:"text-white"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:482,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:481,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-sm sm:text-lg text-slate-800",children:"أحدث الفواتير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:485,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-[10px] sm:text-xs text-slate-500",children:c==="today"?"فواتير اليوم":c==="week"?"فواتير هذا الأسبوع":c==="month"?"فواتير هذا الشهر":"جميع الفواتير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:486,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:484,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:480,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>n("invoices"),className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-xs font-bold hover:bg-indigo-100 transition-colors",children:["عرض الكل",e.jsxDEV(Ct,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:498,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:493,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:479,columnNumber:25},void 0),e.jsxDEV("div",{className:"sm:hidden space-y-3",children:[F.map(B=>e.jsxDEV("div",{className:"bg-white p-4 rounded-xl border-2 border-slate-200 shadow-md",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-3",children:[e.jsxDEV("span",{className:"font-mono font-black text-xs text-slate-900 bg-slate-200 px-2 py-1 rounded-lg border border-slate-300",children:["#",V(B)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:507,columnNumber:41},void 0),e.jsxDEV("span",{className:`px-2.5 py-1 rounded-lg text-[10px] font-black shadow-sm ${Ue(B)==="PAID"?"bg-emerald-200 text-emerald-900 border border-emerald-300":Ue(B)==="PARTIAL"?"bg-amber-200 text-amber-900 border border-amber-300":"bg-rose-200 text-rose-900 border border-rose-300"}`,children:Ue(B)==="PAID"?"مدفوع":Ue(B)==="PARTIAL"?"جزئي":"غير مدفوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:508,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:506,columnNumber:37},void 0),e.jsxDEV("div",{className:"font-black text-base text-slate-900 truncate",children:B.partnerName||"نقدي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:512,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex justify-between items-center mt-3 pt-3 border-t-2 border-slate-200",children:[e.jsxDEV("span",{className:"text-xs text-slate-600 flex items-center gap-1 font-semibold",children:[e.jsxDEV(Ro,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:515,columnNumber:45},void 0),new Date(B.date).toLocaleDateString("ar-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:514,columnNumber:41},void 0),e.jsxDEV("span",{className:"font-black text-indigo-700 text-base",children:[B.total.toLocaleString()," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:518,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:513,columnNumber:37},void 0)]},B.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:505,columnNumber:33},void 0)),F.length===0&&e.jsxDEV("div",{className:"text-center py-8 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border-2 border-dashed border-indigo-200",children:[e.jsxDEV("div",{className:"p-3 bg-indigo-100 rounded-full w-fit mx-auto mb-2",children:e.jsxDEV(Je,{size:24,className:"text-indigo-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:525,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:524,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-sm font-black text-indigo-700",children:"لا توجد فواتير في هذه الفترة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:527,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:523,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:503,columnNumber:25},void 0),e.jsxDEV("div",{className:"hidden sm:block overflow-x-auto rounded-xl border-2 border-slate-300 shadow-sm",children:e.jsxDEV("table",{className:"w-full text-sm text-right",children:[e.jsxDEV("thead",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-xs border-b-2 border-slate-600",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3.5 font-black text-white tracking-wide",children:"رقم الفاتورة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:537,columnNumber:41},void 0),e.jsxDEV("th",{className:"px-4 py-3.5 font-black text-white tracking-wide",children:"العميل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:538,columnNumber:41},void 0),e.jsxDEV("th",{className:"px-4 py-3.5 font-black text-white tracking-wide",children:"التاريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:539,columnNumber:41},void 0),e.jsxDEV("th",{className:"px-4 py-3.5 font-black text-white tracking-wide text-left",children:"الإجمالي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:540,columnNumber:41},void 0),e.jsxDEV("th",{className:"px-4 py-3.5 font-black text-white tracking-wide text-center",children:"الحالة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:541,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:536,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:535,columnNumber:33},void 0),e.jsxDEV("tbody",{className:"divide-y-2 divide-slate-200",children:[F.map((B,L)=>e.jsxDEV("tr",{className:`hover:bg-indigo-100/50 transition-colors ${L%2===0?"bg-white":"bg-slate-100"}`,children:[e.jsxDEV("td",{className:"px-4 py-3.5",children:e.jsxDEV("span",{className:"font-mono font-black text-slate-900 bg-slate-200 px-2.5 py-1 rounded-lg text-xs border border-slate-300",children:["#",V(B)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:548,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:547,columnNumber:45},void 0),e.jsxDEV("td",{className:"px-4 py-3.5 font-bold text-slate-900",children:B.partnerName||"عميل نقدي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:550,columnNumber:45},void 0),e.jsxDEV("td",{className:"px-4 py-3.5 font-semibold text-slate-700",children:new Date(B.date).toLocaleDateString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:551,columnNumber:45},void 0),e.jsxDEV("td",{className:"px-4 py-3.5 font-black text-slate-900 text-left text-base",children:B.total.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:552,columnNumber:45},void 0),e.jsxDEV("td",{className:"px-4 py-3.5 text-center",children:e.jsxDEV("span",{className:`px-3 py-1.5 rounded-lg text-xs font-black shadow-sm ${Ue(B)==="PAID"?"bg-emerald-200 text-emerald-900 border border-emerald-300":Ue(B)==="PARTIAL"?"bg-amber-200 text-amber-900 border border-amber-300":"bg-rose-200 text-rose-900 border border-rose-300"}`,children:Ue(B)==="PAID"?"مدفوع":Ue(B)==="PARTIAL"?"جزئي":"غير مدفوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:554,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:553,columnNumber:45},void 0)]},B.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:546,columnNumber:41},void 0)),F.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:"text-center py-8",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[e.jsxDEV(Je,{size:32,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:567,columnNumber:53},void 0),e.jsxDEV("p",{className:"text-slate-500 font-bold",children:"لا توجد فواتير في هذه الفترة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:568,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:566,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:565,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:564,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:544,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:534,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:533,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:478,columnNumber:21},void 0);case"team_chat":return e.jsxDEV("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-slate-200/80 shadow-xl shadow-slate-200/50 overflow-hidden",children:[e.jsxDEV("div",{className:"p-4 bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-white/20 rounded-xl",children:e.jsxDEV(rn,{size:20,className:"text-white"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:584,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:583,columnNumber:29},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-white",children:"دردشة الفريق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:587,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-emerald-100 text-xs",children:"تواصل مع زملائك في الوقت الفعلي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:588,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:586,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:582,columnNumber:25},void 0),e.jsxDEV(St,{},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:591,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:581,columnNumber:21},void 0);default:return null}};return e.jsxDEV("div",{className:"space-y-5 pb-10",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV("div",{className:"text-sm text-slate-500",children:m?"قم بسحب وإفلات العناصر لترتيبها، أو قم بإخفائها.":""},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:604,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex gap-2",children:m?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:H,className:"px-3 py-1.5 text-xs font-bold text-slate-600 hover:bg-slate-100 rounded-lg flex items-center gap-1 transition-colors",children:[e.jsxDEV(pl,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:611,columnNumber:33},void 0)," استعادة الافتراضي"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:610,columnNumber:29},void 0),e.jsxDEV("button",{onClick:O,className:"px-4 py-1.5 text-xs font-bold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg flex items-center gap-1 shadow-sm transition-all animate-pulse",children:[e.jsxDEV(Fo,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:614,columnNumber:33},void 0)," حفظ الترتيب"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:613,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:609,columnNumber:25},void 0):e.jsxDEV("button",{onClick:()=>E(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg flex items-center gap-1 transition-colors border border-indigo-100",children:[e.jsxDEV(Kn,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:619,columnNumber:29},void 0)," تخصيص الواجهة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:618,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:607,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:603,columnNumber:13},void 0),m&&e.jsxDEV("div",{className:"bg-slate-50 border border-dashed border-slate-300 rounded-xl p-4 mb-4 animate-fade-in",children:[e.jsxDEV("h4",{className:"text-xs font-bold text-slate-500 mb-3 uppercase tracking-wider",children:"الأدوات المتاحة (اضغط للإضافة/الإزالة)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:628,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:Is.map(R=>e.jsxDEV("button",{onClick:()=>Q(R),className:`px-3 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${p.includes(R)?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white text-slate-500 border border-slate-200 hover:border-indigo-300 hover:text-indigo-600"}`,children:[p.includes(R)?e.jsxDEV(oo,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:639,columnNumber:63},void 0):e.jsxDEV(Ke,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:639,columnNumber:91},void 0),R==="header"&&"بطاقة الترحيب",R==="actions"&&"الوصول السريع",R==="recent_invoices"&&"أحدث الفواتير",R==="team_chat"&&"دردشة الفريق"]},R,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:631,columnNumber:29},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:629,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:627,columnNumber:17},void 0),e.jsxDEV(Qi,{sensors:u,collisionDetection:Qt,onDragEnd:I,children:e.jsxDEV(ns,{items:p,strategy:es,children:e.jsxDEV("div",{className:"space-y-5",children:p.map(R=>e.jsxDEV(fs,{id:R,isEditing:m,onRemove:()=>Q(R),children:oe(R)},R,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:661,columnNumber:29},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:659,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:655,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:650,columnNumber:13},void 0),p.length===0&&e.jsxDEV("div",{className:"text-center py-20 text-slate-400",children:[e.jsxDEV(Kn,{size:48,className:"mx-auto mb-4 opacity-20"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:676,columnNumber:21},void 0),e.jsxDEV("p",{children:'الواجهة فارغة. اضغط على "تخصيص الواجهة" لإضافة أدوات.'},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:677,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:675,columnNumber:17},void 0),y&&e.jsxDEV(Ts,{group:y,onSave:G,onClose:()=>D(null)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:683,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:601,columnNumber:9},void 0)},As=({title:n,icon:o,color:l,actions:t,isEditing:s,onEdit:i})=>{const r={teal:"from-teal-500 to-emerald-600",blue:"from-blue-500 to-indigo-600",indigo:"from-indigo-500 to-violet-600",violet:"from-violet-500 to-purple-600",purple:"from-purple-500 to-fuchsia-600",rose:"from-rose-500 to-pink-600",amber:"from-amber-500 to-orange-600",orange:"from-orange-500 to-red-500",emerald:"from-emerald-500 to-teal-600",cyan:"from-cyan-500 to-blue-600",slate:"from-slate-500 to-slate-700"},a={teal:"from-teal-50 via-emerald-50/50 to-white",blue:"from-blue-50 via-indigo-50/50 to-white",indigo:"from-indigo-50 via-violet-50/50 to-white",violet:"from-violet-50 via-purple-50/50 to-white",purple:"from-purple-50 via-fuchsia-50/50 to-white",rose:"from-rose-50 via-pink-50/50 to-white",amber:"from-amber-50 via-orange-50/50 to-white",orange:"from-orange-50 via-red-50/50 to-white",emerald:"from-emerald-50 via-teal-50/50 to-white",cyan:"from-cyan-50 via-blue-50/50 to-white",slate:"from-slate-50 via-gray-50/50 to-white"},m={teal:"hover:bg-teal-100/60 hover:text-teal-800 hover:border-teal-200",blue:"hover:bg-blue-100/60 hover:text-blue-800 hover:border-blue-200",indigo:"hover:bg-indigo-100/60 hover:text-indigo-800 hover:border-indigo-200",violet:"hover:bg-violet-100/60 hover:text-violet-800 hover:border-violet-200",purple:"hover:bg-purple-100/60 hover:text-purple-800 hover:border-purple-200",rose:"hover:bg-rose-100/60 hover:text-rose-800 hover:border-rose-200",amber:"hover:bg-amber-100/60 hover:text-amber-800 hover:border-amber-200",orange:"hover:bg-orange-100/60 hover:text-orange-800 hover:border-orange-200",emerald:"hover:bg-emerald-100/60 hover:text-emerald-800 hover:border-emerald-200",cyan:"hover:bg-cyan-100/60 hover:text-cyan-800 hover:border-cyan-200",slate:"hover:bg-slate-100/60 hover:text-slate-800 hover:border-slate-200"},E={teal:"text-teal-900",blue:"text-blue-900",indigo:"text-indigo-900",violet:"text-violet-900",purple:"text-purple-900",rose:"text-rose-900",amber:"text-amber-900",orange:"text-orange-900",emerald:"text-emerald-900",cyan:"text-cyan-900",slate:"text-slate-900"},c={teal:"border-teal-200/80",blue:"border-blue-200/80",indigo:"border-indigo-200/80",violet:"border-violet-200/80",purple:"border-purple-200/80",rose:"border-rose-200/80",amber:"border-amber-200/80",orange:"border-orange-200/80",emerald:"border-emerald-200/80",cyan:"border-cyan-200/80",slate:"border-slate-200/80"},N={teal:"shadow-teal-400/40",blue:"shadow-blue-400/40",indigo:"shadow-indigo-400/40",violet:"shadow-violet-400/40",purple:"shadow-purple-400/40",rose:"shadow-rose-400/40",amber:"shadow-amber-400/40",orange:"shadow-orange-400/40",emerald:"shadow-emerald-400/40",cyan:"shadow-cyan-400/40",slate:"shadow-slate-400/40"};return e.jsxDEV("div",{className:`relative backdrop-blur-xl p-4 sm:p-5 rounded-2xl flex flex-col hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 h-full border-2 ${c[l]||c.slate} shadow-xl group overflow-hidden bg-gradient-to-br ${a[l]||a.slate}`,children:[e.jsxDEV("div",{className:`absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r ${r[l]||r.slate}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:781,columnNumber:13},void 0),e.jsxDEV("div",{className:`absolute -top-16 -right-16 w-40 h-40 bg-gradient-to-br ${r[l]||r.slate} rounded-full blur-3xl opacity-10 group-hover:opacity-25 transition-all duration-500`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:784,columnNumber:13},void 0),e.jsxDEV("div",{className:`absolute -bottom-12 -left-12 w-32 h-32 bg-gradient-to-br ${r[l]||r.slate} rounded-full blur-2xl opacity-5 group-hover:opacity-15 transition-all duration-500`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:785,columnNumber:13},void 0),e.jsxDEV("div",{className:`absolute bottom-0 left-4 right-4 h-1 bg-gradient-to-r ${r[l]||r.slate} rounded-full opacity-0 group-hover:opacity-60 transition-all duration-300 blur-sm`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:788,columnNumber:13},void 0),s&&e.jsxDEV("button",{onClick:h=>{h.stopPropagation(),i()},className:"absolute top-3 left-3 p-2 bg-white/90 shadow-lg rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 z-20 opacity-0 group-hover:opacity-100 transition-all border border-slate-200",title:"تعديل المحتوى",children:e.jsxDEV(gt,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:796,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:791,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:`absolute inset-0 bg-gradient-to-br ${r[l]||r.slate} rounded-xl blur-lg opacity-50 group-hover:opacity-70 transition-opacity scale-110`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:804,columnNumber:21},void 0),e.jsxDEV("div",{className:`relative p-3 rounded-xl bg-gradient-to-br ${r[l]||r.slate} shadow-lg ${N[l]||N.slate} transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-300`,children:e.jsxDEV(o,{size:20,className:"text-white",strokeWidth:2.5},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:806,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:805,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:802,columnNumber:17},void 0),e.jsxDEV("h3",{className:`font-black ${E[l]||E.slate} text-base sm:text-lg tracking-tight`,children:n},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:809,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:801,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-1.5 flex-1 relative z-10",children:t.map((h,b)=>e.jsxDEV("button",{onClick:h.onClick,className:`w-full text-right text-xs sm:text-sm font-semibold text-slate-600 ${m[l]||m.slate} p-2.5 sm:p-3 rounded-xl transition-all duration-200 flex items-center justify-between group/action border border-transparent bg-white/50 backdrop-blur-sm hover:shadow-md`,children:[e.jsxDEV("span",{className:"truncate",children:h.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:820,columnNumber:25},void 0),e.jsxDEV(Ls,{size:14,className:"opacity-0 group-hover/action:opacity-100 transition-all flex-shrink-0 transform group-hover/action:-translate-x-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:821,columnNumber:25},void 0)]},b,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:815,columnNumber:21},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:813,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:779,columnNumber:9},void 0)},Ts=({group:n,onSave:o,onClose:l})=>{const[t,s]=d.useState(n),[i,r]=d.useState({label:"",view:""}),a=()=>{!i.label||!i.view||(s({...t,actions:[...t.actions,i]}),r({label:"",view:""}))},m=c=>{s({...t,actions:t.actions.filter((N,h)=>h!==c)})},E=[{id:"inv-sale",label:"فاتورة بيع"},{id:"inv-ret-sale",label:"مرتجع مبيعات"},{id:"inv-purchase",label:"فاتورة شراء"},{id:"inv-ret-purchase",label:"مرتجع مشتريات"},{id:"cust-payments",label:"مقبوضات العملاء"},{id:"cust-statement",label:"كشف حساب عميل"},{id:"cust-balances",label:"أرصدة العملاء"},{id:"cust-aging",label:"أعمار ديون العملاء"},{id:"cust-discount",label:"خصم مسموح به"},{id:"cust-prices",label:"قوائم الأسعار"},{id:"sup-payments",label:"سداد للموردين"},{id:"sup-statement",label:"كشف حساب مورد"},{id:"sup-balances",label:"أرصدة الموردين"},{id:"sup-aging",label:"أعمار ديون الموردين"},{id:"sup-discount",label:"خصم مكتسب"},{id:"money-transfer",label:"تحويل داخلي"},{id:"banks",label:"كشف حساب بنك"},{id:"cheques",label:"إدارة الشيكات"},{id:"stock-taking",label:"جرد المخازن"},{id:"stock-balance",label:"رصيد المخزن"},{id:"item-movement",label:"كارت الصنف"},{id:"invoices",label:"سجل الفواتير"},{id:"customers",label:"العملاء"},{id:"suppliers",label:"الموردين"},{id:"inventory",label:"المخزون"},{id:"treasury",label:"الخزينة"},{id:"accounting",label:"الحسابات"},{id:"settings",label:"الإعدادات"}];return e.jsxDEV("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:e.jsxDEV("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden border border-slate-200 flex flex-col max-h-[90vh]",children:[e.jsxDEV("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxDEV("h3",{className:"font-bold text-lg text-slate-800",children:["تعديل المجموعة: ",n.title]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:884,columnNumber:21},void 0),e.jsxDEV("button",{onClick:l,className:"text-slate-400 hover:text-rose-500",children:e.jsxDEV(Go,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:885,columnNumber:94},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:885,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:883,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-slate-500 mb-1.5",children:"عنوان المجموعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:892,columnNumber:29},void 0),e.jsxDEV("input",{type:"text",value:t.title,onChange:c=>s({...t,title:c.target.value}),className:"w-full border border-slate-300 rounded-lg p-2 text-sm"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:893,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:891,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-slate-500 mb-1.5",children:"اللون"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:901,columnNumber:29},void 0),e.jsxDEV("select",{value:t.color,onChange:c=>s({...t,color:c.target.value}),className:"w-full border border-slate-300 rounded-lg p-2 text-sm",children:[e.jsxDEV("option",{value:"teal",children:"تركواز"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:907,columnNumber:33},void 0),e.jsxDEV("option",{value:"blue",children:"أزرق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:908,columnNumber:33},void 0),e.jsxDEV("option",{value:"indigo",children:"نيلي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:909,columnNumber:33},void 0),e.jsxDEV("option",{value:"violet",children:"بنفسجي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:910,columnNumber:33},void 0),e.jsxDEV("option",{value:"purple",children:"أرجواني"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:911,columnNumber:33},void 0),e.jsxDEV("option",{value:"rose",children:"أحمر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:912,columnNumber:33},void 0),e.jsxDEV("option",{value:"orange",children:"برتقالي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:913,columnNumber:33},void 0),e.jsxDEV("option",{value:"amber",children:"أصفر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:914,columnNumber:33},void 0),e.jsxDEV("option",{value:"emerald",children:"أخضر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:915,columnNumber:33},void 0),e.jsxDEV("option",{value:"cyan",children:"سماوي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:916,columnNumber:33},void 0),e.jsxDEV("option",{value:"slate",children:"رمادي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:917,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:902,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:900,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:890,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-xs font-bold text-slate-500 mb-2",children:"الإجراءات (الروابط)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:924,columnNumber:25},void 0),e.jsxDEV("div",{className:"space-y-2 mb-3",children:t.actions.map((c,N)=>e.jsxDEV("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded-lg border border-slate-200",children:[e.jsxDEV("span",{className:"text-xs font-bold text-slate-700 flex-1",children:c.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:928,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-[10px] font-mono text-slate-400 bg-white px-1.5 py-0.5 rounded border border-slate-100",children:c.view},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:929,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>m(N),className:"text-slate-400 hover:text-rose-500 p-1",children:e.jsxDEV(Dn,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:930,columnNumber:136},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:930,columnNumber:37},void 0)]},N,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:927,columnNumber:33},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:925,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex gap-2 items-end bg-indigo-50/50 p-3 rounded-xl border border-indigo-100",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("label",{className:"block text-[10px] font-bold text-indigo-400 mb-1",children:"اسم الرابط"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:938,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",value:i.label,onChange:c=>r({...i,label:c.target.value}),className:"w-full border border-indigo-200 rounded-lg p-1.5 text-xs",placeholder:"مثال: فاتورة جديدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:939,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:937,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("label",{className:"block text-[10px] font-bold text-indigo-400 mb-1",children:"الوجهة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:948,columnNumber:33},void 0),e.jsxDEV("select",{value:i.view,onChange:c=>r({...i,view:c.target.value}),className:"w-full border border-indigo-200 rounded-lg p-1.5 text-xs",children:[e.jsxDEV("option",{value:"",children:"اختر الوجهة..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:954,columnNumber:37},void 0),E.map(c=>e.jsxDEV("option",{value:c.id,children:c.label},c.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:956,columnNumber:41},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:949,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:947,columnNumber:29},void 0),e.jsxDEV("button",{onClick:a,disabled:!i.label||!i.view,className:"bg-indigo-600 text-white p-1.5 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsxDEV(Ke,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:965,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:960,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:936,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:923,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:888,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[e.jsxDEV("button",{onClick:l,className:"px-4 py-2 rounded-lg font-bold text-slate-600 hover:bg-slate-200 text-sm",children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:972,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>o(t),className:"px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm text-sm flex items-center gap-2",children:[e.jsxDEV(Fo,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:974,columnNumber:25},void 0)," حفظ التغييرات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:973,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:971,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:882,columnNumber:13},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:881,columnNumber:9},void 0)};function Ls({size:n,className:o}){return e.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:e.jsxDEV("path",{d:"m15 18-6-6 6-6"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:996,columnNumber:13},this)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/DashboardV2.tsx",lineNumber:984,columnNumber:9},this)}const _s=Object.freeze(Object.defineProperty({__proto__:null,DashboardV2:Ms},Symbol.toStringTag,{value:"Module"}));export{_s as D,vo as E};
