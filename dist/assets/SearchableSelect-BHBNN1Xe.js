import{j as t}from"./index-DYLume9J.js";import{r as n,a as $}from"./react-vendor-CJgqbvH4.js";import{h as k,a6 as z,an as T}from"./ui-vendor-BUxR0pcK.js";const A=({options:d,value:m,onChange:j,placeholder:H="اختر...",className:B="",disabled:R=!1,label:b,onSearch:i,isLoading:F=!1})=>{const f=n.useId(),P=`${f}-label`,[o,u]=n.useState(!1),[s,p]=n.useState(""),[E,v]=n.useState(""),[x,V]=n.useState({top:0,left:0,width:0}),r=n.useRef(null),a=n.useRef(null),N=n.useRef(null);n.useEffect(()=>{const e=setTimeout(()=>{v(s),i&&s.length>=2&&i(s)},300);return()=>clearTimeout(e)},[s,i]),n.useEffect(()=>{const e=h=>{const D=h.target,O=r.current&&!r.current.contains(D),I=a.current&&!a.current.contains(D);O&&I&&u(!1)},l=h=>{a.current&&a.current.contains(h.target)||o&&u(!1)};return o&&(document.addEventListener("mousedown",e),window.addEventListener("scroll",l,!0),window.addEventListener("resize",l)),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",l,!0),window.removeEventListener("resize",l)}},[o]),n.useEffect(()=>{o&&N.current&&N.current.focus(),o||(p(""),v(""))},[o]);const S=e=>{if(!R){if(e.stopPropagation(),e.preventDefault(),!o&&r.current){const l=r.current.getBoundingClientRect();V({top:l.bottom+window.scrollY+4,left:l.left+window.scrollX,width:l.width})}u(!o)}},c=d.find(e=>e.id===m),g=n.useMemo(()=>{if(!E)return d;const e=E.toLowerCase();return d.filter(l=>l.label.toLowerCase().includes(e)||l.subLabel&&l.subLabel.toLowerCase().includes(e))},[d,E]),C=50,w=g.slice(0,C),y=g.length>C,L=o?t.jsxDEV("div",{ref:a,className:"absolute z-[9999] bg-white border border-slate-200 rounded-xl shadow-2xl overflow-hidden animate-fade-in font-sans",style:{top:x.top,left:x.left,width:x.width,maxHeight:"300px"},onMouseDown:e=>e.stopPropagation(),children:[t.jsxDEV("div",{className:"p-2 border-b border-slate-100 bg-slate-50",children:t.jsxDEV("div",{className:"relative",children:[t.jsxDEV(k,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:140,columnNumber:11},void 0),t.jsxDEV("input",{ref:N,id:`search-${f}`,name:`search-${f}`,"aria-label":"بحث",type:"text",className:"w-full pl-2 pr-9 py-2 text-sm border border-slate-200 rounded-lg outline-none focus:border-teal-500 bg-white text-slate-800",placeholder:"بحث...",value:s,onChange:e=>p(e.target.value)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:141,columnNumber:11},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:139,columnNumber:9},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:138,columnNumber:7},void 0),t.jsxDEV("div",{className:"overflow-y-auto p-1 scrollbar-thin scrollbar-thumb-slate-200",style:{maxHeight:"240px"},children:F?t.jsxDEV("div",{className:"p-4 text-center text-xs text-slate-400 animate-pulse",children:"جاري البحث..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:156,columnNumber:11},void 0):w.length===0?t.jsxDEV("div",{className:"p-4 text-center text-xs text-slate-400",children:i&&s.length<2?"اكتب حرفين على الأقل للبحث...":"لا توجد نتائج مطابقة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:158,columnNumber:11},void 0):t.jsxDEV(t.Fragment,{children:[w.map(e=>t.jsxDEV("div",{onClick:l=>{l.stopPropagation(),j(e.id),u(!1)},className:`
                                p-2 rounded-lg cursor-pointer flex justify-between items-center transition-colors mb-1
                                ${e.id===m?"bg-teal-50 text-teal-700":"hover:bg-slate-50 text-slate-700"}
                              `,children:[t.jsxDEV("div",{className:"flex-1 text-right",children:[t.jsxDEV("div",{className:"font-bold text-sm",children:e.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:175,columnNumber:19},void 0),e.subLabel&&t.jsxDEV("div",{className:"text-xs opacity-70",children:e.subLabel},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:176,columnNumber:36},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:174,columnNumber:17},void 0),e.id===m&&t.jsxDEV(z,{size:16,className:"text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:178,columnNumber:38},void 0)]},e.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:162,columnNumber:15},void 0)),y&&t.jsxDEV("div",{className:"p-2 text-center text-xs text-slate-400 border-t border-slate-100 mt-1 bg-slate-50 rounded-lg",children:["يتم عرض أول ",C," نتيجة. يرجى البحث للوصول للمزيد..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:160,columnNumber:11},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:154,columnNumber:7},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:127,columnNumber:5},void 0):null;return t.jsxDEV("div",{className:`relative ${B}`,ref:r,children:[b&&t.jsxDEV("label",{id:P,className:"block text-sm font-bold text-slate-700 mb-1.5",children:b},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:194,columnNumber:17},void 0),t.jsxDEV("div",{role:"combobox","aria-haspopup":"listbox","aria-expanded":o,"aria-labelledby":b?P:void 0,tabIndex:0,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),S(e))},className:`
          w-full border rounded-lg bg-white flex items-center justify-between relative transition-all
          ${R?"bg-slate-50 cursor-not-allowed text-slate-400 border-slate-200":"cursor-pointer hover:border-teal-500 border-slate-300"}
          ${o?"ring-2 ring-teal-100 border-teal-500":""}
        `,onClick:S,style:{minHeight:"46px"},children:[t.jsxDEV("div",{className:"flex-1 px-3 py-2 truncate",children:c?t.jsxDEV("div",{className:"flex flex-col leading-tight text-right",children:[t.jsxDEV("span",{className:"text-slate-800 font-bold text-sm",children:c.label},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:218,columnNumber:15},void 0),c.subLabel&&t.jsxDEV("span",{className:"text-[10px] text-slate-400",children:c.subLabel},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:219,columnNumber:43},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:217,columnNumber:13},void 0):t.jsxDEV("span",{className:"text-slate-400 text-sm",children:H},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:222,columnNumber:13},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:215,columnNumber:9},void 0),t.jsxDEV("div",{className:"px-3 text-slate-400 border-r border-slate-100 h-full flex items-center justify-center",children:t.jsxDEV(T,{size:16,className:`transition-transform ${o?"rotate-180":""}`},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:226,columnNumber:11},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:225,columnNumber:9},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:195,columnNumber:7},void 0),$.createPortal(L,document.body)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/SearchableSelect.tsx",lineNumber:193,columnNumber:5},void 0)};export{A as S};
