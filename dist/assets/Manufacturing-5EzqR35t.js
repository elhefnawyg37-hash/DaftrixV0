import{a as I,j as e,S as T,U as D}from"./index-ClLebFGB.js";import{r as a,a as ye}from"./react-vendor-CJgqbvH4.js";import{A as ie,C as xe}from"./Modal-B8OjtfDY.js";import{D as ue}from"./DatePicker-DOgS7jvV.js";import{z as _e,X as Ee,P as Y,bG as Se,I as Ne,bH as Ve,ae as Re,a as ne,ah as te,ad as Ae,d as oe,j as Q,Z as De,A as Ie,aT as ze,h as Pe,a9 as ae,N as J,g as pe,R as K,aO as be,am as Te,an as Le,aY as qe,a5 as Be,n as Ue,aN as $e,F as ee,a7 as ge,bb as ve,t as We,s as Ge,K as he,aU as Qe,aA as Ze,ax as je,aJ as fe,ai as le,ac as de,b2 as Ye,E as we,aL as Xe}from"./ui-vendor-DNgltnAO.js";import{v as Fe,x as ce}from"./utils-vendor-5vCYNseS.js";import"./query-vendor-GtDMnHGN.js";import"./socket-vendor-TjCxX7sJ.js";const Oe=({onClose:c,onSuccess:P,initialBomId:j})=>{const[b,V]=a.useState([]),[p,H]=a.useState(!0),[O,v]=a.useState(!1),[B,S]=a.useState(!1),[i,R]=a.useState({bomId:"",quantity:1,dueDate:"",notes:"",sourceWarehouseId:"",destWarehouseId:""}),[x,r]=a.useState(null),[l,h]=a.useState(null),[F,g]=a.useState([]),[k,E]=a.useState({isOpen:!1,message:"",type:"error"}),q=(s,z="error")=>{E({isOpen:!0,message:s,type:z})},[n,M]=a.useState({isOpen:!1});a.useEffect(()=>{u(),N()},[]);const u=async()=>{try{const s=await I.getBOMs();if(V(s),j){const z=s.find(W=>W.id===j);z&&(R(W=>({...W,bomId:j})),r(z))}}catch{}finally{H(!1)}},N=async()=>{try{const s=await I.getMasterData("warehouses");g(s),s.length>0&&R(z=>({...z,sourceWarehouseId:z.sourceWarehouseId||s[0].id,destWarehouseId:z.destWarehouseId||(s.length>1?s[1].id:s[0].id)}))}catch{}};a.useEffect(()=>{i.bomId&&i.quantity>0?L():h(null)},[i.bomId,i.quantity,i.sourceWarehouseId]);const L=async()=>{if(!(!i.bomId||i.quantity<=0)){S(!0);try{const s=await I.calculateBOMRequirements(i.bomId,i.quantity,i.sourceWarehouseId||void 0);h(s)}catch{h(null)}finally{S(!1)}}},_=s=>{R({...i,bomId:s});const z=b.find(W=>W.id===s);r(z)},$=a.useMemo(()=>{if(!l||l.requirements.length===0)return null;let s=1/0;for(const z of l.requirements)if(z.quantityWithWaste>0){const W=Math.floor(z.currentStock/z.quantityWithWaste);s=Math.min(s,W)}return s===1/0?null:s},[l]),m=a.useMemo(()=>!l||i.quantity<=0?0:l.totalMaterialCost/i.quantity,[l,i.quantity]),d=async s=>{if(s.preventDefault(),!i.bomId||i.quantity<=0){q("يرجى إدخال جميع البيانات المطلوبة","warning");return}if(l?.hasShortage){M({isOpen:!0});return}o()},o=async()=>{v(!0);try{const s=Fe(),z=`PO-${Date.now().toString(36).toUpperCase()}`;await I.createProductionOrder({id:s,orderNumber:z,bomId:i.bomId,finishedProductId:x?.finishedProductId,qtyPlanned:i.quantity,sourceWarehouseId:i.sourceWarehouseId||null,destWarehouseId:i.destWarehouseId||null,warehouseId:i.sourceWarehouseId||null,startDate:new Date().toISOString().split("T")[0],endDate:i.dueDate||new Date().toISOString().split("T")[0],notes:i.notes,createdBy:JSON.parse(localStorage.getItem("currentUser")||"{}").name||"System"}),P()}catch(s){q("فشل إنشاء أمر التصنيع: "+(s.message||"خطأ غير معروف"),"error")}finally{v(!1)}},f=s=>new Intl.NumberFormat("en-EG",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s),y=s=>parseFloat(s.toFixed(6)).toString();return e.jsxDEV(e.Fragment,{children:[ye.createPortal(e.jsxDEV("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-in fade-in zoom-in duration-200 max-h-[90vh] flex flex-col",children:[e.jsxDEV("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-teal-50 to-blue-50 shrink-0",children:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsxDEV(_e,{className:"text-teal-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:240,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:239,columnNumber:41},void 0),"أمر تصنيع جديد"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:238,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-1 text-sm",children:"إنشاء أمر تصنيع مع معاينة التكلفة والمخزون"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:244,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:237,columnNumber:33},void 0),e.jsxDEV("button",{onClick:c,className:"text-slate-400 hover:text-rose-600 transition-colors p-2 hover:bg-rose-50 rounded-lg",children:e.jsxDEV(Ee,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:250,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:246,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:236,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:235,columnNumber:25},void 0),e.jsxDEV("form",{onSubmit:d,className:"flex-1 overflow-y-auto",children:[e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsxDEV(Y,{size:16,className:"text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:261,columnNumber:41},void 0),"المنتج المراد تصنيعه",e.jsxDEV("span",{className:"text-rose-500",children:"*"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:263,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:260,columnNumber:37},void 0),e.jsxDEV("select",{value:i.bomId,onChange:s=>_(s.target.value),required:!0,className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none transition-all text-lg",disabled:p,children:[e.jsxDEV("option",{value:"",children:"-- اختر المنتج --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:272,columnNumber:41},void 0),b.map(s=>e.jsxDEV("option",{value:s.id,children:[s.finishedProductName," (",s.name,")"]},s.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:274,columnNumber:45},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:265,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:259,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center justify-between",children:[e.jsxDEV("span",{className:"flex items-center gap-2",children:[e.jsxDEV(Se,{size:16,className:"text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:285,columnNumber:45},void 0),"الكمية المطلوبة",e.jsxDEV("span",{className:"text-rose-500",children:"*"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:287,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:284,columnNumber:41},void 0),$!==null&&e.jsxDEV("span",{className:"text-xs font-normal text-slate-500 flex items-center gap-1",children:[e.jsxDEV(Ne,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:291,columnNumber:49},void 0),"الحد الأقصى الممكن:",e.jsxDEV("button",{type:"button",onClick:()=>R({...i,quantity:$}),className:"text-teal-600 hover:text-teal-700 font-bold underline",children:[$," وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:293,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:290,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:283,columnNumber:37},void 0),e.jsxDEV("input",{type:"number",min:"1",value:i.quantity,onChange:s=>R({...i,quantity:parseFloat(s.target.value)||0}),required:!0,className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none transition-all text-lg font-bold",placeholder:"100"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:303,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:282,columnNumber:33},void 0),F.length>0&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsxDEV(Ve,{size:16,className:"text-orange-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:320,columnNumber:49},void 0),"مخزن المواد الخام",e.jsxDEV("span",{className:"text-rose-500",children:"*"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:322,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:319,columnNumber:45},void 0),e.jsxDEV("select",{value:i.sourceWarehouseId,onChange:s=>R({...i,sourceWarehouseId:s.target.value}),className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-orange-100 focus:border-orange-400 outline-none transition-all",children:[e.jsxDEV("option",{value:"",children:"-- اختر المخزن --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:329,columnNumber:49},void 0),F.map(s=>e.jsxDEV("option",{value:s.id,children:s.name},s.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:331,columnNumber:53},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:324,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"المخزن الذي سيتم سحب المواد الخام منه"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:336,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:318,columnNumber:41},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsxDEV(Ve,{size:16,className:"text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:342,columnNumber:49},void 0),"مخزن المنتج التام",e.jsxDEV("span",{className:"text-rose-500",children:"*"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:344,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:341,columnNumber:45},void 0),e.jsxDEV("select",{value:i.destWarehouseId,onChange:s=>R({...i,destWarehouseId:s.target.value}),className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none transition-all",children:[e.jsxDEV("option",{value:"",children:"-- اختر المخزن --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:351,columnNumber:49},void 0),F.map(s=>e.jsxDEV("option",{value:s.id,children:s.name},s.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:353,columnNumber:53},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:346,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"المخزن الذي سيتم إضافة المنتجات المصنعة إليه"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:358,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:340,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:316,columnNumber:37},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsxDEV(Re,{size:16,className:"text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:366,columnNumber:41},void 0),"تاريخ التسليم المتوقع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:365,columnNumber:37},void 0),e.jsxDEV(ue,{value:i.dueDate,onChange:s=>R({...i,dueDate:s})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:369,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:364,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsxDEV(ne,{size:16,className:"text-slate-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:378,columnNumber:41},void 0),"ملاحظات (اختياري)"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:377,columnNumber:37},void 0),e.jsxDEV("textarea",{value:i.notes,onChange:s=>R({...i,notes:s.target.value}),rows:2,className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none transition-all resize-none",placeholder:"أي ملاحظات إضافية..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:381,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:376,columnNumber:33},void 0),l&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-emerald-700 mb-2",children:[e.jsxDEV(te,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:396,columnNumber:49},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"التكلفة الإجمالية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:397,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:395,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-emerald-800",children:f(l.totalMaterialCost)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:399,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-emerald-600 mt-1",children:"جنيه مصري"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:402,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:394,columnNumber:41},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[e.jsxDEV(Ae,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:408,columnNumber:49},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"تكلفة الوحدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:409,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:407,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-800",children:f(m)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:411,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-blue-600 mt-1",children:"لكل وحدة منتجة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:414,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:406,columnNumber:41},void 0),e.jsxDEV("div",{className:`border rounded-xl p-4 ${l.hasShortage?"bg-gradient-to-br from-rose-50 to-orange-50 border-rose-200":"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200"}`,children:[e.jsxDEV("div",{className:`flex items-center gap-2 mb-2 ${l.hasShortage?"text-rose-700":"text-green-700"}`,children:[l.hasShortage?e.jsxDEV(oe,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:424,columnNumber:77},void 0):e.jsxDEV(Q,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:424,columnNumber:107},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"حالة المخزون"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:425,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:422,columnNumber:45},void 0),e.jsxDEV("p",{className:`text-lg font-bold ${l.hasShortage?"text-rose-800":"text-green-800"}`,children:l.hasShortage?"يوجد نقص":"متوفر بالكامل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:427,columnNumber:45},void 0),e.jsxDEV("p",{className:`text-xs mt-1 ${l.hasShortage?"text-rose-600":"text-green-600"}`,children:[l.requirements.filter(s=>s.hasShortage).length," مادة ناقصة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:431,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:418,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:392,columnNumber:37},void 0),l&&l.requirements.length>0&&e.jsxDEV("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[e.jsxDEV("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200",children:e.jsxDEV("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsxDEV(Se,{size:18,className:"text-slate-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:444,columnNumber:49},void 0),"المواد الخام المطلوبة",B&&e.jsxDEV("span",{className:"text-xs text-slate-500 animate-pulse",children:"جاري الحساب..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:447,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:443,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:442,columnNumber:41},void 0),e.jsxDEV("div",{className:"divide-y divide-slate-100 max-h-64 overflow-y-auto",children:l.requirements.map((s,z)=>e.jsxDEV("div",{className:`p-4 flex items-center justify-between gap-4 hover:bg-slate-50 transition-colors ${s.hasShortage?"bg-rose-50/50":""}`,children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[s.hasShortage?e.jsxDEV(oe,{size:16,className:"text-rose-500 shrink-0"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:461,columnNumber:65},void 0):e.jsxDEV(Q,{size:16,className:"text-emerald-500 shrink-0"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:463,columnNumber:65},void 0),e.jsxDEV("span",{className:"font-medium text-slate-800 truncate",children:s.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:465,columnNumber:61},void 0),e.jsxDEV("span",{className:"text-xs text-slate-400 shrink-0",children:["(",s.sku,")"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:468,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:459,columnNumber:57},void 0),s.hasShortage&&e.jsxDEV("p",{className:"text-xs text-rose-600 mt-1 mr-6",children:["نقص: ",y(s.shortage)," ",s.unit]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:473,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:458,columnNumber:53},void 0),e.jsxDEV("div",{className:"text-left shrink-0 space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV("span",{className:"text-slate-500",children:"مطلوب:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:480,columnNumber:61},void 0),e.jsxDEV("span",{className:"font-bold text-slate-800",children:[y(s.totalRequired)," ",s.unit]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:481,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:479,columnNumber:57},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxDEV("span",{className:"text-slate-400",children:"متاح:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:486,columnNumber:61},void 0),e.jsxDEV("span",{className:s.hasShortage?"text-rose-600 font-medium":"text-emerald-600",children:[y(s.currentStock)," ",s.unit]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:487,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:485,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:478,columnNumber:53},void 0),e.jsxDEV("div",{className:"text-left shrink-0 border-r border-slate-200 pr-4",children:[e.jsxDEV("div",{className:"text-xs text-slate-400",children:"التكلفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:493,columnNumber:57},void 0),e.jsxDEV("div",{className:"font-bold text-slate-700",children:f(s.totalCost)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:494,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:492,columnNumber:53},void 0)]},z,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:453,columnNumber:49},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:451,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:441,columnNumber:37},void 0),i.bomId&&B&&e.jsxDEV("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 text-center",children:[e.jsxDEV("div",{className:"animate-spin w-8 h-8 border-3 border-teal-500 border-t-transparent rounded-full mx-auto mb-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:507,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-slate-600",children:"جاري حساب المتطلبات..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:508,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:506,columnNumber:37},void 0),e.jsxDEV("div",{className:"bg-gradient-to-r from-teal-50 to-blue-50 border border-teal-200 rounded-xl p-4 text-sm text-teal-800 flex items-start gap-3",children:[e.jsxDEV(De,{size:20,className:"shrink-0 mt-0.5 text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:514,columnNumber:37},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold mb-1",children:"الوضع المبسط"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:516,columnNumber:41},void 0),e.jsxDEV("p",{className:"leading-relaxed text-teal-700",children:["سيتم إنشاء أمر التصنيع وحجز المواد تلقائياً.",l?.hasShortage&&e.jsxDEV("span",{className:"text-rose-600 font-medium",children:" تنبيه: قد لا تتمكن من بدء الإنتاج حتى توفير المواد الناقصة."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:520,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:517,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:515,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:513,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:257,columnNumber:29},void 0),e.jsxDEV("div",{className:"p-6 border-t border-slate-100 bg-slate-50 shrink-0",children:[e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{type:"button",onClick:c,className:"flex-1 py-3 rounded-xl border-2 border-slate-300 text-slate-700 font-bold hover:bg-slate-100 transition-colors",disabled:O,children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:530,columnNumber:37},void 0),e.jsxDEV("button",{type:"submit",disabled:O||!i.bomId||i.quantity<=0,className:`flex-1 py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${l?.hasShortage?"bg-amber-500 hover:bg-amber-600 text-white shadow-lg shadow-amber-200":"bg-teal-600 hover:bg-teal-700 text-white shadow-lg shadow-teal-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:O?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"animate-spin",children:"⏳"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:548,columnNumber:49},void 0),"جاري الإنشاء..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:547,columnNumber:45},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ie,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:553,columnNumber:49},void 0),l?.hasShortage?"إنشاء مع تحذير":"إنشاء الأمر"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:552,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:538,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:529,columnNumber:33},void 0),l&&e.jsxDEV("div",{className:"mt-4 pt-4 border-t border-slate-200 flex items-center justify-between text-sm",children:[e.jsxDEV("span",{className:"text-slate-500",children:"إجمالي تكلفة المواد:"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:563,columnNumber:41},void 0),e.jsxDEV("span",{className:"font-bold text-lg text-slate-800",children:[f(l.totalMaterialCost)," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:564,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:562,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:528,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:256,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:233,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:232,columnNumber:17},void 0),document.body),e.jsxDEV(ie,{isOpen:k.isOpen,onClose:()=>E({...k,isOpen:!1}),message:k.message,type:k.type},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:577,columnNumber:13},void 0),e.jsxDEV(xe,{isOpen:n.isOpen,onClose:()=>M({isOpen:!1}),onConfirm:()=>{M({isOpen:!1}),o()},title:"تحذير: نقص في المواد الخام",message:"هناك نقص في بعض المواد الخام. هل تريد المتابعة على أي حال؟"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:585,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionFormSimple.tsx",lineNumber:230,columnNumber:9},void 0)},ke=({editBomId:c,onClose:P,onSuccess:j})=>{const[b,V]=a.useState([]),[p,H]=a.useState(!0),[O,v]=a.useState(!1),[B,S]=a.useState(""),[i,R]=a.useState(!1),[x,r]=a.useState({name:"",finishedProductId:"",finishedProductName:"",notes:""}),[l,h]=a.useState([]),[F,g]=a.useState({show:!1,message:"",type:"warning"}),k=(d,o="warning")=>g({show:!0,message:d,type:o});a.useEffect(()=>{q()},[]),a.useEffect(()=>{c&&b.length>0&&E(c)},[c,b]);const E=async d=>{try{const o=await I.getBOMById(d);r({name:o.name||"",finishedProductId:o.finishedProductId,finishedProductName:o.finishedProductName||b.find(f=>f.id===o.finishedProductId)?.name||"",notes:o.notes||""}),o.items&&o.items.length>0&&h(o.items.map(f=>({productId:f.rawProductId,productName:f.rawProductName||b.find(y=>y.id===f.rawProductId)?.name||"",quantity:f.quantityPerUnit,quantityStr:String(f.quantityPerUnit),unit:f.unit||b.find(y=>y.id===f.rawProductId)?.unit||"وحدة"})))}catch{}},q=async()=>{try{const d=await I.getProducts();V(d)}catch{}finally{H(!1)}},n=b.filter(d=>d.type==="FINISHED"||d.isManufactured),u=b.filter(d=>d.type==="RAW"||d.type==="RAW_MATERIAL").filter(d=>(d.name||"").toLowerCase().includes(B.toLowerCase())||(d.sku||"").toLowerCase().includes(B.toLowerCase())),N=d=>{r({...x,finishedProductId:d.id,finishedProductName:d.name||"",name:`وصفة ${d.name||""}`})},L=d=>{if(l.some(o=>o.productId===d.id)){k("هذه المادة مضافة بالفعل","warning");return}h([...l,{productId:d.id,productName:d.name||"",quantity:1,quantityStr:"1",unit:d.unit||"وحدة"}]),S(""),R(!1)},_=(d,o)=>{const f=[...l];f[d].quantityStr=o;const y=parseFloat(o);f[d].quantity=isNaN(y)?0:y,h(f)},$=d=>{const o=[...l];o.splice(d,1),h(o)},m=async d=>{if(d.preventDefault(),!x.finishedProductId){k("يرجى اختيار المنتج النهائي","warning");return}if(l.length===0){k("يرجى إضافة مادة خام واحدة على الأقل","warning");return}v(!0);try{const o={name:x.name,finishedProductId:x.finishedProductId,notes:x.notes,isActive:!0,items:l.map(f=>({rawProductId:f.productId,quantityPerUnit:f.quantity,wastePercent:0}))};if(c)await I.updateBOM(c,o);else{const f=Fe();await I.createBOM({id:f,...o,version:1,laborCost:0,overheadCost:0,items:l.map(y=>({id:Fe(),bomId:f,rawProductId:y.productId,quantityPerUnit:y.quantity,wastePercent:0}))})}j()}catch(o){k("فشل حفظ الوصفة: "+(o.message||"خطأ غير معروف"),"error")}finally{v(!1)}};return ye.createPortal(e.jsxDEV("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:[e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-in fade-in zoom-in duration-200 max-h-[90vh] flex flex-col",children:[e.jsxDEV("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50",children:e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsxDEV(ze,{className:"text-emerald-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:209,columnNumber:33},void 0),c?"تعديل الوصفة":"وصفة جديدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:208,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-1 text-sm",children:c?"تعديل مكونات الوصفة الحالية":"إنشاء وصفة تصنيع بسيطة وسريعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:212,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:207,columnNumber:25},void 0),e.jsxDEV("button",{onClick:P,className:"text-slate-400 hover:text-rose-600 transition-colors p-2 hover:bg-rose-50 rounded-lg",children:e.jsxDEV(Ee,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:220,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:216,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:206,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:205,columnNumber:17},void 0),e.jsxDEV("form",{onSubmit:m,className:"flex-1 overflow-y-auto",children:[e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold text-sm",children:"1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:231,columnNumber:33},void 0),e.jsxDEV("h3",{className:"font-bold text-slate-800",children:"اختر المنتج النهائي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:232,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:230,columnNumber:29},void 0),p?e.jsxDEV("div",{className:"animate-pulse bg-slate-200 h-12 rounded-xl"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:236,columnNumber:33},void 0):x.finishedProductId?e.jsxDEV("div",{className:"flex items-center justify-between bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(Y,{className:"text-emerald-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:240,columnNumber:41},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-emerald-800",children:x.finishedProductName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:242,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-sm text-emerald-600",children:"المنتج المراد تصنيعه"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:243,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:241,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:239,columnNumber:37},void 0),e.jsxDEV("button",{type:"button",onClick:()=>r({...x,finishedProductId:"",finishedProductName:"",name:""}),className:"text-emerald-600 hover:text-rose-600 p-2 hover:bg-white rounded-lg transition-colors",children:e.jsxDEV(Ee,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:251,columnNumber:41},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:246,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:238,columnNumber:33},void 0):e.jsxDEV("select",{value:x.finishedProductId,onChange:d=>{const o=n.find(f=>f.id===d.target.value);o&&N(o)},className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-emerald-100 focus:border-emerald-400 outline-none transition-all",children:[e.jsxDEV("option",{value:"",children:"-- اختر المنتج المراد تصنيعه --"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:263,columnNumber:37},void 0),n.map(d=>e.jsxDEV("option",{value:d.id,children:[d.name," ",d.sku?`(${d.sku})`:""]},d.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:265,columnNumber:41},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:255,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:229,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:`w-8 h-8 ${x.finishedProductId?"bg-emerald-600":"bg-slate-300"} text-white rounded-full flex items-center justify-center font-bold text-sm`,children:"2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:276,columnNumber:33},void 0),e.jsxDEV("h3",{className:"font-bold text-slate-800",children:"أضف المواد الخام"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:277,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:275,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative mb-4",children:[e.jsxDEV(Pe,{className:"absolute right-3 top-3 text-slate-400",size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:282,columnNumber:33},void 0),e.jsxDEV("input",{type:"text",placeholder:"ابحث عن مادة خام وأضفها...",value:B,onChange:d=>{S(d.target.value),R(!0)},onFocus:()=>R(!0),className:"w-full pr-10 pl-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-100 focus:border-emerald-400 outline-none transition-all",disabled:!x.finishedProductId},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:283,columnNumber:33},void 0),i&&B&&u.length>0&&e.jsxDEV("div",{className:"absolute z-50 top-full mt-2 w-full bg-white border border-slate-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:u.slice(0,10).map(d=>e.jsxDEV("button",{type:"button",onClick:()=>L(d),className:"w-full text-right px-4 py-3 hover:bg-emerald-50 transition-colors flex items-center gap-3 border-b border-slate-100 last:border-0",children:[e.jsxDEV(ae,{size:18,className:"text-emerald-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:306,columnNumber:49},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-slate-800",children:d.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:308,columnNumber:53},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400",children:[d.sku||""," - ",d.unit||"وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:309,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:307,columnNumber:49},void 0)]},d.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:300,columnNumber:45},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:298,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:281,columnNumber:29},void 0),l.length===0?e.jsxDEV("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-xl text-slate-400",children:[e.jsxDEV(Y,{size:40,className:"mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:320,columnNumber:37},void 0),e.jsxDEV("p",{children:"ابحث عن المواد الخام وأضفها هنا"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:321,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:319,columnNumber:33},void 0):e.jsxDEV("div",{className:"space-y-2",children:l.map((d,o)=>e.jsxDEV("div",{className:"flex items-center gap-3 bg-white p-3 rounded-xl border border-slate-200 hover:border-emerald-300 transition-colors",children:[e.jsxDEV("div",{className:"flex-1",children:e.jsxDEV("p",{className:"font-medium text-slate-800",children:d.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:328,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:327,columnNumber:45},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"text",inputMode:"decimal",value:d.quantityStr,onChange:f=>{const y=f.target.value;(y===""||/^\d*\.?\d*$/.test(y))&&_(o,y)},onBlur:()=>{const f=d.quantityStr;f.endsWith(".")?_(o,f.slice(0,-1)||"0"):f===""&&_(o,"0")},className:"w-32 border border-slate-300 rounded-lg p-2 text-center font-bold focus:border-emerald-400 outline-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:331,columnNumber:49},void 0),e.jsxDEV("span",{className:"text-sm text-slate-500 w-12",children:d.unit},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:353,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:330,columnNumber:45},void 0),e.jsxDEV("button",{type:"button",onClick:()=>$(o),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",children:e.jsxDEV(J,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:360,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:355,columnNumber:45},void 0)]},o,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:326,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:324,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:274,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:`w-8 h-8 ${l.length>0?"bg-emerald-600":"bg-slate-300"} text-white rounded-full flex items-center justify-center font-bold text-sm`,children:"3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:371,columnNumber:33},void 0),e.jsxDEV("h3",{className:"font-bold text-slate-800",children:"اسم الوصفة (اختياري)"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:372,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:370,columnNumber:29},void 0),e.jsxDEV("input",{type:"text",value:x.name,onChange:d=>r({...x,name:d.target.value}),className:"w-full border border-slate-300 rounded-xl p-3 focus:ring-2 focus:ring-emerald-100 focus:border-emerald-400 outline-none transition-all",placeholder:"سيتم تسميتها تلقائياً باسم المنتج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:374,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:369,columnNumber:25},void 0),x.finishedProductId&&l.length>0&&e.jsxDEV("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsxDEV(Q,{className:"text-emerald-600 mt-0.5",size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:386,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-emerald-800 mb-1",children:"الوصفة جاهزة للحفظ!"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:388,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-sm text-emerald-700",children:[e.jsxDEV("span",{className:"font-bold",children:x.finishedProductName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:390,columnNumber:41},void 0)," = ",l.map(d=>`${String(d.quantity)} ${d.unit} ${d.productName}`).join(" + ")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:389,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:387,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:385,columnNumber:29},void 0),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-800 flex items-start gap-3",children:[e.jsxDEV(pe,{size:20,className:"shrink-0 mt-0.5 text-blue-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:398,columnNumber:29},void 0),e.jsxDEV("p",{className:"leading-relaxed",children:"الوصفة تحدد المواد الخام اللازمة لتصنيع وحدة واحدة من المنتج. يمكنك تعديل الكميات لاحقاً من صفحة الوصفات."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:399,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:397,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:227,columnNumber:21},void 0),e.jsxDEV("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-3",children:[e.jsxDEV("button",{type:"button",onClick:P,className:"flex-1 py-3 rounded-xl border-2 border-slate-300 text-slate-700 font-bold hover:bg-white transition-colors",disabled:O,children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:407,columnNumber:25},void 0),e.jsxDEV("button",{type:"submit",disabled:O||!x.finishedProductId||l.length===0,className:"flex-1 py-3 rounded-xl bg-emerald-600 text-white font-bold hover:bg-emerald-700 shadow-lg shadow-emerald-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:O?"جاري الحفظ...":c?"✓ حفظ التعديلات":"✓ حفظ الوصفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:415,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:406,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:226,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:203,columnNumber:13},void 0),e.jsxDEV(ie,{isOpen:F.show,onClose:()=>g({...F,show:!1}),message:F.message,type:F.type},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:427,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMFormSimple.tsx",lineNumber:202,columnNumber:9},void 0),document.body)},Je=({onCreateProductionOrder:c})=>{const[P,j]=a.useState([]),[b,V]=a.useState(!0),[p,H]=a.useState(""),[O,v]=a.useState(!1),[B,S]=a.useState(null),[i,R]=a.useState(null),[x,r]=a.useState(null),[l,h]=a.useState(null),[F,g]=a.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[k,E]=a.useState({show:!1,message:"",type:"error"}),q=(o,f="error")=>E({show:!0,message:o,type:f}),n=async()=>{V(!0);try{const o=await I.getBOMs();j(o)}catch{}finally{V(!1)}};a.useEffect(()=>{n()},[]);const M=()=>{S(null),v(!0)},u=o=>{S(o),v(!0)},N=async o=>{h(o.id);try{const f=await I.getBOMById(o.id),y={name:`${o.name||o.finishedProductName||"وصفة"} (نسخة)`,finishedProductId:f.finishedProductId,isActive:!1,items:f.items?.map(s=>({rawProductId:s.rawProductId,quantityPerUnit:s.quantityPerUnit,wastePercentage:s.wastePercentage||0}))||[]};await I.createBOM(y),n()}catch{q("فشل نسخ الوصفة","error")}finally{h(null)}},L=o=>{g({isOpen:!0,title:"حذف الوصفة",message:"هل أنت متأكد من حذف هذه الوصفة؟ لا يمكن التراجع عن هذا الإجراء.",onConfirm:async()=>{try{await I.deleteBOM(o),n(),i===o&&(R(null),r(null))}catch{q("فشل حذف الوصفة. قد تكون مستخدمة في أوامر تصنيع.","error")}}})},_=async o=>{if(i===o)R(null),r(null);else{R(o);try{const f=await I.getBOMById(o);r(f)}catch{r(null)}}},$=o=>!o||o.length===0?{total:0,raw:0,waste:0}:o.reduce((f,y)=>{const s=(y.unitCost||y.cost||0)*(y.quantityPerUnit||y.quantity||0),z=(y.wastePercentage||0)/100,W=s*z;return{total:f.total+s+W,raw:f.raw+s,waste:f.waste+W}},{total:0,raw:0,waste:0}),m=P.filter(o=>(o.name||"").toLowerCase().includes(p.toLowerCase())||(o.finishedProductName||"").toLowerCase().includes(p.toLowerCase())),d={total:P.length,active:P.filter(o=>o.isActive).length,inactive:P.filter(o=>!o.isActive).length};return e.jsxDEV("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-3 bg-emerald-100 rounded-2xl",children:e.jsxDEV(ne,{className:"text-emerald-600",size:32},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:163,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:162,columnNumber:25},void 0),"إدارة الوصفات (BOM)"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:161,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-2 text-lg",children:"تخطيط التكاليف وتحديد مكونات المنتجات بدقة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:167,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:160,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:n,className:"p-3 text-slate-500 hover:text-emerald-600 hover:bg-emerald-50 rounded-xl transition-all",title:"تحديث",children:e.jsxDEV(K,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:175,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:170,columnNumber:21},void 0),e.jsxDEV("button",{onClick:M,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl flex items-center gap-2 hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 font-bold hover:shadow-emerald-300 transform hover:-translate-y-0.5",children:[e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:181,columnNumber:25},void 0),e.jsxDEV("span",{children:"وصفة جديدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:182,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:177,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:169,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:159,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-lg relative overflow-hidden group hover:-translate-y-1 transition-transform",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("p",{className:"text-slate-500 font-bold mb-1",children:"إجمالي الوصفات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:191,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-4xl font-black text-slate-800",children:d.total},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:192,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:190,columnNumber:21},void 0),e.jsxDEV(ne,{className:"absolute left-6 bottom-6 text-slate-100 transform scale-150 group-hover:scale-125 transition-transform",size:80},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:194,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:189,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-3xl border border-emerald-100 shadow-lg relative overflow-hidden group hover:-translate-y-1 transition-transform",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("p",{className:"text-emerald-600 font-bold mb-1",children:"وصفات نشطة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:198,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-4xl font-black text-emerald-700",children:d.active},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:199,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:197,columnNumber:21},void 0),e.jsxDEV(Q,{className:"absolute left-6 bottom-6 text-emerald-200/50 transform scale-150 group-hover:scale-125 transition-transform",size:80},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:201,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:196,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-lg relative overflow-hidden group hover:-translate-y-1 transition-transform",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("p",{className:"text-slate-400 font-bold mb-1",children:"مسودات / غير نشطة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:205,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-4xl font-black text-slate-400",children:d.inactive},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:206,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:204,columnNumber:21},void 0),e.jsxDEV(be,{className:"absolute left-6 bottom-6 text-slate-100 transform scale-150 group-hover:scale-125 transition-transform",size:80},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:208,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:203,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:188,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Pe,{className:"absolute right-4 top-3.5 text-slate-400",size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:215,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",placeholder:"بحث عن وصفة بالاسم أو كود المنتج...",value:p,onChange:o=>H(o.target.value),className:"w-full pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-emerald-100 focus:border-emerald-400 outline-none transition-all font-medium text-slate-700"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:216,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:214,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:213,columnNumber:13},void 0),b?e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(o=>e.jsxDEV("div",{className:"bg-white rounded-3xl p-8 border border-slate-200 animate-pulse h-64",children:[e.jsxDEV("div",{className:"h-6 bg-slate-200 rounded-full w-3/4 mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:231,columnNumber:29},void 0),e.jsxDEV("div",{className:"h-4 bg-slate-100 rounded-full w-1/2 mb-8"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:232,columnNumber:29},void 0),e.jsxDEV("div",{className:"h-20 bg-slate-50 rounded-2xl"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:233,columnNumber:29},void 0)]},o,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:230,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:228,columnNumber:17},void 0):m.length===0?e.jsxDEV("div",{className:"bg-white rounded-3xl border border-slate-200 p-24 text-center",children:[e.jsxDEV("div",{className:"bg-slate-50 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsxDEV(ne,{size:40,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:240,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:239,columnNumber:21},void 0),e.jsxDEV("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"لا توجد وصفات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:242,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:"ابدأ بإنشاء وصفة جديدة لتحديد المكونات والتكاليف اللازمة لإنتاج منتجاتك."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:243,columnNumber:21},void 0),e.jsxDEV("button",{onClick:M,className:"bg-emerald-600 text-white px-8 py-3.5 rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200",children:[e.jsxDEV(ae,{className:"inline ml-2",size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:248,columnNumber:25},void 0),"إنشاء وصفة جديدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:244,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:238,columnNumber:17},void 0):e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(o=>e.jsxDEV("div",{className:`bg-white rounded-3xl border-2 transition-all duration-300 overflow-hidden flex flex-col ${i===o.id?"border-emerald-400 shadow-xl shadow-emerald-100 ring-2 ring-emerald-100":"border-slate-100 hover:border-emerald-200 hover:shadow-xl"}`,children:[e.jsxDEV("div",{className:"p-6 flex-1",children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-4",children:[e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:`p-3 rounded-2xl shadow-sm ${o.isActive?"bg-gradient-to-br from-emerald-400 to-teal-500 text-white":"bg-slate-100 text-slate-400"}`,children:e.jsxDEV(Y,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:267,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:266,columnNumber:41},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 text-lg leading-tight mb-1",children:o.name||o.finishedProductName||"وصفة بدون اسم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:270,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-sm text-slate-400 font-mono",children:o.finishedProductSku||o.finishedProductName||"SKU: ---"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:273,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:269,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:265,columnNumber:37},void 0),o.isActive?e.jsxDEV("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 shadow-sm",children:"نشط"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:279,columnNumber:41},void 0):e.jsxDEV("span",{className:"px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full border border-slate-200",children:"مسودة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:283,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:264,columnNumber:33},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-6",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-slate-500 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-100",children:[e.jsxDEV(Y,{size:14,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:291,columnNumber:41},void 0),e.jsxDEV("span",{className:"font-bold text-slate-700",children:o.itemsCount||o.items?.length||0},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:292,columnNumber:41},void 0),e.jsxDEV("span",{children:"مواد خام"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:295,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:290,columnNumber:37},void 0),e.jsxDEV("button",{onClick:()=>_(o.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-bold transition-colors ${i===o.id?"bg-emerald-100 text-emerald-700":"bg-white text-emerald-600 hover:bg-emerald-50"}`,children:[i===o.id?"إخفاء التفاصيل":"عرض التفاصيل",i===o.id?e.jsxDEV(Te,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:306,columnNumber:66},void 0):e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:306,columnNumber:92},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:298,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:289,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:263,columnNumber:29},void 0),i===o.id&&e.jsxDEV("div",{className:"border-t border-slate-100 bg-slate-50/50 p-6 animate-in fade-in slide-in-from-top-4 duration-300",children:[x?.items?e.jsxDEV(e.Fragment,{children:[x.items.some(f=>f.unitCost||f.cost)&&e.jsxDEV("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl p-5 mb-6 text-white shadow-lg relative overflow-hidden",children:[e.jsxDEV("div",{className:"relative z-10 flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-slate-300 text-xs font-bold uppercase tracking-wider mb-1",children:"تكلفة الوحدة التقديرية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:322,columnNumber:61},void 0),e.jsxDEV("div",{className:"flex items-baseline gap-1",children:[e.jsxDEV("span",{className:"text-3xl font-black text-amber-400",children:$(x.items).total.toFixed(2)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:324,columnNumber:65},void 0),e.jsxDEV("span",{className:"text-sm font-medium text-slate-400",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:327,columnNumber:65},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:323,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:321,columnNumber:57},void 0),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("div",{className:"bg-white/10 px-3 py-1 rounded-lg backdrop-blur-sm mb-1",children:e.jsxDEV("p",{className:"text-xs text-slate-300",children:["مواد: ",$(x.items).raw.toFixed(2)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:332,columnNumber:65},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:331,columnNumber:61},void 0),e.jsxDEV("div",{className:"bg-rose-500/20 px-3 py-1 rounded-lg backdrop-blur-sm border border-rose-500/30",children:e.jsxDEV("p",{className:"text-xs text-rose-200",children:["هالك: ",$(x.items).waste.toFixed(2)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:335,columnNumber:65},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:334,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:330,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:320,columnNumber:53},void 0),e.jsxDEV(qe,{className:"absolute right-[-20px] bottom-[-20px] text-white/5 w-32 h-32 rotate-12"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:339,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:319,columnNumber:49},void 0),e.jsxDEV("h4",{className:"font-bold text-slate-700 mb-3 text-xs uppercase tracking-wide flex items-center gap-2",children:[e.jsxDEV(Y,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:344,columnNumber:49},void 0),"قائمة المواد"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:343,columnNumber:45},void 0),e.jsxDEV("div",{className:"space-y-3 mb-6 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:x.items.map((f,y)=>{const s=(f.unitCost||f.cost||0)*(f.quantityPerUnit||f.quantity||0),z=f.wastePercentage&&f.wastePercentage>0;return e.jsxDEV("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden",children:[z&&e.jsxDEV("div",{className:"absolute top-0 left-0 bg-rose-500 w-1 h-full",title:"يحتوي على نسبة هالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:356,columnNumber:65},void 0),e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:f.rawProductName||f.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:360,columnNumber:69},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxDEV("span",{className:"text-xs font-mono text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded",children:[String(f.quantityPerUnit??f.quantity)," ",f.unit]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:362,columnNumber:73},void 0),z&&e.jsxDEV("span",{className:"text-[10px] font-bold text-rose-600 bg-rose-50 px-1.5 py-0.5 rounded border border-rose-100",children:["+",f.wastePercentage,"% هالك"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:366,columnNumber:77},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:361,columnNumber:69},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:359,columnNumber:65},void 0),s>0&&e.jsxDEV("p",{className:"font-mono font-bold text-slate-600 text-sm",children:[s.toFixed(2)," ",e.jsxDEV("span",{className:"text-[10px] text-slate-400",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:374,columnNumber:95},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:373,columnNumber:69},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:358,columnNumber:61},void 0)]},y,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:354,columnNumber:57},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:348,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:316,columnNumber:41},void 0):e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mx-auto mb-2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:385,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm",children:"جاري تحميل التفاصيل..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:386,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:384,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[c&&e.jsxDEV("button",{onClick:()=>c(o.id),className:"flex-1 py-3 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-teal-200",children:[e.jsxDEV(Be,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:397,columnNumber:49},void 0),"أمر تصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:393,columnNumber:45},void 0),e.jsxDEV("button",{onClick:()=>N(o),disabled:l===o.id,className:`p-3 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors ${l===o.id?"opacity-50":""}`,title:"نسخ الوصفة",children:l===o.id?e.jsxDEV(K,{size:18,className:"animate-spin"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:408,columnNumber:49},void 0):e.jsxDEV(Ue,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:410,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:401,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>u(o.id),className:"p-3 text-amber-600 bg-amber-50 hover:bg-amber-100 rounded-xl transition-colors",title:"تعديل",children:e.jsxDEV($e,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:418,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:413,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>L(o.id),className:"p-3 text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-xl transition-colors",title:"حذف",children:e.jsxDEV(J,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:425,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:420,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:391,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:313,columnNumber:33},void 0)]},o.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:255,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:253,columnNumber:17},void 0),O&&e.jsxDEV(ke,{editBomId:B,onClose:()=>{v(!1),S(null)},onSuccess:()=>{v(!1),S(null),n(),B&&i===B&&I.getBOMById(B).then(r)}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:437,columnNumber:17},void 0),e.jsxDEV(xe,{isOpen:F.isOpen,title:F.title,message:F.message,onConfirm:F.onConfirm,onClose:()=>g({...F,isOpen:!1})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:456,columnNumber:13},void 0),e.jsxDEV(ie,{isOpen:k.show,onClose:()=>E({...k,show:!1}),message:k.message,type:k.type},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:465,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/BOMManagerSimple.tsx",lineNumber:157,columnNumber:9},void 0)},Ke=({icon:c,title:P,description:j,actionLabel:b,onAction:V,className:p=""})=>e.jsxDEV("div",{className:`flex flex-col items-center justify-center py-16 px-4 text-center animate-in fade-in zoom-in duration-300 ${p}`,children:[e.jsxDEV("div",{className:"bg-slate-50 p-6 rounded-full mb-6 border border-slate-100 shadow-sm relative group",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-teal-500/5 rounded-full scale-110 group-hover:scale-125 transition-transform duration-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:24,columnNumber:17},void 0),e.jsxDEV(c,{size:48,className:"text-slate-400 group-hover:text-teal-500 transition-colors relative z-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:25,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:23,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:P},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:27,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-slate-500 max-w-md mb-8 leading-relaxed",children:j},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:28,columnNumber:13},void 0),b&&V&&e.jsxDEV("button",{onClick:V,className:"px-8 py-3 bg-teal-600 text-white rounded-xl font-bold shadow-lg shadow-teal-600/20 hover:bg-teal-700 hover:shadow-teal-600/30 hover:-translate-y-0.5 transition-all active:translate-y-0 active:shadow-none",children:b},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:32,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/ui/EmptyState.tsx",lineNumber:22,columnNumber:9},void 0),en=({order:c,onClose:P,onConfirm:j})=>{const[b,V]=a.useState(c.qtyPlanned),[p,H]=a.useState(0),[O,v]=a.useState(""),[B,S]=a.useState(!0),i=Math.max(0,b-p),R=c.qtyPlanned-b,x=c.qtyPlanned>0?(i/c.qtyPlanned*100).toFixed(1):0,r=l=>{l.preventDefault();const h=B?`BATCH-${Date.now().toString(36).toUpperCase()}`:O;j({qtyFinished:b,qtyScrapped:p,batchNumber:h})};return e.jsxDEV("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:e.jsxDEV("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-in scale-95 duration-200 border border-slate-100",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-8 text-white relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-16 -mt-16"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:56,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-black flex items-center gap-2",children:[e.jsxDEV(ve,{size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:60,columnNumber:33},void 0),"إتمام أمر التصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:59,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-emerald-100 text-sm mt-1 font-mono tracking-wide opacity-90",children:["#",c.orderNumber]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:63,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:58,columnNumber:25},void 0),e.jsxDEV("button",{onClick:P,className:"p-2 hover:bg-white/20 rounded-full transition-colors backdrop-blur-sm",children:e.jsxDEV(Ee,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:66,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:65,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:57,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:55,columnNumber:17},void 0),e.jsxDEV("form",{onSubmit:r,className:"p-8 space-y-8",children:[e.jsxDEV("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100 shadow-sm",children:[e.jsxDEV("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"المنتج النهائي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:75,columnNumber:25},void 0),e.jsxDEV("p",{className:"font-bold text-slate-800 text-lg mb-2",children:c.finishedProductName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:76,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsxDEV("span",{className:"bg-white px-2 py-1 rounded border border-slate-200",children:["مخطط: ",e.jsxDEV("span",{className:"font-bold text-slate-700",children:c.qtyPlanned},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:78,columnNumber:104},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:78,columnNumber:29},void 0),e.jsxDEV("span",{children:c.finishedProductUnit||"وحدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:79,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:77,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:74,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[e.jsxDEV(Q,{size:14,className:"inline ml-1 text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:87,columnNumber:33},void 0),"الكمية المنتجة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:86,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative",children:e.jsxDEV("input",{type:"number",value:b,onChange:l=>V(parseFloat(l.target.value)||0),min:0,max:c.qtyPlanned*1.5,className:"w-full px-4 py-3.5 border border-emerald-200 rounded-xl text-xl font-bold text-emerald-700 bg-emerald-50/50 focus:bg-emerald-50 focus:ring-4 focus:ring-emerald-100 focus:border-emerald-400 outline-none transition-all text-center"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:91,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:90,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:85,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[e.jsxDEV(J,{size:14,className:"inline ml-1 text-rose-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:103,columnNumber:33},void 0),"الكمية الهالكة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:102,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative",children:e.jsxDEV("input",{type:"number",value:p,onChange:l=>H(parseFloat(l.target.value)||0),min:0,className:"w-full px-4 py-3.5 border border-rose-200 rounded-xl text-xl font-bold text-rose-700 bg-rose-50/50 focus:bg-rose-50 focus:ring-4 focus:ring-rose-100 focus:border-rose-400 outline-none transition-all text-center"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:107,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:106,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:101,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:84,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[e.jsxDEV("div",{className:"flex justify-between text-xs font-bold mb-2 uppercase tracking-wide text-slate-400",children:[e.jsxDEV("span",{children:"ملخص الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:121,columnNumber:29},void 0),e.jsxDEV("span",{className:Number(x)>=100?"text-emerald-600":"text-amber-500",children:["كفاءة ",x,"%"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:122,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:120,columnNumber:25},void 0),e.jsxDEV("div",{className:"h-3 bg-slate-200 rounded-full overflow-hidden flex relative",children:[e.jsxDEV("div",{className:"bg-emerald-500 h-full transition-all duration-500 rounded-r-full",style:{width:`${Math.min(b/c.qtyPlanned*100,100)}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:125,columnNumber:29},void 0),p>0&&e.jsxDEV("div",{className:"bg-rose-500 h-full transition-all duration-500 border-l border-white/50",style:{width:`${Math.min(p/c.qtyPlanned*100,100)}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:130,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:124,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex justify-between text-xs mt-3 font-medium",children:[e.jsxDEV("span",{className:"text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded",children:["✅ سليم: ",i]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:137,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-rose-700 bg-rose-50 px-2 py-0.5 rounded",children:["❌ هالك: ",p]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:138,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:136,columnNumber:25},void 0),R>0&&e.jsxDEV("div",{className:"mt-2 text-xs text-center text-amber-600 font-bold bg-amber-50 py-1 rounded",children:["⚠ متبقي من المخطط: ",R]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:141,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:119,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-blue-50/50 rounded-2xl p-5 border border-blue-100",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("label",{className:"text-sm font-bold text-blue-700 flex items-center gap-2",children:[e.jsxDEV(Qe,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:151,columnNumber:33},void 0),"رقم التشغيلة (Batch)"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:150,columnNumber:29},void 0),e.jsxDEV("label",{className:"flex items-center gap-2 text-xs font-bold text-blue-600 bg-white px-2 py-1 rounded-lg border border-blue-100 cursor-pointer shadow-sm hover:shadow transition-shadow",children:[e.jsxDEV("input",{type:"checkbox",checked:B,onChange:l=>S(l.target.checked),className:"rounded border-blue-300 text-blue-600 focus:ring-blue-200"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:155,columnNumber:33},void 0),"توليد تلقائي"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:154,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:149,columnNumber:25},void 0),!B&&e.jsxDEV("input",{type:"text",value:O,onChange:l=>v(l.target.value),placeholder:"أدخل رقم الباتش يدوياً...",className:"w-full px-4 py-3 border border-blue-200 rounded-xl bg-white focus:ring-4 focus:ring-blue-100 focus:border-blue-400 outline-none transition-all placeholder:text-blue-300/50"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:165,columnNumber:29},void 0),B&&e.jsxDEV("p",{className:"text-xs text-blue-400 mt-1 flex items-center gap-1",children:[e.jsxDEV(Ne,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:175,columnNumber:33},void 0),"سيتم إنشاء رقم فريد للتشغيلة تلقائياً عند الحفظ"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:174,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-col gap-3 pt-2",children:[e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV("button",{type:"button",onClick:P,className:"flex-1 py-3.5 px-6 border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:"إلغاء"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:184,columnNumber:29},void 0),e.jsxDEV("button",{type:"submit",className:"flex-1 py-3.5 px-6 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:shadow-xl hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2",children:[e.jsxDEV(ve,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:195,columnNumber:33},void 0),"تأكيد الإتمام"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:191,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:183,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-center text-slate-400 flex items-center justify-center gap-1",children:[e.jsxDEV(ge,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:200,columnNumber:29},void 0),"سيتم طباعة تقرير الإتمام تلقائياً بعد التأكيد"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:199,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:182,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:72,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:53,columnNumber:13},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:52,columnNumber:9},void 0)},He=async c=>{let P=[];try{c.bomId&&(P=(await I.getBOMById(c.bomId)).items||[])}catch{}const j=P.length>0?`
        <div class="section-title">📦 المواد الخام المطلوبة</div>
        <table class="data-table">
            <thead>
                <tr>
                    <th style="width: 5%">#</th>
                    <th style="width: 35%">اسم المادة</th>
                    <th style="width: 15%">الكمية المطلوبة</th>
                    <th style="width: 15%">الوحدة</th>
                    <th style="width: 15%">الكمية الفعلية</th>
                    <th style="width: 15%">ملاحظات</th>
                </tr>
            </thead>
            <tbody>
                ${P.map((p,H)=>{const v=(p.quantityPerUnit||p.quantity_per_unit||0)*(1+(p.wastePercent||p.waste_percent||0)/100)*c.qtyPlanned;return`
                        <tr>
                            <td style="text-align: center;">${H+1}</td>
                            <td><strong>${p.rawProductName||p.productName||"غير محدد"}</strong></td>
                            <td style="text-align: center; font-weight: bold;">${v.toFixed(2)}</td>
                            <td style="text-align: center;">${p.unit||"وحدة"}</td>
                            <td class="input-cell"></td>
                            <td class="input-cell"></td>
                        </tr>
                    `}).join("")}
            </tbody>
        </table>
    `:"",b=window.open("","_blank");if(!b)return;const V=`
        <!DOCTYPE html>
        <html dir="rtl" lang="ar">
        <head>
            <meta charset="UTF-8">
            <title>أمر تشغيل - ${c.orderNumber}</title>
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');
                
                /* Reset & Base */
                * { margin: 0; padding: 0; box-sizing: border-box; }
                html, body { 
                    font-family: 'Cairo', 'Segoe UI', Tahoma, sans-serif;
                    font-size: 12px;
                    line-height: 1.4;
                    color: #1e293b;
                    background: #fff;
                }
                
                /* Print-optimized Page Setup */
                @page {
                    size: A4;
                    margin: 15mm 12mm 15mm 12mm;
                }
                
                .page-container {
                    width: 100%;
                    max-width: 210mm;
                    margin: 0 auto;
                    padding: 0;
                }
                
                /* Header */
                .header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    border-bottom: 3px solid #0d9488;
                    padding-bottom: 15px;
                    margin-bottom: 20px;
                }
                .logo-section h1 { font-size: 22px; font-weight: 800; color: #0d9488; margin-bottom: 3px; }
                .logo-section p { font-size: 11px; color: #64748b; }
                .order-badge {
                    background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%);
                    color: white;
                    padding: 8px 16px;
                    border-radius: 8px;
                    text-align: center;
                }
                .order-badge .label { font-size: 9px; opacity: 0.9; text-transform: uppercase; letter-spacing: 1px; }
                .order-badge .number { font-size: 18px; font-weight: 900; font-family: monospace; }
                
                /* Info Grid */
                .info-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 12px;
                    margin-bottom: 20px;
                }
                .info-box {
                    background: #f8fafc;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    padding: 12px;
                }
                .info-box.highlight {
                    background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 100%);
                    border-color: #99f6e4;
                }
                .info-label { font-size: 9px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
                .info-value { font-size: 14px; font-weight: 700; color: #0f172a; }
                .info-sub { font-size: 10px; color: #64748b; margin-top: 2px; }
                
                /* Section Title */
                .section-title {
                    font-size: 13px;
                    font-weight: 800;
                    color: #0f172a;
                    margin: 20px 0 10px 0;
                    padding: 8px 12px;
                    background: #f1f5f9;
                    border-right: 4px solid #0d9488;
                    border-radius: 0 8px 8px 0;
                }
                
                /* Table */
                .data-table {
                    width: 100%;
                    border-collapse: collapse;
                    margin-bottom: 15px;
                }
                .data-table th, .data-table td {
                    padding: 10px 12px;
                    text-align: right;
                    border: 1px solid #e2e8f0;
                    font-size: 11px;
                }
                .data-table th {
                    background: #f8fafc;
                    font-weight: 700;
                    color: #475569;
                }
                .data-table td { color: #334155; }
                
                .input-cell {
                    height: 32px;
                    background: #fafafa;
                    border: 1px dashed #cbd5e1 !important;
                    min-width: 80px;
                }
                
                /* Signatures - Keep together */
                .signatures-section {
                    page-break-inside: avoid;
                    margin-top: 30px;
                }
                .signatures-grid {
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 15px;
                }
                .signature-box {
                    text-align: center;
                    padding-top: 10px;
                    border-top: 2px solid #e2e8f0;
                }
                .signature-box .title { font-size: 10px; font-weight: 700; color: #475569; margin-bottom: 35px; }
                .signature-box .line { 
                    width: 80%; 
                    height: 0; 
                    border-bottom: 1px solid #94a3b8; 
                    margin: 0 auto 5px auto; 
                }
                .signature-box .date-field { font-size: 9px; color: #94a3b8; }
                
                /* Footer */
                .print-footer {
                    margin-top: 20px;
                    padding-top: 10px;
                    border-top: 1px solid #e2e8f0;
                    display: flex;
                    justify-content: space-between;
                    font-size: 9px;
                    color: #94a3b8;
                }
                
                /* Notes Section */
                .notes-box {
                    margin-top: 15px;
                    padding: 12px;
                    background: #fffbeb;
                    border: 1px solid #fde68a;
                    border-radius: 8px;
                    page-break-inside: avoid;
                }
                .notes-box .label { font-size: 10px; font-weight: 700; color: #92400e; margin-bottom: 8px; }
                .notes-lines { 
                    height: 50px; 
                    border: 1px dashed #fcd34d; 
                    background: white;
                    border-radius: 4px;
                }
                
                /* Print-specific */
                @media print {
                    html, body { 
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                    }
                    .page-container { padding: 0; }
                    .no-print { display: none !important; }
                    
                    /* Prevent breaks inside important elements */
                    .info-grid, .data-table, .signatures-section, .notes-box {
                        page-break-inside: avoid;
                    }
                    
                    /* Allow break before sections if needed */
                    .section-title {
                        page-break-after: avoid;
                    }
                }
                
                @media screen {
                    body { padding: 20px; background: #f1f5f9; }
                    .page-container { 
                        background: white; 
                        padding: 30px; 
                        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
                        border-radius: 12px;
                    }
                }
            </style>
        </head>
        <body>
            <div class="page-container">
                <!-- Header -->
                <div class="header">
                    <div class="logo-section">
                        <h1>🏭 أمر تشغيل إنتاج</h1>
                        <p>Production Work Order</p>
                    </div>
                    <div class="order-badge">
                        <div class="label">رقم الأمر</div>
                        <div class="number">#${c.orderNumber||"N/A"}</div>
                    </div>
                </div>
                
                <!-- Order Info -->
                <div class="info-grid">
                    <div class="info-box highlight">
                        <div class="info-label">المنتج المطلوب تصنيعه</div>
                        <div class="info-value">${c.finishedProductName||"غير محدد"}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">الكمية المخططة</div>
                        <div class="info-value">${c.qtyPlanned} <span style="font-size: 11px; color: #64748b;">${c.finishedProductUnit||"وحدة"}</span></div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">تاريخ البدء المخطط</div>
                        <div class="info-value">${c.scheduledStartDate?new Date(c.scheduledStartDate).toLocaleDateString("ar-EG"):"---"}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">تاريخ التسليم المطلوب</div>
                        <div class="info-value">${c.scheduledEndDate?new Date(c.scheduledEndDate).toLocaleDateString("ar-EG"):"---"}</div>
                    </div>
                </div>
                
                <!-- Materials List -->
                ${j}

                <!-- Production Report -->
                <div class="section-title">📋 تقرير الإنتاج الفعلي</div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="width: 45%">البيان</th>
                            <th style="width: 25%">القيمة</th>
                            <th style="width: 30%">ملاحظات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>الكمية المنتجة الصالحة</strong> (Good Qty)</td>
                            <td class="input-cell"></td>
                            <td class="input-cell"></td>
                        </tr>
                        <tr>
                            <td><strong>الكمية الهالكة / التالفة</strong> (Scrap)</td>
                            <td class="input-cell"></td>
                            <td class="input-cell"></td>
                        </tr>
                        <tr>
                            <td><strong>وقت البدء الفعلي</strong></td>
                            <td class="input-cell"></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>وقت الانتهاء الفعلي</strong></td>
                            <td class="input-cell"></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><strong>رقم التشغيلة / Batch No.</strong></td>
                            <td class="input-cell" colspan="2"></td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- Notes -->
                <div class="notes-box">
                    <div class="label">📝 ملاحظات / مشاكل أثناء التصنيع:</div>
                    <div class="notes-lines"></div>
                </div>

                <!-- Signatures -->
                <div class="signatures-section">
                    <div class="section-title">✍️ الاعتمادات والتوقيعات</div>
                    <div class="signatures-grid">
                        <div class="signature-box">
                            <div class="title">مشرف الإنتاج<br><small>Production Supervisor</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                        <div class="signature-box">
                            <div class="title">مراقب الجودة<br><small>Quality Control</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                        <div class="signature-box">
                            <div class="title">أمين المخزن<br><small>Warehouse Keeper</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="print-footer">
                    <div>📄 تمت الطباعة بواسطة نظام ERP</div>
                    <div>🕐 ${new Date().toLocaleString("ar-EG")}</div>
                </div>
            </div>

            <script>
                window.onload = function() { 
                    setTimeout(function() { window.print(); }, 300);
                }
            <\/script>
        </body>
        </html>
    `;b.document.write(V),b.document.close()},Me=async(c,P)=>{let j=[];try{c.bomId&&(j=(await I.getBOMById(c.bomId)).items||[])}catch{}const b=j.length>0?`
        <div class="section-title">📦 المواد الخام المستخدمة</div>
        <table class="data-table">
            <thead>
                <tr>
                    <th style="width: 5%">#</th>
                    <th style="width: 40%">اسم المادة</th>
                    <th style="width: 20%">الكمية المستخدمة</th>
                    <th style="width: 15%">الوحدة</th>
                    <th style="width: 20%">التكلفة</th>
                </tr>
            </thead>
            <tbody>
                ${j.map((r,l)=>{const F=(r.quantityPerUnit||r.quantity_per_unit||0)*(1+(r.wastePercent||r.waste_percent||0)/100)*c.qtyPlanned,g=r.unitCost||r.unit_cost||0,k=F*g;return`
                        <tr>
                            <td style="text-align: center;">${l+1}</td>
                            <td><strong>${r.rawProductName||r.productName||"غير محدد"}</strong></td>
                            <td style="text-align: center; font-weight: bold;">${F.toFixed(2)}</td>
                            <td style="text-align: center;">${r.unit||"وحدة"}</td>
                            <td style="text-align: center;">${k.toFixed(2)} ج.م</td>
                        </tr>
                    `}).join("")}
                <tr style="background: #f1f5f9; font-weight: bold;">
                    <td colspan="4" style="text-align: left;">إجمالي تكلفة المواد</td>
                    <td style="text-align: center;">${j.reduce((r,l)=>{const F=(l.quantityPerUnit||l.quantity_per_unit||0)*(1+(l.wastePercent||l.waste_percent||0)/100)*c.qtyPlanned,g=l.unitCost||l.unit_cost||0;return r+F*g},0).toFixed(2)} ج.م</td>
                </tr>
            </tbody>
        </table>
    `:"",V=window.open("","_blank");if(!V)return;const p=P?.qtyFinished??c.qtyFinished??c.qtyPlanned,H=P?.qtyScrapped??c.qtyScrapped??0,O=P?.batchNumber??c.finishedBatchNumber??"-",v=p-H,B=c.qtyPlanned>0?(v/c.qtyPlanned*100).toFixed(1):"0",S=new Date().toLocaleDateString("ar-EG"),i=new Date().toLocaleTimeString("ar-EG"),R=Number(B)>=100?"excellent":Number(B)>=90?"good":Number(B)>=70?"fair":"poor",x=`
        <!DOCTYPE html>
        <html dir="rtl" lang="ar">
        <head>
            <meta charset="UTF-8">
            <title>تقرير إتمام التصنيع - ${c.orderNumber}</title>
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');
                
                /* Reset & Base */
                * { margin: 0; padding: 0; box-sizing: border-box; }
                html, body { 
                    font-family: 'Cairo', 'Segoe UI', Tahoma, sans-serif;
                    font-size: 12px;
                    line-height: 1.4;
                    color: #1e293b;
                    background: #fff;
                }
                
                /* Print-optimized Page Setup */
                @page {
                    size: A4;
                    margin: 12mm 10mm 12mm 10mm;
                }
                
                .page-container {
                    width: 100%;
                    max-width: 210mm;
                    margin: 0 auto;
                    padding: 0;
                }
                
                /* Header */
                .header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    border-bottom: 3px solid #10b981;
                    padding-bottom: 12px;
                    margin-bottom: 15px;
                }
                .logo-section h1 { font-size: 20px; font-weight: 800; color: #10b981; margin-bottom: 3px; }
                .logo-section p { font-size: 10px; color: #64748b; margin-bottom: 6px; }
                .status-badge {
                    display: inline-block;
                    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                    color: white;
                    font-size: 10px;
                    font-weight: 700;
                    padding: 5px 12px;
                    border-radius: 15px;
                }
                .order-badge {
                    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                    color: white;
                    padding: 8px 16px;
                    border-radius: 8px;
                    text-align: center;
                }
                .order-badge .label { font-size: 8px; opacity: 0.9; text-transform: uppercase; letter-spacing: 1px; }
                .order-badge .number { font-size: 16px; font-weight: 900; font-family: monospace; }
                
                /* Info Grid */
                .info-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                    margin-bottom: 15px;
                    page-break-inside: avoid;
                }
                .info-box {
                    background: #f8fafc;
                    border: 1px solid #e2e8f0;
                    border-radius: 6px;
                    padding: 10px;
                }
                .info-box.highlight {
                    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
                    border-color: #86efac;
                }
                .info-label { font-size: 9px; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px; }
                .info-value { font-size: 13px; font-weight: 700; color: #0f172a; }
                .info-sub { font-size: 10px; color: #64748b; margin-top: 2px; }
                
                /* Section Title */
                .section-title {
                    font-size: 12px;
                    font-weight: 800;
                    color: #0f172a;
                    margin: 15px 0 8px 0;
                    padding: 6px 10px;
                    background: #f1f5f9;
                    border-right: 4px solid #10b981;
                    border-radius: 0 6px 6px 0;
                    page-break-after: avoid;
                }
                
                /* Results Grid */
                .results-section {
                    page-break-inside: avoid;
                    margin-bottom: 15px;
                }
                .results-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 10px;
                }
                .result-box {
                    text-align: center;
                    padding: 12px 8px;
                    border-radius: 8px;
                    border: 2px solid;
                }
                .result-box h3 { font-size: 9px; font-weight: 700; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.3px; }
                .result-box .value { font-size: 22px; font-weight: 900; line-height: 1.1; }
                .result-box .unit { font-size: 9px; opacity: 0.8; }
                
                .planned { background: #f8fafc; border-color: #cbd5e1; color: #475569; }
                .good { background: #f0fdf4; border-color: #86efac; color: #16a34a; }
                .scrap { background: #fef2f2; border-color: #fca5a5; color: #dc2626; }
                .efficiency { background: #eff6ff; border-color: #93c5fd; color: #2563eb; }
                .efficiency.excellent { background: #f0fdf4; border-color: #22c55e; color: #15803d; }
                .efficiency.good { background: #f0fdf4; border-color: #86efac; color: #16a34a; }
                .efficiency.fair { background: #fefce8; border-color: #fde047; color: #ca8a04; }
                .efficiency.poor { background: #fef2f2; border-color: #f87171; color: #dc2626; }
                
                /* Batch Section */
                .batch-section {
                    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
                    border: 2px solid #7dd3fc;
                    border-radius: 8px;
                    padding: 15px;
                    margin-bottom: 15px;
                    text-align: center;
                    page-break-inside: avoid;
                }
                .batch-section h3 { color: #0369a1; font-size: 10px; font-weight: 700; margin-bottom: 6px; text-transform: uppercase; }
                .batch-section .batch-number { font-size: 26px; font-weight: 900; color: #0c4a6e; font-family: monospace; letter-spacing: 3px; }
                
                /* Quality Table */
                .quality-section {
                    page-break-inside: avoid;
                    margin-bottom: 15px;
                }
                .data-table {
                    width: 100%;
                    border-collapse: collapse;
                }
                .data-table th, .data-table td {
                    padding: 8px 10px;
                    text-align: right;
                    border: 1px solid #e2e8f0;
                    font-size: 10px;
                }
                .data-table th {
                    background: #f8fafc;
                    font-weight: 700;
                    color: #475569;
                }
                .data-table td { color: #334155; }
                .data-table .input-cell {
                    height: 28px;
                    background: #fafafa;
                }
                
                /* Signatures */
                .signatures-section {
                    page-break-inside: avoid;
                    margin-top: 20px;
                }
                .signatures-grid {
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 12px;
                }
                .signature-box {
                    text-align: center;
                    padding-top: 8px;
                    border-top: 2px solid #e2e8f0;
                }
                .signature-box .title { font-size: 10px; font-weight: 700; color: #475569; margin-bottom: 30px; }
                .signature-box .line { 
                    width: 70%; 
                    height: 0; 
                    border-bottom: 1px solid #94a3b8; 
                    margin: 0 auto 4px auto; 
                }
                .signature-box .date-field { font-size: 8px; color: #94a3b8; }
                
                /* Footer */
                .print-footer {
                    margin-top: 15px;
                    padding-top: 8px;
                    border-top: 1px solid #e2e8f0;
                    display: flex;
                    justify-content: space-between;
                    font-size: 8px;
                    color: #94a3b8;
                }
                
                /* Print-specific */
                @media print {
                    html, body { 
                        -webkit-print-color-adjust: exact !important;
                        print-color-adjust: exact !important;
                    }
                    .page-container { padding: 0; }
                    .no-print { display: none !important; }
                }
                
                @media screen {
                    body { padding: 20px; background: #f1f5f9; }
                    .page-container { 
                        background: white; 
                        padding: 25px; 
                        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
                        border-radius: 12px;
                    }
                }
            </style>
        </head>
        <body>
            <div class="page-container">
                <!-- Header -->
                <div class="header">
                    <div class="logo-section">
                        <h1>✅ تقرير إتمام التصنيع</h1>
                        <p>Production Completion Report</p>
                        <span class="status-badge">تم الإتمام بنجاح</span>
                    </div>
                    <div class="order-badge">
                        <div class="label">رقم الأمر</div>
                        <div class="number">#${c.orderNumber||"N/A"}</div>
                    </div>
                </div>
                
                <!-- Order Info -->
                <div class="info-grid">
                    <div class="info-box highlight">
                        <div class="info-label">المنتج المُصنَّع</div>
                        <div class="info-value">${c.finishedProductName||"غير محدد"}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">تاريخ ووقت الإتمام</div>
                        <div class="info-value">${S}</div>
                        <div class="info-sub">${i}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">تاريخ البدء المخطط</div>
                        <div class="info-value">${c.scheduledStartDate?new Date(c.scheduledStartDate).toLocaleDateString("ar-EG"):"---"}</div>
                    </div>
                    <div class="info-box">
                        <div class="info-label">تاريخ التسليم المخطط</div>
                        <div class="info-value">${c.scheduledEndDate?new Date(c.scheduledEndDate).toLocaleDateString("ar-EG"):"---"}</div>
                    </div>
                </div>
                
                <!-- Materials Used -->
                ${b}

                <!-- Production Results -->
                <div class="results-section">
                    <div class="section-title">📊 نتائج الإنتاج</div>
                    <div class="results-grid">
                        <div class="result-box planned">
                            <h3>الكمية المخططة</h3>
                            <div class="value">${c.qtyPlanned}</div>
                            <div class="unit">${c.finishedProductUnit||"وحدة"}</div>
                        </div>
                        <div class="result-box good">
                            <h3>الكمية الصالحة</h3>
                            <div class="value">${v}</div>
                            <div class="unit">${c.finishedProductUnit||"وحدة"}</div>
                        </div>
                        <div class="result-box scrap">
                            <h3>الهالك</h3>
                            <div class="value">${H}</div>
                            <div class="unit">${c.finishedProductUnit||"وحدة"}</div>
                        </div>
                        <div class="result-box efficiency ${R}">
                            <h3>الكفاءة</h3>
                            <div class="value">${B}%</div>
                            <div class="unit">Efficiency</div>
                        </div>
                    </div>
                </div>

                <!-- Batch Number -->
                <div class="batch-section">
                    <h3>رقم التشغيلة / Batch Number</h3>
                    <div class="batch-number">${O}</div>
                </div>

                <!-- Quality Notes -->
                <div class="quality-section">
                    <div class="section-title">📋 ملاحظات الجودة</div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 40%">البيان</th>
                                <th style="width: 30%">القيمة</th>
                                <th style="width: 30%">ملاحظات</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>فحص الجودة</strong></td>
                                <td>☐ مطابق &nbsp; ☐ غير مطابق</td>
                                <td class="input-cell"></td>
                            </tr>
                            <tr>
                                <td><strong>أسباب الهالك (إن وجد)</strong></td>
                                <td colspan="2" class="input-cell"></td>
                            </tr>
                            <tr>
                                <td><strong>ملاحظات إضافية</strong></td>
                                <td colspan="2" class="input-cell"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Signatures -->
                <div class="signatures-section">
                    <div class="section-title">✍️ الاعتمادات والتوقيعات</div>
                    <div class="signatures-grid">
                        <div class="signature-box">
                            <div class="title">مشرف الإنتاج<br><small>Production Supervisor</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                        <div class="signature-box">
                            <div class="title">مراقب الجودة<br><small>Quality Control</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                        <div class="signature-box">
                            <div class="title">أمين المخزن<br><small>Warehouse Keeper</small></div>
                            <div class="line"></div>
                            <div class="date-field">التاريخ: ___/___/______</div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="print-footer">
                    <div>📄 تمت الطباعة بواسطة نظام ERP</div>
                    <div>🕐 ${new Date().toLocaleString("ar-EG")}</div>
                </div>
            </div>

            <script>
                window.onload = function() { 
                    setTimeout(function() { window.print(); }, 300);
                }
            <\/script>
        </body>
        </html>
    `;V.document.write(x),V.document.close()},nn=()=>{const[c,P]=a.useState([]),[j,b]=a.useState(!0),[V,p]=a.useState(""),[H,O]=a.useState(""),[v,B]=a.useState("ALL"),[S,i]=a.useState("ALL"),[R,x]=a.useState(!1),[r,l]=a.useState(!1),[h,F]=a.useState(null),[g,k]=a.useState({total:0,limit:24,offset:0,hasMore:!1}),[E,q]=a.useState({total:0,pending:0,inProgress:0,completed:0,cancelled:0}),[n,M]=a.useState({isOpen:!1,message:"",type:"error"}),u=(t,A="error")=>{M({isOpen:!0,message:t,type:A})},[N,L]=a.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});a.useEffect(()=>{const t=setTimeout(()=>{O(V)},300);return()=>clearTimeout(t)},[V]);const _=a.useCallback(async(t=0,A=v,G=H)=>{b(!0);try{const U=A==="ALL"?"":A,Z=await I.getProductionOrders({status:U,limit:g.limit.toString(),offset:t.toString(),search:G});Array.isArray(Z)?(P(Z),q({total:Z.length,pending:Z.filter(X=>X.status===T.PLANNED||X.status===T.CONFIRMED).length,inProgress:Z.filter(X=>X.status===T.IN_PROGRESS).length,completed:Z.filter(X=>X.status===T.COMPLETED).length,cancelled:0}),k({total:Z.length,limit:24,offset:0,hasMore:!1})):(P(Z.orders||[]),q(Z.stats||E),k(Z.pagination||g))}catch{}finally{b(!1),l(!1)}},[v,H,g.limit]);a.useEffect(()=>{_(0,v,H)},[v,H]);const $=()=>{l(!0),_(0)},m=t=>{B(t)},d=()=>{if(g.hasMore){const t=g.offset+g.limit;_(t)}},o=()=>{if(g.offset>0){const t=Math.max(0,g.offset-g.limit);_(t)}},f=async t=>{L({isOpen:!0,title:"بدء التصنيع",message:`هل تريد بدء تصنيع هذا الأمر؟

سيتم خصم المواد الخام من المخزون وطباعة أمر التشغيل.`,onConfirm:async()=>{L({...N,isOpen:!1});try{await I.startProduction(t.id,[]),_(g.offset),He(t),u("تم بدء التصنيع بنجاح! تم طباعة أمر التشغيل.","success")}catch(A){u("فشل بدء التصنيع: "+A.message,"error")}}})},y=async t=>{if(h)try{await I.finishProduction(h.id,{qtyFinished:t.qtyFinished,qtyScrapped:t.qtyScrapped,scrapEntries:[],finishedBatchNumber:t.batchNumber}),Me(h,t),u("تم إتمام التصنيع بنجاح! تم طباعة تقرير الإتمام.","success"),F(null),_(g.offset)}catch(A){u("فشل إتمام التصنيع: "+A.message,"error")}},s=async t=>{L({isOpen:!0,title:"إلغاء أمر التصنيع",message:`هل أنت متأكد من إلغاء أمر التصنيع؟

سيتم إرجاع المواد الخام للمخزون.`,onConfirm:async()=>{L({...N,isOpen:!1});try{await I.cancelProduction(t),_(g.offset)}catch(A){u("فشل إلغاء التصنيع: "+A.message,"error")}}})},z=async t=>{const A=t.status===T.COMPLETED,G=t.status===T.IN_PROGRESS;let U,Z;A?(U=`⚠️ هل أنت متأكد من حذف أمر التصنيع المكتمل #${t.orderNumber}؟

• سيتم إرجاع المواد الخام المستهلكة للمخزن
• سيتم إزالة المنتج التام من المخزون`,Z="حذف أمر تصنيع مكتمل وإلغاء المخزون"):G?(U=`هل أنت متأكد من حذف أمر التصنيع #${t.orderNumber}؟

⚠️ سيتم إرجاع المواد الخام المستهلكة للمخزن.`,Z="حذف أمر التصنيع وإرجاع المواد"):(U=`هل أنت متأكد من حذف أمر التصنيع #${t.orderNumber}؟

سيتم تحرير الحجوزات المرتبطة.`,Z="حذف أمر التصنيع"),L({isOpen:!0,title:Z,message:U,onConfirm:async()=>{L({...N,isOpen:!1});try{const X=await I.deleteProductionOrder(t.id);u(X.message||"تم حذف أمر التصنيع بنجاح","success"),_(g.offset)}catch(X){u("فشل حذف أمر التصنيع: "+X.message,"error")}}})},W=t=>!0,Ce=t=>{switch(t){case T.PLANNED:return{label:"مخطط",color:"bg-blue-100 text-blue-700 border-blue-200",icon:he};case T.CONFIRMED:return{label:"مؤكد",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:Q};case T.WAITING_MATERIALS:return{label:"نقص خامات",color:"bg-rose-100 text-rose-700 border-rose-200",icon:oe};case T.IN_PROGRESS:return{label:"جاري التنفيذ",color:"bg-amber-100 text-amber-700 border-amber-200",icon:De};case T.COMPLETED:return{label:"مكتمل",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Q};case T.CANCELLED:return{label:"ملغي",color:"bg-slate-100 text-slate-500 border-slate-200",icon:be};default:return{label:t,color:"bg-slate-100 text-slate-700",icon:he}}},C=t=>t===T.PLANNED||t===T.CONFIRMED,w=t=>t===T.IN_PROGRESS,re=Math.floor(g.offset/g.limit)+1,se=Math.ceil(g.total/g.limit),me=c.filter(t=>{if(S==="ALL")return!0;const A=t.scheduledEndDate?new Date(t.scheduledEndDate):null;if(!A)return!1;const G=new Date;if(G.setHours(0,0,0,0),S==="TODAY"){const U=new Date(A);return U.setHours(0,0,0,0),U.getTime()===G.getTime()}if(S==="WEEK"){const U=new Date(G);return U.setDate(U.getDate()-7),A>=U}if(S==="MONTH"){const U=new Date(G);return U.setMonth(U.getMonth()-1),A>=U}return!0});return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsxDEV(ee,{className:"text-teal-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1270,columnNumber:25},void 0),"أوامر التصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1269,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500",children:"إدارة ومتابعة عمليات الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1273,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1268,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:$,className:`p-2.5 text-slate-500 hover:text-teal-600 hover:bg-teal-50 rounded-xl transition-all ${r?"animate-spin":""}`,title:"تحديث",children:e.jsxDEV(K,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1281,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1276,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>x(!0),className:"bg-teal-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-teal-200 hover:bg-teal-700 transition-all flex items-center gap-2",children:[e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1287,columnNumber:25},void 0),e.jsxDEV("span",{children:"أمر تصنيع جديد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1288,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1283,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1275,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1267,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("button",{onClick:()=>m("ALL"),className:`p-4 rounded-2xl border-2 transition-all ${v==="ALL"?"border-slate-600 bg-slate-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[e.jsxDEV("p",{className:"text-sm text-slate-500 mb-1",children:"إجمالي الأوامر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1299,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-slate-800",children:E.total.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1300,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1295,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>m("PENDING"),className:`p-4 rounded-2xl border-2 transition-all ${v==="PENDING"?"border-blue-500 bg-blue-50":"border-slate-200 bg-white hover:border-blue-200"}`,children:[e.jsxDEV("p",{className:"text-sm text-blue-600 mb-1",children:"في الانتظار"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1306,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-700",children:E.pending.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1307,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1302,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>m("IN_PROGRESS"),className:`p-4 rounded-2xl border-2 transition-all ${v==="IN_PROGRESS"?"border-amber-500 bg-amber-50":"border-slate-200 bg-white hover:border-amber-200"}`,children:[e.jsxDEV("p",{className:"text-sm text-amber-600 mb-1",children:"قيد التنفيذ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1313,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-amber-700",children:E.inProgress.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1314,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1309,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>m("COMPLETED"),className:`p-4 rounded-2xl border-2 transition-all ${v==="COMPLETED"?"border-emerald-500 bg-emerald-50":"border-slate-200 bg-white hover:border-emerald-200"}`,children:[e.jsxDEV("p",{className:"text-sm text-emerald-600 mb-1",children:"مكتمل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1320,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-2xl font-bold text-emerald-700",children:E.completed.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1321,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1316,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1294,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm",children:e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxDEV("div",{className:"relative flex-1",children:[e.jsxDEV(Pe,{className:"absolute right-4 top-3.5 text-slate-400",size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1329,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",placeholder:"بحث برقم الأمر أو اسم المنتج...",value:V,onChange:t=>p(t.target.value),className:"w-full pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none transition-all"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1330,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1328,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Re,{size:18,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1339,columnNumber:25},void 0),e.jsxDEV("select",{value:S,onChange:t=>i(t.target.value),className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-100 focus:border-teal-400 outline-none",children:[e.jsxDEV("option",{value:"ALL",children:"كل التواريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1345,columnNumber:29},void 0),e.jsxDEV("option",{value:"TODAY",children:"اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1346,columnNumber:29},void 0),e.jsxDEV("option",{value:"WEEK",children:"آخر أسبوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1347,columnNumber:29},void 0),e.jsxDEV("option",{value:"MONTH",children:"آخر شهر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1348,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1340,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1338,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1327,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1326,columnNumber:13},void 0),j?e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(t=>e.jsxDEV("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 animate-pulse",children:[e.jsxDEV("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1359,columnNumber:29},void 0),e.jsxDEV("div",{className:"h-4 bg-slate-100 rounded w-1/2 mb-2"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1360,columnNumber:29},void 0),e.jsxDEV("div",{className:"h-8 bg-slate-100 rounded mt-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1361,columnNumber:29},void 0)]},t,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1358,columnNumber:25},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1356,columnNumber:17},void 0):me.length===0?e.jsxDEV(Ke,{icon:ee,title:"لا توجد أوامر تصنيع",description:"قم بإنشاء أمر تصنيع جديد للبدء",actionLabel:"أمر تصنيع جديد",onAction:()=>x(!0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1366,columnNumber:17},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:me.map(t=>{const A=Ce(t.status),G=A.icon,U=t.qtyPlanned>0?(t.qtyFinished||0)/t.qtyPlanned*100:0;return e.jsxDEV("div",{className:"bg-white rounded-2xl border-2 border-slate-200 hover:border-teal-300 hover:shadow-lg transition-all overflow-hidden group",children:[e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-xs font-mono text-slate-400 bg-slate-100 px-2 py-1 rounded",children:["#",t.orderNumber||"N/A"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1390,columnNumber:49},void 0),e.jsxDEV("button",{onClick:()=>He(t),className:"p-1.5 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"طباعة أمر التشغيل",children:e.jsxDEV(ge,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1399,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1394,columnNumber:49},void 0),W(t.status)&&e.jsxDEV("button",{onClick:()=>z(t),className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"حذف أمر التصنيع",children:e.jsxDEV(J,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1408,columnNumber:57},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1403,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1389,columnNumber:45},void 0),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${A.color}`,children:[e.jsxDEV(G,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1413,columnNumber:49},void 0),A.label]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1412,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1388,columnNumber:41},void 0),e.jsxDEV("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-teal-700 transition-colors line-clamp-1",children:t.finishedProductName||"منتج غير محدد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1418,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 text-sm text-slate-500 mb-4",children:[e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(Y,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1424,columnNumber:49},void 0),t.qtyPlanned," ",t.finishedProductUnit||"وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1423,columnNumber:45},void 0),t.scheduledEndDate&&e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1429,columnNumber:53},void 0),new Date(t.scheduledEndDate).toLocaleDateString("en-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1428,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1422,columnNumber:41},void 0),t.status===T.IN_PROGRESS&&e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxDEV("span",{className:"text-slate-500",children:"التقدم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1439,columnNumber:53},void 0),e.jsxDEV("span",{className:"font-bold text-teal-600",children:[U.toFixed(0),"%"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1440,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1438,columnNumber:49},void 0),e.jsxDEV("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:"h-full bg-teal-500 rounded-full transition-all duration-500",style:{width:`${U}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1443,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1442,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1437,columnNumber:45},void 0),t.status===T.COMPLETED&&e.jsxDEV("div",{className:"bg-emerald-50 rounded-xl p-3 border border-emerald-100",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{className:"text-emerald-600",children:"الكمية المنتجة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1455,columnNumber:53},void 0),e.jsxDEV("span",{className:"font-bold text-emerald-700",children:[t.qtyFinished," ",t.finishedProductUnit||"وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1456,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1454,columnNumber:49},void 0),(t.qtyScrapped||0)>0&&e.jsxDEV("div",{className:"flex justify-between text-sm mt-1",children:[e.jsxDEV("span",{className:"text-rose-500",children:"الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1460,columnNumber:57},void 0),e.jsxDEV("span",{className:"font-bold text-rose-600",children:t.qtyScrapped},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1461,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1459,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1453,columnNumber:45},void 0),(t.standardCost||t.estimatedCost)&&(t.standardCost||0)>0&&e.jsxDEV("div",{className:"bg-violet-50/50 rounded-xl p-3 border border-violet-100 mt-2",children:[e.jsxDEV("div",{className:"flex justify-between items-center text-sm",children:[e.jsxDEV("span",{className:"text-violet-600 font-medium",children:"التكلفة التقديرية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1471,columnNumber:53},void 0),e.jsxDEV("span",{className:"font-bold text-violet-700 font-mono",children:[(t.standardCost||t.estimatedCost||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1472,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1470,columnNumber:49},void 0),t.status===T.COMPLETED&&t.actualMaterialCost!==void 0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex justify-between items-center text-sm mt-1",children:[e.jsxDEV("span",{className:"text-blue-600 font-medium",children:"التكلفة الفعلية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1480,columnNumber:61},void 0),e.jsxDEV("span",{className:"font-bold text-blue-700 font-mono",children:[(t.actualMaterialCost||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1481,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1479,columnNumber:57},void 0),t.totalVariance!==void 0&&t.totalVariance!==0&&e.jsxDEV("div",{className:"flex justify-between items-center text-sm mt-1 pt-1 border-t border-violet-200",children:[e.jsxDEV("span",{className:"text-slate-600 font-medium",children:"الفرق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1487,columnNumber:65},void 0),e.jsxDEV("span",{className:`font-bold font-mono flex items-center gap-1 ${t.totalVariance>0?"text-rose-600":"text-emerald-600"}`,children:[t.totalVariance>0?"+":"",t.totalVariance.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," ج.م",e.jsxDEV("span",{className:`text-xs px-1.5 py-0.5 rounded ${t.totalVariance>0?"bg-rose-100":"bg-emerald-100"}`,children:t.totalVariance>0?"أكثر":"أقل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1490,columnNumber:69},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1488,columnNumber:65},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1486,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1478,columnNumber:53},void 0),t.status===T.IN_PROGRESS&&e.jsxDEV("div",{className:"mt-2",children:[e.jsxDEV("div",{className:"flex justify-between text-xs text-violet-500 mb-1",children:[e.jsxDEV("span",{children:"استهلاك الميزانية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1502,columnNumber:61},void 0),e.jsxDEV("span",{children:[Math.round((t.actualMaterialCost||0)/(t.standardCost||1)*100),"%"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1503,columnNumber:61},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1501,columnNumber:57},void 0),e.jsxDEV("div",{className:"h-1.5 bg-violet-200 rounded-full overflow-hidden",children:e.jsxDEV("div",{className:`h-full rounded-full transition-all ${(t.actualMaterialCost||0)/(t.standardCost||1)>1?"bg-rose-500":"bg-violet-500"}`,style:{width:`${Math.min(100,(t.actualMaterialCost||0)/(t.standardCost||1)*100)}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1506,columnNumber:61},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1505,columnNumber:57},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1500,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1469,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1387,columnNumber:37},void 0),e.jsxDEV("div",{className:"border-t border-slate-100 bg-slate-50 p-4 flex gap-2",children:[C(t.status)&&e.jsxDEV("button",{onClick:()=>f(t),className:"flex-1 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-200",children:[e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1527,columnNumber:49},void 0),"بدء التصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1523,columnNumber:45},void 0),t.status===T.WAITING_MATERIALS&&e.jsxDEV("button",{disabled:!0,className:"flex-1 py-2.5 bg-slate-300 text-slate-500 rounded-xl font-bold cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsxDEV(oe,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1536,columnNumber:49},void 0),"نقص خامات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1532,columnNumber:45},void 0),w(t.status)&&e.jsxDEV("button",{onClick:()=>F(t),className:"flex-1 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-emerald-200",children:[e.jsxDEV(ve,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1545,columnNumber:49},void 0),"إتمام التصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1541,columnNumber:45},void 0),t.status===T.COMPLETED&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex-1 py-2.5 bg-emerald-50 text-emerald-700 rounded-xl font-bold flex items-center justify-center gap-2 border border-emerald-200",children:[e.jsxDEV(Q,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1552,columnNumber:53},void 0),"تم الإنتاج ✓"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1551,columnNumber:49},void 0),e.jsxDEV("button",{onClick:()=>Me(t),className:"p-2.5 text-teal-600 bg-teal-50 hover:bg-teal-100 rounded-xl transition-colors",title:"طباعة تقرير الإتمام",children:e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1560,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1555,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1550,columnNumber:45},void 0),(C(t.status)||w(t.status))&&e.jsxDEV("button",{onClick:()=>s(t.id),className:"p-2.5 text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-xl transition-colors",title:"إلغاء",children:e.jsxDEV(be,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1570,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1565,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1521,columnNumber:37},void 0)]},t.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1382,columnNumber:33},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1375,columnNumber:21},void 0),se>1&&e.jsxDEV("div",{className:"flex items-center justify-center gap-4 py-4",children:[e.jsxDEV("button",{onClick:o,disabled:g.offset===0,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsxDEV(We,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1587,columnNumber:33},void 0),"السابق"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1582,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm text-slate-600 font-medium",children:["صفحة ",re," من ",se]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1590,columnNumber:29},void 0),e.jsxDEV("button",{onClick:d,disabled:!g.hasMore,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:["التالي",e.jsxDEV(Ge,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1599,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1593,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1581,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1374,columnNumber:17},void 0),R&&e.jsxDEV(Oe,{onClose:()=>x(!1),onSuccess:()=>{x(!1),_(0)}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1608,columnNumber:17},void 0),h&&e.jsxDEV(en,{order:h,onClose:()=>F(null),onConfirm:y},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1619,columnNumber:17},void 0),e.jsxDEV(ie,{isOpen:n.isOpen,onClose:()=>M({...n,isOpen:!1}),message:n.message,type:n.type},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1627,columnNumber:13},void 0),e.jsxDEV(xe,{isOpen:N.isOpen,onClose:()=>L({...N,isOpen:!1}),onConfirm:N.onConfirm,title:N.title,message:N.message},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1635,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ProductionOrdersSimple.tsx",lineNumber:1265,columnNumber:9},void 0)},on=({products:c})=>{const[P,j]=a.useState([]),[b,V]=a.useState(!0),[p,H]=a.useState({productId:"",movementType:"",startDate:"",endDate:""}),[O,v]=a.useState({total:0,limit:100,offset:0,hasMore:!1}),[B,S]=a.useState(!0),i=async(n=!1)=>{V(!0);try{const M=n?0:O.offset,u=await I.getStockMovements({...p,limit:O.limit,offset:M});j(n?u.movements:N=>[...N,...u.movements]),v(u.pagination)}catch{}finally{V(!1)}};a.useEffect(()=>{i(!0)},[p]);const R=()=>{O.hasMore&&!b&&(v(n=>({...n,offset:n.offset+n.limit})),i(!1))},x=a.useMemo(()=>B?P.filter(n=>n.movementType===D.PRODUCTION_USE||n.movementType===D.PRODUCTION_OUTPUT||n.movementType===D.SCRAP):P,[P,B]),r=a.useMemo(()=>{const n=P.filter(N=>N.movementType===D.PRODUCTION_USE),M=P.filter(N=>N.movementType===D.PRODUCTION_OUTPUT),u=P.filter(N=>N.movementType===D.SCRAP);return{totalMaterialsUsed:n.reduce((N,L)=>N+Math.abs(L.qtyChange),0),totalProductsProduced:M.reduce((N,L)=>N+L.qtyChange,0),totalScrap:u.reduce((N,L)=>N+Math.abs(L.qtyChange),0),productionUseCount:n.length,productionOutputCount:M.length,scrapCount:u.length}},[P]),l=()=>{const n=x.map(N=>({التاريخ:new Date(N.movementDate).toLocaleDateString("en-EG"),الوقت:new Date(N.movementDate).toLocaleTimeString("en-EG"),المنتج:N.productName,النوع:F(N.movementType),الكمية:N.qtyChange,الوحدة:N.productUnit,التكلفة:N.unitCost||0,ملاحظات:N.notes||"",المرجع:`${N.referenceType||""} ${N.referenceId||""}`})),M=ce.utils.json_to_sheet(n),u=ce.utils.book_new();ce.utils.book_append_sheet(u,M,"حركة المخزون"),u.Workbook||(u.Workbook={}),u.Workbook.Views||(u.Workbook.Views=[]),u.Workbook.Views[0]||(u.Workbook.Views[0]={}),u.Workbook.Views[0].RTL=!0,ce.writeFile(u,`Stock_Movements_${new Date().toISOString().split("T")[0]}.xlsx`)},h=n=>{switch(n){case D.PURCHASE:case D.RETURN_IN:case D.PRODUCTION_OUTPUT:case D.TRANSFER_IN:case D.OPENING_BALANCE:return e.jsxDEV(Ye,{className:"text-emerald-500",size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:125,columnNumber:24},void 0);case D.SALE:case D.RETURN_OUT:case D.PRODUCTION_USE:case D.TRANSFER_OUT:case D.SCRAP:return e.jsxDEV(je,{className:"text-rose-500",size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:131,columnNumber:24},void 0);default:return e.jsxDEV(K,{className:"text-blue-500",size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:133,columnNumber:24},void 0)}},F=n=>{switch(n){case D.PURCHASE:return"مشتريات";case D.SALE:return"مبيعات";case D.RETURN_IN:return"مرتجع مبيعات";case D.RETURN_OUT:return"مرتجع مشتريات";case D.PRODUCTION_USE:return"صرف للإنتاج";case D.PRODUCTION_OUTPUT:return"إنتاج تام";case D.ADJUSTMENT:return"تسوية جردية";case D.TRANSFER_IN:return"تحويل وارد";case D.TRANSFER_OUT:return"تحويل صادر";case D.OPENING_BALANCE:return"رصيد افتتاحي";case D.SCRAP:return"هالك إنتاج";default:return n}},g=n=>{switch(n){case D.PURCHASE:case D.PRODUCTION_OUTPUT:case D.RETURN_IN:return"bg-emerald-50 text-emerald-700 border-emerald-100";case D.SALE:case D.PRODUCTION_USE:case D.SCRAP:return"bg-rose-50 text-rose-700 border-rose-100";case D.TRANSFER_IN:case D.TRANSFER_OUT:return"bg-blue-50 text-blue-700 border-blue-100";default:return"bg-slate-50 text-slate-700 border-slate-100"}},k=x.reduce((n,M)=>M.qtyChange>0?n+M.qtyChange:n,0),E=x.reduce((n,M)=>M.qtyChange<0?n+Math.abs(M.qtyChange):n,0),q=[D.PRODUCTION_USE,D.PRODUCTION_OUTPUT,D.SCRAP];return e.jsxDEV("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsxDEV(ee,{className:"text-teal-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:190,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:189,columnNumber:25},void 0),"حركة مخزون التصنيع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:188,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-1",children:"تتبع استهلاك المواد الخام ومخرجات الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:194,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:187,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors shadow-sm",children:[e.jsxDEV(K,{size:18,className:b?"animate-spin":""},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:201,columnNumber:25},void 0),e.jsxDEV("span",{children:"تحديث"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:202,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:197,columnNumber:21},void 0),e.jsxDEV("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 hover:text-emerald-600 transition-colors shadow-sm",children:[e.jsxDEV(Ze,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:208,columnNumber:25},void 0),e.jsxDEV("span",{children:"تصدير Excel"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:209,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:204,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:196,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:186,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 border border-rose-200 rounded-2xl p-5 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-20 h-20 bg-rose-200/30 rounded-full blur-2xl -ml-10 -mt-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:218,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-rose-700 mb-2",children:[e.jsxDEV(je,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:221,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"مواد مستهلكة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:222,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:220,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-rose-800",children:r.totalMaterialsUsed.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:224,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-rose-600 mt-1",children:[r.productionUseCount," حركة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:225,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:219,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:217,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-2xl p-5 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-20 h-20 bg-emerald-200/30 rounded-full blur-2xl -ml-10 -mt-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:231,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-emerald-700 mb-2",children:[e.jsxDEV(Q,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:234,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"منتجات تامة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:235,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:233,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-emerald-800",children:r.totalProductsProduced.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:237,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-emerald-600 mt-1",children:[r.productionOutputCount," حركة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:238,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:232,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:230,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-5 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-20 h-20 bg-amber-200/30 rounded-full blur-2xl -ml-10 -mt-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:244,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-700 mb-2",children:[e.jsxDEV(pe,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:247,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"هالك الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:248,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:246,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-amber-800",children:r.totalScrap.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:250,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-amber-600 mt-1",children:[r.scrapCount," حركة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:251,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:245,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:243,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-5 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-20 h-20 bg-blue-200/30 rounded-full blur-2xl -ml-10 -mt-10"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:257,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[e.jsxDEV(De,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:260,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-sm font-bold",children:"كفاءة المواد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:261,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:259,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-blue-800",children:[r.totalMaterialsUsed>0?((r.totalMaterialsUsed-r.totalScrap)/r.totalMaterialsUsed*100).toFixed(1):100,"%"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:263,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-blue-600 mt-1",children:"نسبة الاستخدام الفعلي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:268,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:258,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:256,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:215,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxDEV("button",{onClick:()=>S(!0),className:`px-4 py-2 rounded-xl font-bold text-sm transition-all ${B?"bg-teal-600 text-white shadow-lg shadow-teal-200":"bg-white border border-slate-200 text-slate-600 hover:border-teal-300"}`,children:[e.jsxDEV(ee,{size:16,className:"inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:282,columnNumber:21},void 0),"حركات التصنيع فقط"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:275,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>S(!1),className:`px-4 py-2 rounded-xl font-bold text-sm transition-all ${B?"bg-white border border-slate-200 text-slate-600 hover:border-slate-300":"bg-slate-800 text-white shadow-lg"}`,children:[e.jsxDEV(Y,{size:16,className:"inline ml-1"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:292,columnNumber:21},void 0),"جميع الحركات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:285,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:274,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block",children:"المنتج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:301,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Pe,{className:"absolute right-3 top-3 text-slate-400",size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:303,columnNumber:29},void 0),e.jsxDEV("select",{value:p.productId,onChange:n=>H({...p,productId:n.target.value}),className:"w-full pl-4 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-100 outline-none appearance-none bg-white",children:[e.jsxDEV("option",{value:"",children:"جميع المنتجات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:309,columnNumber:33},void 0),c.map(n=>e.jsxDEV("option",{value:n.id,children:n.name},n.id,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:311,columnNumber:37},void 0))]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:304,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:302,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:300,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block",children:"نوع الحركة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:317,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(fe,{className:"absolute right-3 top-3 text-slate-400",size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:319,columnNumber:29},void 0),e.jsxDEV("select",{value:p.movementType,onChange:n=>H({...p,movementType:n.target.value}),className:"w-full pl-4 pr-10 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-100 outline-none appearance-none bg-white",children:[e.jsxDEV("option",{value:"",children:"جميع الحركات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:325,columnNumber:33},void 0),e.jsxDEV("optgroup",{label:"حركات التصنيع",children:q.map(n=>e.jsxDEV("option",{value:n,children:F(n)},n,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:328,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:326,columnNumber:33},void 0),e.jsxDEV("optgroup",{label:"حركات أخرى",children:Object.values(D).filter(n=>!q.includes(n)).map(n=>e.jsxDEV("option",{value:n,children:F(n)},n,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:333,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:331,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:320,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:318,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:316,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:e.jsxDEV(ue,{label:"من تاريخ",value:p.startDate,onChange:n=>H({...p,startDate:n}),placeholder:"من تاريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:340,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:339,columnNumber:21},void 0),e.jsxDEV("div",{className:"relative",children:e.jsxDEV(ue,{label:"إلى تاريخ",value:p.endDate,onChange:n=>H({...p,endDate:n}),placeholder:"إلى تاريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:348,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:347,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:299,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:298,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 border border-emerald-200 rounded-xl p-5 flex items-center justify-between shadow-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-emerald-700 font-bold mb-1",children:"إجمالي الوارد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:362,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-emerald-800",children:["+",k.toLocaleString()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:363,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:361,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-emerald-100",children:e.jsxDEV(le,{className:"text-emerald-500",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:366,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:365,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:360,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-rose-50 to-rose-100/50 border border-rose-200 rounded-xl p-5 flex items-center justify-between shadow-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-rose-700 font-bold mb-1",children:"إجمالي المنصرف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:371,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-rose-800",children:["-",E.toLocaleString()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:372,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:370,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-rose-100",children:e.jsxDEV(de,{className:"text-rose-500",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:375,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:374,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:369,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:359,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-x-auto",children:[e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-4 text-right font-bold text-slate-600",children:"التاريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:385,columnNumber:29},void 0),e.jsxDEV("th",{className:"p-4 text-right font-bold text-slate-600",children:"المنتج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:386,columnNumber:29},void 0),e.jsxDEV("th",{className:"p-4 text-center font-bold text-slate-600",children:"نوع الحركة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:387,columnNumber:29},void 0),e.jsxDEV("th",{className:"p-4 text-center font-bold text-slate-600",children:"الكمية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:388,columnNumber:29},void 0),e.jsxDEV("th",{className:"p-4 text-center font-bold text-slate-600",children:"التكلفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:389,columnNumber:29},void 0),e.jsxDEV("th",{className:"p-4 text-right font-bold text-slate-600",children:"ملاحظات / مرجع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:390,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:384,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:383,columnNumber:21},void 0),e.jsxDEV("tbody",{className:"divide-y divide-slate-100",children:[x.map(n=>e.jsxDEV("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsxDEV("td",{className:"p-4 text-slate-600",children:[e.jsxDEV("div",{className:"font-bold text-slate-700",children:new Date(n.movementDate).toLocaleDateString("en-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:397,columnNumber:37},void 0),e.jsxDEV("div",{className:"text-xs text-slate-400",children:new Date(n.movementDate).toLocaleTimeString("en-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:398,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:396,columnNumber:33},void 0),e.jsxDEV("td",{className:"p-4",children:[e.jsxDEV("div",{className:"font-bold text-slate-800",children:n.productName},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:401,columnNumber:37},void 0),e.jsxDEV("div",{className:"text-xs text-slate-500 font-mono",children:n.productSku},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:402,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:400,columnNumber:33},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:`flex items-center justify-center gap-2 px-3 py-1.5 rounded-lg border ${g(n.movementType)}`,children:[h(n.movementType),e.jsxDEV("span",{className:"text-sm font-bold",children:F(n.movementType)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:407,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:405,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:404,columnNumber:33},void 0),e.jsxDEV("td",{className:"p-4 text-center",children:[e.jsxDEV("span",{className:`font-bold text-lg ${n.qtyChange>0?"text-emerald-600":"text-rose-600"}`,children:[n.qtyChange>0?"+":"",n.qtyChange]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:413,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-xs text-slate-400 mr-1 block",children:n.productUnit},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:416,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:412,columnNumber:33},void 0),e.jsxDEV("td",{className:"p-4 text-center font-medium text-slate-600",children:n.unitCost?e.jsxDEV("span",{className:"font-mono",children:n.unitCost.toFixed(2)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:420,columnNumber:41},void 0):"-"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:418,columnNumber:33},void 0),e.jsxDEV("td",{className:"p-4 text-sm text-slate-600",children:[n.notes&&e.jsxDEV("div",{className:"mb-1",children:n.notes},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:424,columnNumber:52},void 0),n.referenceType&&e.jsxDEV("div",{className:"inline-flex items-center gap-1 bg-slate-100 px-2 py-1 rounded text-xs text-slate-500 font-medium",children:[e.jsxDEV(ne,{size:12},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:427,columnNumber:45},void 0),n.referenceType," #",n.referenceId?.substring(0,8),"..."]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:426,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:423,columnNumber:33},void 0)]},n.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:395,columnNumber:29},void 0)),!b&&x.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:6,className:"p-16 text-center",children:e.jsxDEV("div",{className:"flex flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"p-4 bg-slate-100 rounded-full",children:e.jsxDEV(ee,{size:40,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:439,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:438,columnNumber:41},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-700 text-lg mb-2",children:"لا توجد حركات مخزنية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:442,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-slate-500 max-w-md",children:"ستظهر هنا حركات استهلاك المواد الخام ومخرجات الإنتاج عند بدء وإنهاء أوامر التصنيع."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:443,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:441,columnNumber:41},void 0),B&&e.jsxDEV("button",{onClick:()=>S(!1),className:"text-teal-600 font-bold hover:underline flex items-center gap-1",children:[e.jsxDEV(Ne,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:452,columnNumber:49},void 0),"عرض جميع الحركات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:448,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:437,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:436,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:435,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:393,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:382,columnNumber:17},void 0),O.hasMore&&e.jsxDEV("div",{className:"p-4 border-t border-slate-100 text-center bg-slate-50",children:e.jsxDEV("button",{onClick:R,disabled:b,className:"text-teal-600 font-bold hover:bg-white hover:shadow-sm px-6 py-2 rounded-xl transition-all border border-transparent hover:border-slate-200",children:b?"جاري التحميل...":"عرض المزيد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:465,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:464,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:381,columnNumber:13},void 0),x.length>0&&e.jsxDEV("div",{className:"bg-gradient-to-r from-teal-50 to-blue-50 border border-teal-200 rounded-xl p-4 text-sm text-teal-800 flex items-start gap-3",children:[e.jsxDEV(Ne,{size:20,className:"shrink-0 mt-0.5 text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:479,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold mb-1",children:"ملاحظة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:481,columnNumber:25},void 0),e.jsxDEV("p",{className:"leading-relaxed text-teal-700",children:'يتم تسجيل حركات المخزون تلقائياً عند بدء أو إنهاء أوامر التصنيع. "صرف للإنتاج" = استهلاك المواد الخام | "إنتاج تام" = المنتجات المصنعة | "هالك" = الفاقد'},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:482,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:480,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:478,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/StockMovements.tsx",lineNumber:184,columnNumber:9},void 0)},ln=()=>{const[c,P]=a.useState([]),[j,b]=a.useState(null),[V,p]=a.useState(!0),[H,O]=a.useState(!1),[v,B]=a.useState("ALL"),[S,i]=a.useState("ALL"),[R,x]=a.useState({start:"",end:""}),[r,l]=a.useState(null),[h,F]=a.useState({show:!1,message:"",type:"error"}),g=(m,d="error")=>F({show:!0,message:m,type:d}),[k,E]=a.useState({isOpen:!1,record:null,status:"",notes:""});a.useEffect(()=>{q()},[]);const q=async()=>{H||p(!0);try{const m={};v!=="ALL"&&(m.scrapType=v),S!=="ALL"&&(m.disposalStatus=S),R.start&&(m.startDate=R.start),R.end&&(m.endDate=R.end);const[d,o]=await Promise.all([I.getScrap(m),I.getScrapStats(m)]);P(d),b(o)}catch{}finally{p(!1),O(!1)}},n=()=>{O(!0),q()};a.useEffect(()=>{q()},[v,S,R]);const M=async(m,d,o)=>{E({isOpen:!0,record:m,status:d,notes:o||""})},u=async()=>{const{record:m,status:d,notes:o}=k;if(E({isOpen:!1,record:null,status:"",notes:""}),!!m)try{await I.updateScrapDisposal(m.id,d,o),q(),r&&r.id===m.id&&l({...r,disposal_status:d,disposal_notes:o||null})}catch{g("فشل تحديث حالة التخلص","error")}},N=m=>{switch(m){case"CUTTING_WASTE":return"bg-amber-50 text-amber-700 border-amber-200 ring-amber-100";case"DEFECTIVE_MATERIAL":return"bg-rose-50 text-rose-700 border-rose-200 ring-rose-100";case"PROCESS_LOSS":return"bg-orange-50 text-orange-700 border-orange-200 ring-orange-100";case"DAMAGED_GOODS":return"bg-red-50 text-red-700 border-red-200 ring-red-100";case"EXPIRED_MATERIALS":return"bg-purple-50 text-purple-700 border-purple-200 ring-purple-100";default:return"bg-slate-50 text-slate-700 border-slate-200 ring-slate-100"}},L=m=>{switch(m){case"CUTTING_WASTE":return"مخلفات قص";case"DEFECTIVE_MATERIAL":return"خامات معيبة";case"PROCESS_LOSS":return"فاقد تشغيل";case"DAMAGED_GOODS":return"منتجات تالفة";case"EXPIRED_MATERIALS":return"خامات منتهية";case"OTHER":return"أخرى";default:return m}},_=m=>{switch(m){case"PENDING":return"bg-amber-100 text-amber-800 border-amber-200";case"DISPOSED":return"bg-slate-100 text-slate-800 border-slate-200";case"SOLD":return"bg-teal-100 text-teal-800 border-teal-200";case"RECYCLED":return"bg-emerald-100 text-emerald-800 border-emerald-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}},$=m=>{switch(m){case"PENDING":return"قيد الانتظار";case"DISPOSED":return"تم التخلص";case"SOLD":return"تم البيع";case"RECYCLED":return"تم التدوير";default:return m}};return e.jsxDEV("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-3 bg-rose-100 rounded-2xl",children:e.jsxDEV(J,{className:"text-rose-600",size:32},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:150,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:149,columnNumber:25},void 0),"إدارة الهالك والمخلفات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-2 text-lg",children:"مراقبة الفاقد وتحليل تكاليف الهالك لتحسين كفاءة الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:154,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:147,columnNumber:17},void 0),e.jsxDEV("button",{onClick:n,className:`p-3 text-slate-500 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all ${H?"animate-spin":""}`,title:"تحديث البيانات",children:e.jsxDEV(K,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:161,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:156,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:146,columnNumber:13},void 0),j&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxDEV("div",{className:"group bg-gradient-to-br from-rose-500 to-red-600 rounded-3xl p-6 text-white shadow-xl shadow-rose-200 relative overflow-hidden transition-transform hover:-translate-y-1",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-16 -mt-16 group-hover:scale-110 transition-transform"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:169,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("p",{className:"text-rose-100 font-medium mb-1",children:"إجمالي قيمة الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:171,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-4xl font-black tracking-tight",children:[(j.summary.total_value||0).toLocaleString()," ",e.jsxDEV("span",{className:"text-lg font-normal opacity-80",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:173,columnNumber:85},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:172,columnNumber:29},void 0),e.jsxDEV("div",{className:"mt-4 flex items-center gap-2 text-sm text-rose-100 bg-white/10 w-fit px-3 py-1 rounded-full backdrop-blur-sm",children:[e.jsxDEV(de,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:176,columnNumber:33},void 0),e.jsxDEV("span",{children:"تكلفة مفقودة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:177,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:175,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:170,columnNumber:25},void 0),e.jsxDEV(te,{className:"absolute left-4 bottom-4 text-white/20 group-hover:scale-110 transition-transform",size:100},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:180,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:168,columnNumber:21},void 0),e.jsxDEV("div",{className:"group bg-white rounded-3xl p-6 border border-slate-200 shadow-lg relative overflow-hidden transition-transform hover:-translate-y-1",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("div",{className:"p-2 bg-amber-100 rounded-lg text-amber-600",children:e.jsxDEV(Y,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:187,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:186,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-slate-500 font-bold",children:"إجمالي الكمية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:189,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:185,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-3xl font-black text-slate-800",children:(j.summary.total_quantity||0).toFixed(2)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:191,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-1",children:"وحدة مختلفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:192,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:184,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-amber-50 rounded-full blur-xl group-hover:bg-amber-100 transition-colors"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:194,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:183,columnNumber:21},void 0),e.jsxDEV("div",{className:"group bg-white rounded-3xl p-6 border border-slate-200 shadow-lg relative overflow-hidden transition-transform hover:-translate-y-1",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("div",{className:"p-2 bg-purple-100 rounded-lg text-purple-600",children:e.jsxDEV(fe,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:201,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:200,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-slate-500 font-bold",children:"عدد السجلات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:203,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:199,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-3xl font-black text-slate-800",children:j.summary.total_records||0},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:205,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-1",children:"عملية تسجيل هالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:206,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:198,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-purple-50 rounded-full blur-xl group-hover:bg-purple-100 transition-colors"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:208,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:197,columnNumber:21},void 0),e.jsxDEV("div",{className:"group bg-white rounded-3xl p-6 border border-slate-200 shadow-lg relative overflow-hidden transition-transform hover:-translate-y-1",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("div",{className:"p-2 bg-teal-100 rounded-lg text-teal-600",children:e.jsxDEV(oe,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:215,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:214,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-slate-500 font-bold",children:"متوسط القيمة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:217,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:213,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-3xl font-black text-slate-800",children:[(j.summary.avg_value||0).toFixed(2)," ",e.jsxDEV("span",{className:"text-sm text-slate-400",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:219,columnNumber:124},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:219,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-1",children:"لكل عملية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:220,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:212,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-teal-50 rounded-full blur-xl group-hover:bg-teal-100 transition-colors"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:222,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:167,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"نوع الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:231,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("select",{value:v,onChange:m=>B(m.target.value),className:"w-full appearance-none border border-slate-200 rounded-xl px-4 py-3 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-rose-100 focus:border-rose-400 outline-none transition-all font-medium text-slate-700",children:[e.jsxDEV("option",{value:"ALL",children:"الكل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:238,columnNumber:33},void 0),e.jsxDEV("option",{value:"CUTTING_WASTE",children:"مخلفات قص"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:239,columnNumber:33},void 0),e.jsxDEV("option",{value:"DEFECTIVE_MATERIAL",children:"خامات معيبة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:240,columnNumber:33},void 0),e.jsxDEV("option",{value:"PROCESS_LOSS",children:"فاقد تشغيل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:241,columnNumber:33},void 0),e.jsxDEV("option",{value:"DAMAGED_GOODS",children:"منتجات تالفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:242,columnNumber:33},void 0),e.jsxDEV("option",{value:"EXPIRED_MATERIALS",children:"خامات منتهية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:243,columnNumber:33},void 0),e.jsxDEV("option",{value:"OTHER",children:"أخرى"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:244,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:233,columnNumber:29},void 0),e.jsxDEV(fe,{className:"absolute left-4 top-3.5 text-slate-400 pointer-events-none",size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:246,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:232,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:230,columnNumber:21},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"حالة التخلص"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:251,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("select",{value:S,onChange:m=>i(m.target.value),className:"w-full appearance-none border border-slate-200 rounded-xl px-4 py-3 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-rose-100 focus:border-rose-400 outline-none transition-all font-medium text-slate-700",children:[e.jsxDEV("option",{value:"ALL",children:"الكل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:258,columnNumber:33},void 0),e.jsxDEV("option",{value:"PENDING",children:"قيد الانتظار"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:259,columnNumber:33},void 0),e.jsxDEV("option",{value:"DISPOSED",children:"تم التخلص"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:260,columnNumber:33},void 0),e.jsxDEV("option",{value:"SOLD",children:"تم البيع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:261,columnNumber:33},void 0),e.jsxDEV("option",{value:"RECYCLED",children:"تم التدوير"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:262,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:253,columnNumber:29},void 0),e.jsxDEV(fe,{className:"absolute left-4 top-3.5 text-slate-400 pointer-events-none",size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:264,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:252,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:250,columnNumber:21},void 0),e.jsxDEV("div",{children:e.jsxDEV(ue,{label:"من تاريخ",value:R.start,onChange:m=>x({...R,start:m}),placeholder:"اختر تاريخ البداية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:269,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:268,columnNumber:21},void 0),e.jsxDEV("div",{children:e.jsxDEV(ue,{label:"إلى تاريخ",value:R.end,onChange:m=>x({...R,end:m}),placeholder:"اختر تاريخ النهاية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:278,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:277,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:229,columnNumber:17},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:228,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:V?e.jsxDEV("div",{className:"p-16 flex flex-col items-center justify-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rose-600 mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:292,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-500 font-medium",children:"جاري تحديث البيانات..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:293,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:291,columnNumber:21},void 0):c.length===0?e.jsxDEV("div",{className:"p-24 text-center",children:[e.jsxDEV("div",{className:"bg-slate-50 p-8 rounded-full mb-6 w-fit mx-auto border border-slate-100",children:e.jsxDEV(J,{size:48,className:"text-slate-300"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:298,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:297,columnNumber:25},void 0),e.jsxDEV("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"لا توجد سجلات هالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:300,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-500 max-w-md mx-auto",children:"لم يتم تسجيل أي فاقد أو هالك يطابق معايير البحث الحالية."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:301,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:296,columnNumber:21},void 0):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.jsxDEV("th",{className:"p-5 text-right text-sm font-extrabold text-slate-600",children:"التاريخ"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:308,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-right text-sm font-extrabold text-slate-600",children:"المصدر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:309,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-right text-sm font-extrabold text-slate-600",children:"المادة التالفة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:310,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-center text-sm font-extrabold text-slate-600",children:"الكمية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:311,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-center text-sm font-extrabold text-slate-600",children:"النوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:312,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-center text-sm font-extrabold text-slate-600",children:"القيمة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:313,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-center text-sm font-extrabold text-slate-600",children:"الحالة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:314,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-5 text-center text-sm font-extrabold text-slate-600",children:"إجراءات"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:315,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:307,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:306,columnNumber:29},void 0),e.jsxDEV("tbody",{className:"divide-y divide-slate-100",children:c.map((m,d)=>e.jsxDEV("tr",{className:"hover:bg-rose-50/30 transition-colors group cursor-pointer",onClick:()=>l(m),children:[e.jsxDEV("td",{className:"p-5",children:[e.jsxDEV("div",{className:"font-bold text-slate-700",children:new Date(m.created_at).toLocaleDateString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:326,columnNumber:45},void 0),e.jsxDEV("div",{className:"text-xs text-slate-400 mt-1",children:new Date(m.created_at).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:329,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:325,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5",children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("span",{className:"text-xs font-bold text-slate-400 mb-0.5",children:"أمر تصنيع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:335,columnNumber:49},void 0),e.jsxDEV("span",{className:"font-bold text-slate-700 bg-slate-100 px-2 py-1 rounded w-fit",children:["#",m.order_number]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:336,columnNumber:49},void 0),e.jsxDEV("span",{className:"text-xs text-slate-500 mt-1 truncate max-w-[150px]",title:m.finished_product_name,children:m.finished_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:337,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:334,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:333,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-slate-800",children:m.scrap_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:342,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 font-mono mt-0.5",children:m.scrap_product_sku},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:343,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:341,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:340,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5 text-center",children:[e.jsxDEV("span",{className:"text-lg font-black text-slate-700",children:m.quantity.toFixed(2)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:347,columnNumber:45},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 font-medium",children:m.unit},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:348,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:346,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5 text-center",children:e.jsxDEV("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold ring-1 ring-inset ${N(m.scrap_type)}`,children:L(m.scrap_type)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:351,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:350,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5 text-center",children:[e.jsxDEV("span",{className:"text-rose-600 font-bold font-mono text-base",children:m.total_value.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:356,columnNumber:45},void 0),e.jsxDEV("span",{className:"text-xs text-rose-400 mr-1",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:359,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:355,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5 text-center",children:e.jsxDEV("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold border ${_(m.disposal_status)}`,children:$(m.disposal_status)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:362,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:361,columnNumber:41},void 0),e.jsxDEV("td",{className:"p-5 text-right w-fit",children:e.jsxDEV("div",{className:"flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxDEV("button",{onClick:o=>{o.stopPropagation(),l(m)},className:"p-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors shadow-sm",title:"عرض التفاصيل",children:e.jsxDEV(we,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:373,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:368,columnNumber:49},void 0),m.disposal_status==="PENDING"&&e.jsxDEV("button",{onClick:o=>{o.stopPropagation(),M(m,"DISPOSED","تم التخلص السريع")},className:"p-2 text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-lg transition-colors shadow-sm",title:"تخلص سريع",children:e.jsxDEV(J,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:381,columnNumber:57},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:376,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:367,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:366,columnNumber:41},void 0)]},m.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:320,columnNumber:37},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:318,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:305,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:304,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:289,columnNumber:13},void 0),r&&e.jsxDEV("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxDEV("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-3xl overflow-hidden scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxDEV("div",{className:"p-6 bg-gradient-to-r from-slate-900 to-slate-800 text-white flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(pe,{className:"text-rose-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:402,columnNumber:37},void 0),"تفاصيل الهالك"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:401,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mt-1",children:["المعرف: ",r.id]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:405,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:400,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>l(null),className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:e.jsxDEV(be,{size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:411,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:407,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:399,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsxDEV("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"المادة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:419,columnNumber:37},void 0),e.jsxDEV("p",{className:"font-bold text-slate-800 text-lg",children:r.scrap_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:420,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500 font-mono",children:r.scrap_product_sku},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:421,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:418,columnNumber:33},void 0),e.jsxDEV("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsxDEV("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"الكمية المهدرة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:424,columnNumber:37},void 0),e.jsxDEV("p",{className:"font-black text-rose-600 text-2xl",children:r.quantity.toFixed(2)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:425,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:r.unit},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:426,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:423,columnNumber:33},void 0),e.jsxDEV("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsxDEV("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"القيمة الإجمالية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:429,columnNumber:37},void 0),e.jsxDEV("p",{className:"font-black text-rose-600 text-2xl",children:r.total_value.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:430,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:431,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:428,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:417,columnNumber:29},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-bold text-slate-400 uppercase border-b border-slate-100 pb-2 mb-4",children:"معلومات المصدر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:438,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-50",children:[e.jsxDEV("span",{className:"text-slate-600",children:"أمر التصنيع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:440,columnNumber:45},void 0),e.jsxDEV("span",{className:"font-bold text-slate-800 bg-slate-100 px-2 py-0.5 rounded",children:["#",r.order_number]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:441,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:439,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-50",children:[e.jsxDEV("span",{className:"text-slate-600",children:"المنتج النهائي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:444,columnNumber:45},void 0),e.jsxDEV("span",{className:"font-medium text-slate-800 text-right max-w-[200px]",children:r.finished_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:445,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:443,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-50",children:[e.jsxDEV("span",{className:"text-slate-600",children:"تاريخ التسجيل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:448,columnNumber:45},void 0),e.jsxDEV("span",{className:"font-medium text-slate-800",children:new Date(r.created_at).toLocaleDateString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:449,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:447,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:437,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:436,columnNumber:33},void 0),e.jsxDEV("div",{className:"space-y-6",children:e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-sm font-bold text-slate-400 uppercase border-b border-slate-100 pb-2 mb-4",children:"التصنيف والحالة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:456,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-50",children:[e.jsxDEV("span",{className:"text-slate-600",children:"نوع الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:458,columnNumber:45},void 0),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${N(r.scrap_type)}`,children:L(r.scrap_type)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:459,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:457,columnNumber:41},void 0),e.jsxDEV("div",{className:"flex justify-between items-center py-2 border-b border-slate-50",children:[e.jsxDEV("span",{className:"text-slate-600",children:"حالة التخلص"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:464,columnNumber:45},void 0),e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${_(r.disposal_status)}`,children:$(r.disposal_status)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:465,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:463,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:455,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:454,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:435,columnNumber:29},void 0),r.reason&&e.jsxDEV("div",{className:"bg-rose-50 border border-rose-100 p-4 rounded-xl",children:[e.jsxDEV("h5",{className:"text-rose-800 font-bold mb-1 flex items-center gap-2",children:[e.jsxDEV(oe,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:476,columnNumber:41},void 0),"سبب الهالك"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:475,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-rose-700",children:r.reason},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:479,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:474,columnNumber:33},void 0),r.disposal_status==="PENDING"&&e.jsxDEV("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsxDEV("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsxDEV(K,{className:"text-slate-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:487,columnNumber:41},void 0),"إجراءات التخلص"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:486,columnNumber:37},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxDEV("button",{onClick:()=>M(r,"DISPOSED","تم التخلص من الهالك"),className:"px-4 py-3 bg-slate-600 text-white rounded-xl font-bold hover:bg-slate-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(J,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:495,columnNumber:45},void 0),"إعدام / تخلص"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:491,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>M(r,"SOLD","تم بيع الهالك"),className:"px-4 py-3 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(te,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:502,columnNumber:45},void 0),"بيع الهالك"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:498,columnNumber:41},void 0),e.jsxDEV("button",{onClick:()=>M(r,"RECYCLED","تم تدوير الهالك"),className:"px-4 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2",children:[e.jsxDEV(K,{size:18},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:509,columnNumber:45},void 0),"إعادة تدوير"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:505,columnNumber:41},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:490,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:485,columnNumber:33},void 0),r.disposal_date&&e.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 flex items-center gap-3",children:[e.jsxDEV(Q,{className:"text-green-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:518,columnNumber:37},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-gray-800",children:"تمت معالجة الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:520,columnNumber:41},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500",children:["تاريخ الإجراء: ",new Date(r.disposal_date).toLocaleString("ar-EG")]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:521,columnNumber:41},void 0),r.disposal_notes&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:["ملاحظات: ",r.disposal_notes]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:522,columnNumber:75},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:519,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:517,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:415,columnNumber:25},void 0),e.jsxDEV("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end",children:e.jsxDEV("button",{onClick:()=>l(null),className:"px-6 py-2.5 bg-white border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:"إغلاق"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:529,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:528,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:397,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:396,columnNumber:17},void 0),e.jsxDEV(ie,{isOpen:h.show,onClose:()=>F({...h,show:!1}),message:h.message,type:h.type},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:541,columnNumber:13},void 0),e.jsxDEV(xe,{isOpen:k.isOpen,onClose:()=>E({isOpen:!1,record:null,status:"",notes:""}),onConfirm:u,title:"تأكيد تغيير الحالة",message:"هل أنت متأكد من تغيير حالة التخلص؟",type:"warning"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:549,columnNumber:13},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/ScrapManager.tsx",lineNumber:144,columnNumber:9},void 0)},tn=({onClose:c})=>{const[P,j]=a.useState([]),[b,V]=a.useState(!0),[p,H]=a.useState(!1);a.useEffect(()=>{O()},[]);const O=async()=>{try{p||V(!0);const l=localStorage.getItem("authToken"),h=await fetch("/api/production?status=COMPLETED",{headers:{Authorization:`Bearer ${l}`}});if(!h.ok)throw new Error("Failed to load variance data");const F=await h.json(),k=(Array.isArray(F)?F:F.orders||[]).map(E=>({id:E.id,order_number:E.order_number||E.orderNumber,finished_product_name:E.finished_product_name||E.finishedProductName,qty_planned:E.qty_planned||E.qtyPlanned||0,qty_finished:E.qty_finished||E.qtyFinished||0,qty_scrapped:E.qty_scrapped||E.qtyScrapped||0,standard_cost:E.standard_cost||E.standardCost||E.estimatedCost||0,actual_material_cost:E.actual_material_cost||E.actualMaterialCost||0,actual_scrap_cost:E.actual_scrap_cost||E.actualScrapCost||0,material_variance:E.material_variance||E.materialVariance||0,yield_variance:E.yield_variance||E.yieldVariance||0,total_variance:E.total_variance??E.totalVariance??null,actual_start_date:E.actual_start_date||E.actualStartDate,actual_end_date:E.actual_end_date||E.actualEndDate||E.updated_at||E.updatedAt}));j(k.filter(E=>E.total_variance!==null&&E.total_variance!==void 0))}catch{}finally{V(!1),H(!1)}},v=()=>{H(!0),O()},B=P.length,S=P.filter(l=>l.total_variance<0).reduce((l,h)=>l+Math.abs(h.total_variance),0),i=P.filter(l=>l.total_variance>0).reduce((l,h)=>l+h.total_variance,0),R=S-i,x=P.filter(l=>l.total_variance<0).length,r=P.filter(l=>l.total_variance>0).length;return e.jsxDEV("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2.5 bg-violet-100 rounded-xl",children:e.jsxDEV(te,{className:"text-violet-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:101,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:100,columnNumber:25},void 0),"مقارنة التكاليف"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:99,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 mt-1",children:"كم صرفت مقارنة بالمتوقع؟"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:105,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:98,columnNumber:17},void 0),e.jsxDEV("button",{onClick:v,className:`flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-slate-600 hover:bg-slate-50 transition-all ${p?"opacity-50":""}`,children:[e.jsxDEV(K,{size:18,className:p?"animate-spin":""},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:111,columnNumber:21},void 0),"تحديث"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:107,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:97,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:`rounded-2xl p-6 ${R>=0?"bg-emerald-50 border-2 border-emerald-200":"bg-rose-50 border-2 border-rose-200"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[R>=0?e.jsxDEV(de,{className:"text-emerald-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:122,columnNumber:29},void 0):e.jsxDEV(le,{className:"text-rose-600",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:124,columnNumber:29},void 0),e.jsxDEV("span",{className:`text-sm font-bold ${R>=0?"text-emerald-700":"text-rose-700"}`,children:R>=0?"وفرت في الإجمالي":"صرفت زيادة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:126,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:120,columnNumber:21},void 0),e.jsxDEV("p",{className:`text-3xl font-black ${R>=0?"text-emerald-700":"text-rose-700"}`,children:[Math.abs(R).toLocaleString("en-US",{maximumFractionDigits:0})," ",e.jsxDEV("span",{className:"text-lg font-bold",children:"ج.م"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:131,columnNumber:101},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:130,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:119,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV(Q,{className:"text-emerald-500",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:138,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm font-bold text-slate-600",children:"أوامر وفرت فلوس"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:139,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:137,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-3xl font-black text-slate-800",children:[x," ",e.jsxDEV("span",{className:"text-lg font-bold text-slate-400",children:"أمر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:142,columnNumber:39},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:141,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:136,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV(pe,{className:"text-rose-500",size:24},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:149,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm font-bold text-slate-600",children:"أوامر صرفت أكثر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:150,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-3xl font-black text-slate-800",children:[r," ",e.jsxDEV("span",{className:"text-lg font-bold text-slate-400",children:"أمر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:153,columnNumber:43},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:152,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:147,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:b?e.jsxDEV("div",{className:"p-16 flex flex-col items-center justify-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-violet-600 mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:162,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-500 font-medium",children:"جاري التحميل..."},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:163,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:161,columnNumber:21},void 0):P.length===0?e.jsxDEV("div",{className:"p-16 text-center",children:[e.jsxDEV(te,{size:48,className:"text-slate-200 mx-auto mb-4"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:167,columnNumber:25},void 0),e.jsxDEV("h3",{className:"text-xl font-bold text-slate-600 mb-2",children:"لا توجد أوامر مكتملة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:168,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-slate-400",children:"أكمل أوامر تصنيع لمشاهدة مقارنة التكاليف"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:169,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:166,columnNumber:21},void 0):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.jsxDEV("th",{className:"p-4 text-right text-sm font-bold text-slate-600",children:"رقم الأمر"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:176,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-4 text-right text-sm font-bold text-slate-600",children:"المنتج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:177,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-4 text-center text-sm font-bold text-slate-600",children:"الكمية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:178,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-4 text-center text-sm font-bold text-slate-600",children:"المتوقع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:179,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-4 text-center text-sm font-bold text-slate-600",children:"الفعلي"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:180,columnNumber:37},void 0),e.jsxDEV("th",{className:"p-4 text-center text-sm font-bold text-slate-600",children:"النتيجة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:181,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:175,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:174,columnNumber:29},void 0),e.jsxDEV("tbody",{className:"divide-y divide-slate-100",children:P.map(l=>{const h=l.actual_material_cost+l.actual_scrap_cost,F=l.total_variance<0,g=Math.abs(l.total_variance);return e.jsxDEV("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxDEV("td",{className:"p-4",children:[e.jsxDEV("div",{className:"font-bold text-slate-700",children:["#",l.order_number]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:193,columnNumber:49},void 0),e.jsxDEV("div",{className:"text-xs text-slate-400 mt-1",children:new Date(l.actual_end_date).toLocaleDateString("en-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:194,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:192,columnNumber:45},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"font-medium text-slate-700 max-w-[200px] truncate",children:l.finished_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:199,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:198,columnNumber:45},void 0),e.jsxDEV("td",{className:"p-4 text-center",children:[e.jsxDEV("span",{className:"font-bold text-slate-700",children:l.qty_finished},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:204,columnNumber:49},void 0),l.qty_scrapped>0&&e.jsxDEV("span",{className:"text-xs text-rose-500 mr-1",children:["(-",l.qty_scrapped,")"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:206,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:203,columnNumber:45},void 0),e.jsxDEV("td",{className:"p-4 text-center",children:e.jsxDEV("span",{className:"font-mono font-bold text-slate-600",children:l.standard_cost.toLocaleString("en-US",{maximumFractionDigits:0})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:210,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:209,columnNumber:45},void 0),e.jsxDEV("td",{className:"p-4 text-center",children:e.jsxDEV("span",{className:"font-mono font-bold text-slate-600",children:h.toLocaleString("en-US",{maximumFractionDigits:0})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:215,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:214,columnNumber:45},void 0),e.jsxDEV("td",{className:"p-4 text-center",children:e.jsxDEV("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full font-bold text-sm ${Math.round(g)===0?"bg-slate-100 text-slate-600":F?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:Math.round(g)===0?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Q,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:228,columnNumber:61},void 0),"مطابق ✓"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:227,columnNumber:57},void 0):F?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(de,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:233,columnNumber:61},void 0),"وفرت ",g.toLocaleString("en-US",{maximumFractionDigits:0})]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:232,columnNumber:57},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(le,{size:16},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:238,columnNumber:61},void 0),"زيادة ",g.toLocaleString("en-US",{maximumFractionDigits:0})]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:237,columnNumber:57},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:220,columnNumber:49},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:219,columnNumber:45},void 0)]},l.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:191,columnNumber:41},void 0)})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:184,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:173,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:172,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:159,columnNumber:13},void 0),B>0&&e.jsxDEV("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:e.jsxDEV("div",{className:"flex flex-wrap gap-6 justify-center text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Y,{size:18,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:258,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-slate-600",children:["إجمالي الأوامر: ",e.jsxDEV("strong",{className:"text-slate-800",children:B},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:259,columnNumber:78},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:259,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:257,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(de,{size:18,className:"text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:262,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-slate-600",children:["إجمالي التوفير: ",e.jsxDEV("strong",{className:"text-emerald-600",children:[S.toLocaleString("en-US",{maximumFractionDigits:0})," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:263,columnNumber:78},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:263,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:261,columnNumber:25},void 0),i>0&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(le,{size:18,className:"text-rose-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:267,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-slate-600",children:["إجمالي الزيادة: ",e.jsxDEV("strong",{className:"text-rose-600",children:[i.toLocaleString("en-US",{maximumFractionDigits:0})," ج.م"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:268,columnNumber:82},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:268,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:266,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:256,columnNumber:21},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:255,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/components/manufacturing/VarianceAnalysis.tsx",lineNumber:95,columnNumber:9},void 0)},En=({products:c,viewType:P="manufacturing"})=>{const j=()=>P==="bom-manager"?"BOM":P==="stock-movements"?"MOVEMENTS":P==="production-orders"?"PRODUCTION":P==="manufacturing-dashboard"?"DASHBOARD":P==="variance-analysis"?"VARIANCE":P==="capacity-planning"?"CAPACITY":P==="mrp-planning"?"MRP":"DASHBOARD",[b,V]=a.useState(j()),[p,H]=a.useState(!1),[O,v]=a.useState(!1),[B,S]=a.useState(null),[i,R]=a.useState(c||[]),[x,r]=a.useState([]),[l,h]=a.useState({total:0,pending:0,inProgress:0,completed:0,cancelled:0}),[F,g]=a.useState(!1),[k,E]=a.useState(!1);a.useEffect(()=>{V(j())},[P]);const q=async()=>{E(!0);try{const[u,N]=await Promise.all([i.length===0?I.getProducts():Promise.resolve(i),I.getProductionOrders({limit:"100"})]);if(i.length===0&&R(u),Array.isArray(N)){r(N);const L=N.filter(m=>m.status==="PLANNED"||m.status==="CONFIRMED"||m.status==="WAITING_MATERIALS").length,_=N.filter(m=>m.status==="IN_PROGRESS").length,$=N.filter(m=>m.status==="COMPLETED").length;h({total:N.length,pending:L,inProgress:_,completed:$,cancelled:0})}else r(N.orders||[]),N.stats&&h(N.stats)}catch{}finally{E(!1),g(!1)}};a.useEffect(()=>{b==="DASHBOARD"?q():(b==="BOM"||b==="MOVEMENTS")&&i.length===0&&!F&&(g(!0),I.getProducts().then(R).catch(console.error).finally(()=>g(!1)))},[b]);const n=a.useMemo(()=>{const u=new Date;u.setHours(0,0,0,0);const N=x.filter(C=>C.status===T.IN_PROGRESS),L=x.filter(C=>C.status===T.PLANNED||C.status===T.CONFIRMED||C.status===T.WAITING_MATERIALS),_=x.filter(C=>C.status===T.COMPLETED),$=_.filter(C=>{const w=new Date(C.actualEndDate||C.actual_end_date||C.updatedAt||C.updated_at);return w.setHours(0,0,0,0),w.getTime()===u.getTime()}),m=x.filter(C=>{const w=new Date(C.actualStartDate||C.actual_start_date||C.createdAt||C.created_at);return w.setHours(0,0,0,0),w.getTime()===u.getTime()&&C.status===T.IN_PROGRESS}),d=_.reduce((C,w)=>C+(w.qtyFinished||w.qty_finished||0),0),o=_.reduce((C,w)=>C+(w.qtyScrapped||w.qty_scrapped||0),0),f=_.reduce((C,w)=>C+(w.qtyPlanned||w.qty_planned||0),0),y=f>0?Math.round(d/f*100):0,s=i.filter(C=>C.type==="RAW"&&C.stock<(C.minStock||10)).slice(0,5),z=[..._].sort((C,w)=>new Date(w.actualEndDate||w.actual_end_date||w.updatedAt||w.updated_at).getTime()-new Date(C.actualEndDate||C.actual_end_date||C.updatedAt||C.updated_at).getTime()).slice(0,5),W=[];for(let C=6;C>=0;C--){const w=new Date(u);w.setDate(w.getDate()-C);const re=new Date(w);re.setHours(0,0,0,0);const se=new Date(w);se.setHours(23,59,59,999);const me=_.filter(A=>{const G=new Date(A.actualEndDate||A.actual_end_date||A.updatedAt||A.updated_at);return G>=re&&G<=se}).reduce((A,G)=>A+(G.qtyFinished||G.qty_finished||0),0),t=["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"];W.push({day:t[w.getDay()],qty:me,isToday:C===0})}const Ce=Math.max(...W.map(C=>C.qty),1);return{activeOrders:N.length,pendingOrders:L.length,completedOrders:_.length,todayCompleted:$.length,todayStarted:m.length,todayProducedQty:$.reduce((C,w)=>C+(w.qtyFinished||w.qty_finished||0),0),totalProduced:d,totalScrapped:o,efficiency:y,lowStockMaterials:s,recentCompleted:z,weeklyData:W,maxWeeklyQty:Ce,manufacturedProducts:i.filter(C=>C.isManufactured).length,rawMaterials:i.filter(C=>C.type==="RAW").length,totalActiveOrders:l.inProgress,totalPendingOrders:l.pending,totalCompletedOrders:l.completed,grandTotal:l.total}},[x,i,l]),M=[{id:"DASHBOARD",label:"الرئيسية",icon:le},{id:"PRODUCTION",label:"الأوامر",icon:ee},{id:"BOM",label:"القوائم",icon:ne},{id:"MOVEMENTS",label:"الحركة",icon:Xe},{id:"SCRAP",label:"الهالك",icon:J},{id:"VARIANCE",label:"التكلفة",icon:te}];return e.jsxDEV("div",{className:"p-6 max-w-[1600px] mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsxDEV("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-3xl border border-white/60 shadow-lg flex flex-col md:flex-row justify-between items-start md:items-center gap-6 relative overflow-hidden group",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-80 h-80 bg-teal-500/5 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:214,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("h1",{className:"text-3xl font-black bg-gradient-to-r from-teal-600 to-emerald-600 bg-clip-text text-transparent flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-3 bg-teal-50 rounded-2xl shadow-sm",children:e.jsxDEV(ee,{className:"text-teal-600",size:32},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:219,columnNumber:29},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:218,columnNumber:25},void 0),"التصنيع والإنتاج"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:217,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-slate-500 font-medium mt-2 max-w-xl",children:"إدارة عمليات التصنيع ومتابعة الإنتاج والمخزون بكفاءة عالية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:223,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:216,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-3 items-center relative z-10",children:[e.jsxDEV("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-5 py-3 bg-white/50 backdrop-blur-sm border border-slate-200/60 text-slate-700 font-bold rounded-xl hover:bg-white hover:shadow-md transition-all active:scale-95",children:[e.jsxDEV(ae,{size:20,className:"text-slate-400"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:231,columnNumber:25},void 0),e.jsxDEV("span",{children:"وصفة جديدة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:232,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:227,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>{S(null),H(!0)},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-teal-600 to-emerald-600 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-teal-500/30 transition-all transform hover:-translate-y-0.5 active:scale-95",children:[e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:241,columnNumber:25},void 0),e.jsxDEV("span",{children:"أمر تصنيع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:242,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:234,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:226,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:213,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-white/40 backdrop-blur-md p-1.5 rounded-2xl border border-white/40 shadow-sm inline-flex flex-wrap gap-1",children:M.map(u=>e.jsxDEV("button",{onClick:()=>V(u.id),className:`px-5 py-3 rounded-xl flex items-center gap-2 font-bold text-sm transition-all duration-300 ${b===u.id?"bg-white text-teal-700 shadow-md ring-1 ring-black/5 transform scale-[1.02]":"text-slate-500 hover:text-slate-700 hover:bg-white/40"}`,children:[e.jsxDEV(u.icon,{size:18,className:b===u.id?"text-teal-500":"opacity-70"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:258,columnNumber:25},void 0),u.label]},u.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:250,columnNumber:21},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:248,columnNumber:13},void 0),b==="DASHBOARD"&&e.jsxDEV("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("button",{onClick:q,disabled:k,className:`flex items-center gap-2 px-4 py-2 bg-white rounded-xl border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all ${k?"opacity-50":""}`,children:[e.jsxDEV(K,{size:16,className:k?"animate-spin":""},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:274,columnNumber:29},void 0),"تحديث البيانات"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:269,columnNumber:25},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:268,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-gradient-to-r from-teal-600 via-emerald-600 to-cyan-600 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:281,columnNumber:25},void 0),e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:["📅 ملخص اليوم",e.jsxDEV("span",{className:"text-sm font-normal bg-white/20 px-3 py-1 rounded-full",children:new Date().toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:285,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:283,columnNumber:29},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4",children:[e.jsxDEV("p",{className:"text-emerald-100 text-sm",children:"أوامر بدأت اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:291,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-3xl font-bold",children:n.todayStarted},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:292,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:290,columnNumber:33},void 0),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4",children:[e.jsxDEV("p",{className:"text-emerald-100 text-sm",children:"أوامر اكتملت اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:295,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-3xl font-bold",children:n.todayCompleted},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:296,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:294,columnNumber:33},void 0),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4",children:[e.jsxDEV("p",{className:"text-emerald-100 text-sm",children:"الكمية المنتجة اليوم"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:299,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-3xl font-bold",children:n.todayProducedQty.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:300,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:298,columnNumber:33},void 0),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4",children:[e.jsxDEV("p",{className:"text-emerald-100 text-sm",children:"كفاءة الإنتاج"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:303,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-3xl font-bold",children:[n.efficiency,"%"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:304,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:302,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:289,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:282,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:280,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxDEV("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-3xl border border-white/60 shadow-lg hover:shadow-xl transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden cursor-pointer",onClick:()=>V("PRODUCTION"),children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl -mr-16 -mt-16"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:313,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative z-10 flex justify-between items-start mb-4",children:[e.jsxDEV("div",{className:"p-4 bg-blue-500/10 rounded-2xl group-hover:bg-blue-500/20 transition-colors",children:e.jsxDEV(Be,{className:"text-blue-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:316,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:315,columnNumber:33},void 0),n.totalActiveOrders>0&&e.jsxDEV("span",{className:"text-xs font-bold text-blue-600 bg-blue-100/50 px-3 py-1.5 rounded-full animate-pulse",children:"نشط"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:319,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:314,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-500 text-sm font-bold mb-1",children:"أوامر جارية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:324,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-4xl font-black text-slate-800 tracking-tight",children:n.totalActiveOrders.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:325,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 mt-2",children:"اضغط للعرض ←"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:326,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:312,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-3xl border border-white/60 shadow-lg hover:shadow-xl transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-500/10 rounded-full blur-2xl -mr-16 -mt-16"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:330,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative z-10 flex justify-between items-start mb-4",children:e.jsxDEV("div",{className:"p-4 bg-amber-500/10 rounded-2xl group-hover:bg-amber-500/20 transition-colors",children:e.jsxDEV(he,{className:"text-amber-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:333,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:332,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:331,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-500 text-sm font-bold mb-1",children:"أوامر معلقة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:336,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-4xl font-black text-slate-800 tracking-tight",children:n.totalPendingOrders.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:337,columnNumber:29},void 0),e.jsxDEV("div",{className:"w-full bg-slate-100 h-2 rounded-full mt-4 overflow-hidden",children:e.jsxDEV("div",{className:"bg-gradient-to-r from-amber-400 to-orange-500 h-full rounded-full transition-all",style:{width:`${Math.min(n.totalPendingOrders/Math.max(n.totalActiveOrders+n.totalPendingOrders,1)*100,100)}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:339,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:338,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:329,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-3xl border border-white/60 shadow-lg hover:shadow-xl transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl -mr-16 -mt-16"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:344,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative z-10 flex justify-between items-start mb-4",children:[e.jsxDEV("div",{className:"p-4 bg-emerald-500/10 rounded-2xl group-hover:bg-emerald-500/20 transition-colors",children:e.jsxDEV(Q,{className:"text-emerald-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:347,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:346,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100/50 px-3 py-1.5 rounded-full border border-emerald-200/50",children:"مكتمل"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:349,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:345,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-500 text-sm font-bold mb-1",children:"أوامر مكتملة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:351,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-4xl font-black text-slate-800 tracking-tight",children:n.totalCompletedOrders.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:352,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs text-emerald-600 mt-2",children:["إجمالي الأوامر: ",n.grandTotal.toLocaleString()]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:353,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:343,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-3xl border border-white/60 shadow-lg hover:shadow-xl transition-all duration-300 group hover:-translate-y-1 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 right-0 w-32 h-32 bg-rose-500/10 rounded-full blur-2xl -mr-16 -mt-16"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:357,columnNumber:29},void 0),e.jsxDEV("div",{className:"relative z-10 flex justify-between items-start mb-4",children:e.jsxDEV("div",{className:"p-4 bg-rose-500/10 rounded-2xl group-hover:bg-rose-500/20 transition-colors",children:e.jsxDEV(J,{className:"text-rose-600",size:28},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:360,columnNumber:37},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:359,columnNumber:33},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:358,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-slate-500 text-sm font-bold mb-1",children:"إجمالي الهالك"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:363,columnNumber:29},void 0),e.jsxDEV("h3",{className:"text-4xl font-black text-rose-600 tracking-tight",children:n.totalScrapped.toLocaleString()},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:364,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400 mt-2",children:"وحدة هالكة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:365,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:356,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:311,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsxDEV(le,{size:20,className:"text-teal-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:375,columnNumber:37},void 0),"الإنتاج خلال الأسبوع"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:374,columnNumber:33},void 0),e.jsxDEV("span",{className:"text-sm text-slate-500",children:"بيانات حقيقية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:378,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:373,columnNumber:29},void 0),e.jsxDEV("div",{className:"h-64 flex items-end justify-between gap-4 px-4 pt-8",children:n.weeklyData.map((u,N)=>e.jsxDEV("div",{className:"flex-1 flex flex-col items-center gap-2 group relative",children:[e.jsxDEV("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-xs py-1.5 px-3 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 shadow-xl z-10 whitespace-nowrap pointer-events-none",children:[e.jsxDEV("div",{className:"font-bold",children:[u.qty," وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:384,columnNumber:45},void 0),e.jsxDEV("div",{className:"text-[10px] text-slate-300",children:u.day},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:385,columnNumber:45},void 0),e.jsxDEV("div",{className:"absolute bottom-[-4px] left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800 rotate-45"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:386,columnNumber:45},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:383,columnNumber:41},void 0),e.jsxDEV("div",{className:"w-full bg-teal-50 rounded-t-xl relative h-full overflow-hidden",children:e.jsxDEV("div",{className:`absolute bottom-0 w-full rounded-t-xl transition-all duration-500 ${u.isToday?"bg-gradient-to-t from-emerald-500 to-teal-400":"bg-gradient-to-t from-teal-500 to-teal-400"} group-hover:from-teal-600 group-hover:to-teal-500`,style:{height:`${n.maxWeeklyQty>0?u.qty/n.maxWeeklyQty*100:0}%`}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:389,columnNumber:45},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:388,columnNumber:41},void 0),e.jsxDEV("span",{className:`text-xs font-medium transition-colors ${u.isToday?"text-emerald-600 font-bold":"text-slate-400 group-hover:text-teal-600"}`,children:u.day},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:396,columnNumber:41},void 0)]},N,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:382,columnNumber:37},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:380,columnNumber:29},void 0),n.weeklyData.every(u=>u.qty===0)&&e.jsxDEV("p",{className:"text-center text-slate-400 mt-4",children:"لا يوجد إنتاج مسجل هذا الأسبوع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:403,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:372,columnNumber:25},void 0),e.jsxDEV("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 flex items-center gap-2 mb-4",children:[e.jsxDEV(oe,{size:20,className:"text-amber-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:410,columnNumber:33},void 0),"تنبيهات نقص المخزون"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:409,columnNumber:29},void 0),n.lowStockMaterials.length===0?e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV(Q,{size:48,className:"text-emerald-400 mx-auto mb-3"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:415,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-emerald-600 font-medium",children:"جميع المواد متوفرة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:416,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm",children:"لا توجد تنبيهات حالياً"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:417,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:414,columnNumber:33},void 0):e.jsxDEV("div",{className:"space-y-3",children:n.lowStockMaterials.map(u=>e.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-slate-800 text-sm",children:u.name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:424,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs text-amber-600",children:["الحد الأدنى: ",u.minStock||10]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:425,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:423,columnNumber:45},void 0),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-bold text-amber-700",children:u.stock},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:428,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:u.unit},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:429,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:427,columnNumber:45},void 0)]},u.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:422,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:420,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:408,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:370,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsxDEV(Q,{size:20,className:"text-emerald-500"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:444,columnNumber:37},void 0),"آخر الأوامر المكتملة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:443,columnNumber:33},void 0),e.jsxDEV("button",{onClick:()=>V("PRODUCTION"),className:"text-sm text-teal-600 hover:text-teal-700 flex items-center gap-1",children:["عرض الكل ",e.jsxDEV(we,{size:14},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:451,columnNumber:46},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:447,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:442,columnNumber:29},void 0),n.recentCompleted.length===0?e.jsxDEV("div",{className:"text-center py-8 text-slate-400",children:[e.jsxDEV(ee,{size:48,className:"mx-auto mb-3 opacity-30"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:456,columnNumber:37},void 0),e.jsxDEV("p",{children:"لا توجد أوامر مكتملة بعد"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:457,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:455,columnNumber:33},void 0):e.jsxDEV("div",{className:"space-y-3",children:n.recentCompleted.map(u=>e.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsxDEV(Q,{size:20,className:"text-emerald-600"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:465,columnNumber:53},void 0)},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:464,columnNumber:49},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-slate-800",children:u.finishedProductName||u.finished_product_name},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:468,columnNumber:53},void 0),e.jsxDEV("p",{className:"text-xs text-slate-500",children:["#",u.orderNumber||u.order_number]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:469,columnNumber:53},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:467,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:463,columnNumber:45},void 0),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("p",{className:"font-bold text-emerald-600",children:[u.qtyFinished||u.qty_finished," وحدة"]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:473,columnNumber:49},void 0),e.jsxDEV("p",{className:"text-xs text-slate-400",children:new Date(u.actualEndDate||u.actual_end_date||u.updatedAt||u.updated_at).toLocaleDateString("ar-EG")},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:474,columnNumber:49},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:472,columnNumber:45},void 0)]},u.id,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:462,columnNumber:41},void 0))},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:460,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:441,columnNumber:25},void 0),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg group",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("h3",{className:"text-lg font-bold mb-2 opacity-90",children:"المنتجات المصنعة"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:488,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-slate-400 text-sm mb-4",children:"أصناف تامة الصنع"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:489,columnNumber:37},void 0),e.jsxDEV("div",{className:"text-4xl font-bold",children:n.manufacturedProducts},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:490,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:487,columnNumber:33},void 0),e.jsxDEV(Y,{className:"absolute right-4 bottom-4 text-slate-700 opacity-20 group-hover:scale-110 transition-transform duration-500",size:80},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:492,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:486,columnNumber:29},void 0),e.jsxDEV("div",{className:"bg-gradient-to-br from-teal-600 to-teal-800 rounded-2xl p-6 text-white relative overflow-hidden shadow-lg group",children:[e.jsxDEV("div",{className:"relative z-10",children:[e.jsxDEV("h3",{className:"text-lg font-bold mb-2 opacity-90",children:"المواد الخام"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:497,columnNumber:37},void 0),e.jsxDEV("p",{className:"text-teal-200 text-sm mb-4",children:"أصناف المواد الأولية"},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:498,columnNumber:37},void 0),e.jsxDEV("div",{className:"text-4xl font-bold",children:n.rawMaterials},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:499,columnNumber:37},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:496,columnNumber:33},void 0),e.jsxDEV(ne,{className:"absolute right-4 bottom-4 text-teal-400 opacity-20 group-hover:scale-110 transition-transform duration-500",size:80},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:501,columnNumber:33},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:495,columnNumber:29},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:485,columnNumber:25},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:439,columnNumber:21},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:266,columnNumber:17},void 0),e.jsxDEV("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:[b==="BOM"&&e.jsxDEV(Je,{onCreateProductionOrder:u=>{S(u),H(!0)}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:511,columnNumber:21},void 0),b==="PRODUCTION"&&e.jsxDEV(nn,{},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:518,columnNumber:48},void 0),b==="MOVEMENTS"&&e.jsxDEV(on,{products:i},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:519,columnNumber:47},void 0),b==="SCRAP"&&e.jsxDEV(ln,{},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:520,columnNumber:43},void 0),b==="VARIANCE"&&e.jsxDEV(tn,{},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:521,columnNumber:46},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:509,columnNumber:13},void 0),p&&e.jsxDEV(Oe,{initialBomId:B,onClose:()=>{H(!1),S(null)},onSuccess:()=>{H(!1),S(null),V("PRODUCTION")}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:529,columnNumber:17},void 0),O&&e.jsxDEV(ke,{onClose:()=>v(!1),onSuccess:()=>{v(!1),V("BOM")}},void 0,!1,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:545,columnNumber:17},void 0)]},void 0,!0,{fileName:"F:/Codes/ERP/18 -12 B/Cloud ERP 12-16 H/Cloud ERP/pages/Manufacturing.tsx",lineNumber:211,columnNumber:9},void 0)};export{En as Manufacturing};
